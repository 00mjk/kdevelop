<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The KDevelop Programming Handbook: KDE Developer Information</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="">
<META NAME="description" CONTENT="">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="programming-16.html">Next</A>
 <A HREF="programming-14.html">Previous</A>
 <A HREF="programming.html#toc15">Table of Contents</A>
</P>
<H3><A NAME="s15">15. KDE Developer Information</A></H3>

<P>This mini-HOWTO covers issues that are collected by David Sweet 
<A HREF="mailto:dsweet@chaos.umd.edu">&lt;dsweet@chaos.umd.edu></A>  in his <EM>The KDE Developer's mini-HOWTO (May 21, 1999)</EM> and was mailed at the KDE-Developer's
mailinglist. It contains information about CVS and package uploading to the KDE website which will be of use when you want to publish
your applications.
<P>The current version of the original document can be found at: 
<A HREF="http://www.chaos.umd.edu/~dsweet/KDE/DevelMiniHOWTO.txt">http://www.chaos.umd.edu/~dsweet/KDE/DevelMiniHOWTO.txt</A>.
<P>The following is adapted for usage with the KDevelop IDE, therefore <B>NOT</B> representing the original text.
<P>
<H3><A NAME="ss15.1">15.1 Information and Source Code</A>
</H3>

<P>
<P>
<H4>General Information</H4>

<P>The K Desktop Environment is an open source Unix desktop created by volunteers from around the world.  There are many ways to
contribute to the project.  You can write new code, improve old code, write documentation, translate to other languages, create
artwork, sounds, &amp; music, report bugs, and suggest new features.
<P>KDE uses the Qt toolkit which is developed by Troll Tech (www.troll.no). The main components of the desktop are a file manager
(kfm), window manager (kwm), and panel (kpanel).  There are many more utilities and applications which are included in the base
distribution and available elsewhere.
<P>The primary programming language used for development is C++, although bindings are available for Python (pyKDE).
<P>The currently released version of KDE is 1.1.1.  KDE 1.1.2 will introduce theme support (which allows users to dramatically change the
appearance of their desktops) and include bugfixes.  One should expect KDE 1.1.2 to be released in about 4-6 months.  KDE 2.0 will
include rewrites or major updates of kfm, khtmlw (an HTML widget), kpanel, kmail &amp; maybe kwm, unicode support, and much more.
<P>KDE 2.0 requires mico, a free CORBA implementation.  CORBA is used to make the new kfm (dubbed Konquerer) easily extensible and to
create a document-centric user interface for KOffice.  The user can, for example, embed a chart created and edited with KSpread into a
document which has text created and edited by KWord.  Here's a bit from Simon
Hausmann about KOM/OpenParts:
<P>OpenParts is based on KOM. It provides an easy way to graphically embed other application's "widgets" , provides a clever way to manage
shared GUI elements, together with a CORBA/KOM interface/implementation of these, and it implements the basic support for the document
view model, extensively used by KOffice. See kdenonbeta/corbadoc/komop.html in CVS for more.
<P>
<H4>URLs</H4>

<P>The main KDE web site is at:  
<A HREF="http://www.kde.org">http://www.kde.org</A>
See the "Developer information" section in the navigation side bar.
<P>Bug reports can be found at:  
<A HREF="http://bugs.kde.org">http://bugs.kde.org</A><P>Troll Tech (makers of the Qt toolkit) main site:  
<A HREF="http://www.troll.no">http://www.troll.no</A><P>KDE Source Code and binaries:  
<A HREF="ftp://ftp.kde.org">ftp://ftp.kde.org</A>  (or mirrors)
Qt  Source Code and binaries:  
<A HREF="ftp://ftp.troll.no">ftp://ftp.troll.no</A><P>CORBA Info: 
<A HREF="http://www.omg.org/">http://www.omg.org/</A><P>A good CORBA paper: 
<A HREF="http://www.cs.wustl.edu/~schmidt/vinoski.ps.gz">http://www.cs.wustl.edu/~schmidt/vinoski.ps.gz</A><P>MICO: 
<A HREF="http://diamant-atm.vsb.cs.uni-frankfurt.de/~mico/">http://diamant-atm.vsb.cs.uni-frankfurt.de/~mico/</A>  (read
the documentation!  It's good.)
<P>OpenParts/KOM: 
<A HREF="http://www.chaos.umd.edu/~dsweet/KDE/KTrans/KOM">http://www.chaos.umd.edu/~dsweet/KDE/KTrans/KOM</A><P>
<P>
<H4>Mailing lists</H4>

<P>
<P>The list kde-devel is for KDE developers in general.  The koffice mailing list is for developers interested in koffice, and kfm-devel
is for kfm (the file manager) developers.
<P>Send a message to either kde-devel-request or koffice-request with the messag "subscribe myid@myserver" (where myid@myserver stands for
your email address).  Go to the KDE mail page a click on "Mailing Lists" for more information about other KDE mailing lists and the
mailing list archive.
<P>Toll Tech provides a list for users of the Qt 2.0 snapshots (discussed below).  You may subscribe to this by sending an email to
<A HREF="mailto:snapshot-users-request@troll.no">snapshot-users-request@troll.no</A> with the _message_ "subscribe".
<P>
<P>As a KDE developer you may want or need a kde email address, like joedeveloper@kde.org.  To obtain one, send an email to Martin Konold
at 
<A HREF="konold@kde.org">konold@kde.org</A>.
<P>To gain access to the KDE CVS respository (discussed below), send an email with an encrypted password to Stephan Kulow
<A HREF="mailto:coolo@kde.org">&lt;coolo@kde.org></A>.
<P>To get your encrpyted password, type:
<BLOCKQUOTE><CODE>
<PRE>
perl -e print\ crypt\('passwd','sa'\)\.\"\\n\"
</PRE>
</CODE></BLOCKQUOTE>
<P>where passwd is your choice of password and sa is two random characters from the set [a-zA-Z0-9./]. The output is the encrypted
passwd.
<P>
<H3><A NAME="ss15.2">15.2 KDE CVS</A>
</H3>

<P>The KDE CVS (Concurrent Versions System) is the source code repository for the KDE project.  You can access it via
<P>(i) WWW: http://www., (ii) cvs utility,  (iii) cvsup utility, or (iv) snapshots.
<P>You will need CVS access only for (ii); (i), (iii), and (iv) are read-only methods and available to the public.
<P>The web page for method (i) explains its usage.  I haven't an explanation for method (iii), cvsup, yet.  Please see
<A HREF="http://www.kde.org/cvsup.html">http://www.kde.org/cvsup.html</A> [-- Perhaps someone who uses it will contribute a
short explanation of usage and information on obtaining it. --] The snapshots, (iv), are .tar.bz2 files which contain a section of KDE
code (called "modules"; ex, kdelibs, kdeutils) as it looked on some specified day (specified in the filename: ex,
kdelibs990517.tar.bz2).  The snapshots are posted daily in 
<A HREF="ftp://ftp.kde.org/pub/kde/unstable/CVS/snapshots">ftp://ftp.kde.org/pub/kde/unstable/CVS/snapshots</A>. [ (ii) is described below. ]
<P>The repository (or, just "CVS") stores all of the changes made to the source code by all of the contributors so that changes may
be undone.  Each time a user makes a change (s)he includes a comment so that the devlopment of code can be more easily followed.  These
comments are sent to the kde-cvs mailing list.  The CVS splits into _branches_ which may contain different versions of the KDE project.
For example, the two branches being developed now are KDE_1_1_BRANCH and HEAD.  They both are derived from the same code (i.e., if you
"undid" enough of the changes made to either branch you'd reveal identical source code) but used for different purposes.  Here are some
branches and descriptions for your reference:
<P>
<UL>
<LI>KDE_1_1_1_RELEASE - code that was considered stable, released, and distributed as KDE 1.1.1</LI>
<LI>KDE_1_1_BRANCH - derived from KDE_1_1_1_RELEASE; being developed for KDE 1.1.2; will include themes and bugfixed; based on Qt
1.42.   </LI>
<LI>HEAD - code which will become KDE 2.0.  It is based on Qt 2.0, requires mico, has a new kwm, kpanel, etc.  LOTS of changes.</LI>
</UL>
<P>
<P>The cvs utility is probably on your system.  To learn to use it I would recommend reading the man page!  Below is an explanation of
some common functions.
<P>Let's assume below that your username is joedeveloper.  As written below you should enter all of these commands from some base
directory. (KDE/CVS is not a bad choice!)
<P>Set the environment variable CVSROOT to :pserver:joedeveloper@cvs.kde.org:/home/kde.
<P>Checking out a module, ex. kdelibs from HEAD
<BLOCKQUOTE><CODE>
<PRE>
  cvs -z6 checkout -r HEAD kdelibs
  cvs -z6 checkout kdelibs
</PRE>
</CODE></BLOCKQUOTE>
<P>The -z6 option tells the server to compress the code at "level 6" before sending it to you.  This may speed things up for you.
The -r options tells cvs which branch you want to checkout from. The default is the HEAD branch.
<P>Checking out a module, ex. kdelibs, from KDE_1_1_BRANCH
<P>
<BLOCKQUOTE><CODE>
<PRE>
  cvs -z6 checkout -r KDE_1_1_BRANCH kdelibs
</PRE>
</CODE></BLOCKQUOTE>
<P>Note: you could use co as an abbreviation for checkout.
<P>Checking out an application from within a module (ex kjots, which is in the kdeutils module) from the HEAD branch
<P>
<OL>
<LI>cvs -z6 co -l kdeutils</LI>
<LI>cvs -z6 co -l admin</LI>
<LI>cvs -z6 co -l kdeutils/kjots</LI>
<LI>cd kdeutils; ln -s ../admin</LI>
</OL>
<P>The -l in line (1) tells cvs not to recurse the subdirectories of kdeutils.  This means will get the configure script and its
companions (discussed below), but none of the application source code.
<P>Line (2) gets the admin directory which contains support files for autoconf and friends.  (This directory is retrieved automatically
when checking out an entire module.)
<P>Line (3) gets the kjots source.
<P>Line (4) makes a link to the admin directory.  (This is better than copying or moving the directory here.  If you leave admin where cvs
put if then you can easily update the admin directory with cvs.  You could also make links to admin from any other modules you check
out this way and thus have only one, up-to-date copy of admin.)
<P>Updating source code you've previously checked out (ex. kdeutils/kjots)
<P>
<BLOCKQUOTE><CODE>
<PRE>
  cvs -z6 update kdeutils/kjots
</PRE>
</CODE></BLOCKQUOTE>
<P>The source code for kjots on your hard drive will be updated to match the code in the CVS.  You don't need to specify the branch here.
The correct branch is stored in kdeutils/kjots/CVS/Tag.
<P>Commiting changes (putting them into CVS) (ex. kdeutils/kjots)
<BLOCKQUOTE><CODE>
<PRE>
  cvs -z6 commit kdeutils/jots
</PRE>
</CODE></BLOCKQUOTE>
<P>You'll be prompted to edit a comment.  Enter a short one which desribes the changes you're making with this commmit.  (You can use
your editor of choice by setting the EDITOR or CVSEDITOR environment variable.)
<P>Adding a file (ex. kdeutils/kmyapp/greatnewcode.cpp) [create the file first!]
<BLOCKQUOTE><CODE>
<PRE>
  cd kdeutils/kmyapp
  cvs add greatnewcode.cpp
  cvs commit
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Deleting a file (ex. kdeutils/kmyapp/badoldcode.cpp)
<BLOCKQUOTE><CODE>
<PRE>
  cd kdeutils/kmyapp
  rm badoldcode.cpp
  cvs remove badoldcode.cpp
  cvs commit
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Adding a directory (a module, like a new app) (ex. kdeutils/kmyapp, with the source file kmysource.cpp)
<BLOCKQUOTE><CODE>
<PRE>
  cd kdeutils
  mkdir kmyapp
  (create the kmyapp/kmysource.cpp file)
  cvs add kmyapp
  cvs add kmyapp/kmysource.cpp
  cvs commit    (actually puts the directory and file in the CVS)
</PRE>
</CODE></BLOCKQUOTE>
<P>Note: You need to have files in a directory to commit it.
<P>Removing a directory (a module, like a new app) (ex. kdeutils/kmyapp)
<BLOCKQUOTE><CODE>
<PRE>
  cd kdeutils/kmyapp
  (delete all files, as described above in "Deleting a file")
  cd ..
  cvs -P update  (will remove the local kmyapp automatically)
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H3><A NAME="ss15.3">15.3 Compiling and Safe Development Practices (with configure)</A>
</H3>

<P>Before you start downloading and compiling the latest sources you should be aware that there's a good chance they won't work!  They are
in a state of constant development so they could very well have bugs.
<P>Knowing this, you should find a way to compile and run new KDE stuff without interfering with your existing stable KDE setup.  Here's
one way, using the HEAD branch as an example.  We, again, assume your login is joedeveloper.  We also assume that your home directory
is in /home/joedeveloper.  (This would be the case for Red Hat systems.)
<P>Make a directory called KDE in the home directory of your *user* account.  You should not be doing any of this as root!  Make another
called KDE/CVS-HEAD.  cd into that directory and get the KDE sources from the HEAD branch that you want.  The (minumum) modules needed
to use an application are: kdesupport, kdelibs.  You should compile and install them in that order (see below for compiling).  Others
you might want are: kdebase, kdeutils, kdegraphics, etc.
<P>Now, make a directory called KDE/kde-HEAD.  This is where you'll store the compiled code from the HEAD branch -- as well as Qt 2.0!
Let's get Qt 2.0 (snapshots are available from 
<A HREF="ftp://ftp.troll.no/qt/snapshots">ftp://ftp.troll.no/qt/snapshots</A>.
Get the latest one.  Don't expect it to work without a little help, though.  You can find some help on the Qt snapshot mailing list
mentioned above.)  Put the sources in KDE/kde-HEAD. To compile the code, cd to KDE/kde-HEAD and
<P>
<BLOCKQUOTE><CODE>
<PRE>
        
        gzip -d qt-2.00beta-snapshot-1999xxxx.tar.gz
        tar -xvf qt-2.00beta-snapshot-1999xxxx.tar
        ln -s qt-2.00beta-snapshot-1999xxxx qt
        cd qt
        setenv QTDIR $PWD     (if you use csh/tcsh, change this for bash)
        cd configs
        mv linux-g++-shared linux-g++-shared.orig
        sed s/-fno-rtti// linux-g++-shared.orig > linux-g++-shared
        make linux-g++-shared
        make
</PRE>
</CODE></BLOCKQUOTE>
<P>You should compare the files configs/linux-g++-shared and configs/linux-g++-shared.orig if you don't know what the sed is doing.
The look up the -fno-rtti option of egcs.
<P>Now, for the KDE code.  cd to KDE/CVS-HEAD/kdesupport.  Type
<P>make -f Makefile.cvs
<P>./configure --prefix=/home/joedeveloper/KDE/kde-HEAD --with-qt-dir=/home/joedeveloper/KDE/kde-HEAD/qt
--with-qt-libs=/home/joedeveloper/KDE/kde-HEAD/qt/lib
<P>make
<P>If all goes well, then
<P>make install
<P>If not, try to fix things, then type
<P>make install
<P>Repeat this process for the other modules.  You should alter the ./configure line to read
<P>./configure --prefix=/home/joedeveloper/KDE/kde-HEAD --with-qt-dir=/home/joedeveloper/KDE/kde-HEAD/qt
--with-qt-libs=/home/joedeveloper/KDE/kde-HEAD/qt/lib --enable-new-stuff --enable-tutorials
<P>when you compile the code in the kdelibs module.
<P>
<H3><A NAME="ss15.4">15.4 Compiling tips</A>
</H3>

<P>We turned off the "-fno-rtti" option when compiling Qt 2.0 because it prevents KDE from linking. It seems that you need to compile and
install qimageio (part of Qt) separately if you want to get koffice to compile.  [-- I'll provide instructions once I try this. --]
<P>
<P>
<H3><A NAME="ss15.5">15.5 Submitting contributions</A>
</H3>

<P>If you are hacking at CVS, you should follow the commit procedure outlined above. If you are developing outside of CVS, you can submit
you code (widgets, applications, etc.) via FTP to 
<A HREF="ftp://upload.kde.org/Incoming">ftp://upload.kde.org/Incoming</A><P>When you do this be sure to include an .lsm (Linux Software Map) file. This way your code can be automatically placed in the
appropriate spot on ftp.kde.org and its mirrors and an announcement can be automatically sent to kde-announce.  Here's a sample .lsm:
<P>
<BLOCKQUOTE><CODE>
<PRE>
Begin3
Title:          KLab
Version:        0.1.0
Entered-date:   3/1/99
Description:    GUI and more for RLab
Keywords:       kde rlab math plot plotting
Author:         David Sweet &lt;dsweet@chaos.umd.edu>
Maintained-by:  David Sweet &lt;dsweet@chaos.umd.edu>
Home-page:      http://www.glue.umd.edu/~dsweet/KDE/KLab
Primary-site:   ftp://ftp.kde.org/pub/kde/unstable/apps/scientific
Alternate-site: http://www.glue.umd.edu/~dsweet/KDE/KLab/
Original-site:  ftp://upload.kde.org/pub/kde/Incoming
Platform:       unix
Copying-policy: GPL
End
</PRE>
</CODE></BLOCKQUOTE>
<P>KDevelop projects by default contain a lsm file in the main project directory. There, your email-adress and your name is already
inserted, so you only have to complete the information that is missing like the sites. The .lsm file should be uploaded separately
from the source code. The source code should be packaged as a .tar.gz (or .tgz)  or .tar.bz2.  This archive should expand to a single
directory with all of your stuff in it. Within KDevelop, choose "Project"-"Create Distribution"-"tar.gz" which automatically creates
the tar.gz file.
<P>
<H3><A NAME="ss15.6">15.6 Thanks</A>
</H3>

<P>I'd like to thank the following people for their suggestions (in no particular order): Roberto Alsina, Waldo Bastian, Harri Porten,
Samuel Wuethrich, Daniel Naber, Martin Konold.
<P>
<P ALIGN="RIGHT">

<A HREF="programming-16.html">Next</A>
 <A HREF="programming-14.html">Previous</A>
 <A HREF="programming.html#toc15">Table of Contents</A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
