include_directories( ${CMAKE_SOURCE_DIR}/languages/cpp/parser )


########### next target ###############

set(kdevcpprpp_LIB_SRCS
    pp-stream.cpp
    pp-macro-expander.cpp
    pp-scanner.cpp
    pp-macro.cpp
    pp-engine.cpp
    pp-internal.cpp
    pp-environment.cpp
    preprocessor.cpp
)

kde4_automoc(${kdevcpprpp_LIB_SRCS})
kde4_add_library(kdevcpprpp SHARED ${kdevcpprpp_LIB_SRCS})
target_link_libraries(kdevcpprpp ${KDE4_KDECORE_LIBS})
set_target_properties(kdevcpprpp PROPERTIES VERSION 4.0.0 SOVERSION 4)
install(TARGETS kdevcpprpp DESTINATION ${LIB_INSTALL_DIR} )

########### next target ###############

set(pp_SRCS
    main.cpp
)

kde4_add_test(pp ${pp_SRCS})
target_link_libraries(pp ${KDE4_KDECORE_LIBS} kdevcpprpp)


########### install files ###############

install(FILES
    pp-engine.h
    pp-internal.h
    pp-macro-expander.h
    pp-macro.h
    pp-scanner.h
    pp-stream.h
    pp-environment.h
    preprocessor.h
    DESTINATION ${INCLUDE_INSTALL_DIR}/kdevelop/rpp
)
