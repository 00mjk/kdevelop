SET(kdevabbrev_PART_SRCS
abbrevpart.cpp
abbrevconfigwidget.cpp
addtemplatedlg.cpp
)

KDE_AUTOMOC(${kdevabbrev_PART_SRCS})

SET( kdevabbrev_UI
abbrevconfigwidgetbase.ui
addtemplatedlgbase.ui
)

KDE_ADD_UI_FILES(kdevabbrev_PART_SRCS ${kdevabbrev_UI} )

MACRO(KDE_ADD_PLUGIN _target )
   ADD_LIBRARY(${_target} MODULE ${ARGN})
   INSTALL_TARGETS(/lib/kde3/lib ${_target})


   GET_TARGET_PROPERTY(_target_location ${_target} LOCATION)

   GET_FILENAME_COMPONENT(_laname ${_target_location} NAME_WE)
   GET_FILENAME_COMPONENT(_soname ${_target_location} NAME)
   SET(_laname ${_laname}.la)

   FILE(WRITE ${_laname} "# ${_laname} - a libtool library file\n")
   FILE(APPEND ${_laname} "# Generated by cmake \n")
   FILE(APPEND ${_laname} "# The name that we can dlopen(3).\n")
   FILE(APPEND ${_laname} "dlname='${_soname}'\n")

   INSTALL_TARGETS(/lib/kde3/lib ${_target})
   INSTALL_FILES(/lib/kde3/lib FILES ${_laname})
ENDMACRO(KDE_ADD_PLUGIN)




KDE_ADD_PLUGIN(kdevabbrev ${kdevabbrev_PART_SRCS})
#ADD_LIBRARY(kdevabbrev MODULE ${kdevabbrev_PART_SRCS})

#SET_TARGET_PROPERTIES(kdevabbrev PROPERTIES PREFIX "")

TARGET_LINK_LIBRARIES(kdevabbrev ${KDEV_PART_LIBS})

#INSTALL_TARGETS(/lib/kde3/lib kdevabbrev)


#original Makefile.am contents follow:

## Here resides the abbrev part
#
#INCLUDES = -I$(top_srcdir)/lib/interfaces $(all_includes)
#
#kde_module_LTLIBRARIES = libkdevabbrev.la
#libkdevabbrev_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN)
#libkdevabbrev_la_LIBADD = $(top_builddir)/lib/libkdevelop.la
#
#libkdevabbrev_la_SOURCES = abbrevpart.cpp abbrevconfigwidget.cpp abbrevconfigwidgetbase.ui addtemplatedlg.cpp addtemplatedlgbase.ui
#
#METASOURCES = AUTO
#
#servicedir = $(kde_servicesdir)
#service_DATA = kdevabbrev.desktop
#
#sourcesdir = $(kde_datadir)/kdevabbrev/sources
#sources_DATA = qt_classes cpp_keywords
#
#rcdir = $(kde_datadir)/kdevabbrev
#rc_DATA = kdevabbrev.rc
