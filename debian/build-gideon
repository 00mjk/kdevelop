#!/usr/bin/make -f

# this script helps building when you're developing
# for gideon on a debian system.

# it shows how to config and install gideon in /usr/local/kde

# first do
# $ debian/build-gideon config
# and then
# $ debian/build-gideon
# you can then use run or debug targets

default: install

debdir=$(shell pwd)/debian
instdir=$(debdir)/tmp

# configkdevelop=--enable-debug --enable-docbase --enable-kdoc2 \
# --disable-rpath --libdir=$(kde_libdir) --includedir=$(kde_includedir)\
#  --with-qt-includes=/usr/include/qt --mandir=$(mandir) \
#  --with-kdelibsdoc-dir=/usr/share/doc/kdelibs3-doc/html

configkdevelop= --prefix=/usr/local/kde \
 --enable-debug --enable-docbase \
 --disable-rpath --with-qt-includes=/usr/include/qt \
 --with-kdelibsdoc-dir=/usr/share/doc/kdelibs3-doc/html \
 --enable-gideon-qt2 --enable-docbase \
 --enable-javasupport \
 --with-phpdocdir=/usr/share/doc/php4 \
 --with-glibdocdir=/usr/share/doc/glib-reference/html \
 --with-gdkdocdir=/usr/share/doc/gtk-reference/gdk/html \
 --with-gtkdocdir=/usr/share/doc/gtk-reference/gtk/html \
 --with-gnomedocdir=/usr/share/doc/gnome-dev-doc/html

#--libdir=$(kde_libdir) --includedir=$(kde_includedir) --mandir=$(mandir) \
# --enable-scripting --with-pythondocdir=/usr/share/python2.2-doc \

run:
	LD_LIBRARY_PATH=/usr/local/kde/lib /usr/local/kde/bin/gideon

debug:
	LD_LIBRARY_PATH=/usr/local/kde/lib kdbg /usr/local/kde/bin/gideon

config:
	if test ! -f configure; then \
	  $(MAKE) -f admin/Makefile.common ;\
	fi
	./configure $(configkdevelop)

	touch configure-stamp

build:
	$(MAKE)

clean:
	rm -f configure-stamp
	-make distclean

install: build
	make install

.PHONY: build clean install run debug
