dnl    This file is part of the KDE libraries/packages
dnl    Copyright (C) 2001 Stephan Kulow (coolo@kde.org)
 
dnl    This file is free software; you can redistribute it and/or
dnl    modify it under the terms of the GNU Library General Public
dnl    License as published by the Free Software Foundation; either
dnl    version 2 of the License, or (at your option) any later version.
 
dnl    This library is distributed in the hope that it will be useful,
dnl    but WITHOUT ANY WARRANTY; without even the implied warranty of
dnl    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
dnl    Library General Public License for more details.
 
dnl    You should have received a copy of the GNU Library General Public Licensednl    along with this library; see the file COPYING.LIB.  If not, write to
dnl    the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
dnl    Boston, MA 02111-1307, USA.

# Original Author was Kalle@kde.org
# I lifted it in some mater. (Stephan Kulow)
# I used much code from Janos Farkas

dnl Process this file with autoconf to produce a configure script.

AC_INIT(acinclude.m4) dnl a source file from your sub dir

dnl This is so we can use kde-common
AC_CONFIG_AUX_DIR(admin)

dnl This ksh/zsh feature conflicts with `cd blah ; pwd`
unset CDPATH

dnl Checking host/target/build systems, for make, install etc.
AC_CANONICAL_SYSTEM 
dnl Perform program name transformation
AC_ARG_PROGRAM

dnl Automake doc recommends to do this only here. (Janos)
AM_INIT_AUTOMAKE(@MODULENAME@, @VERSION@) dnl searches for some needed programs

KDE_SET_PREFIX

dnl generate the config header
AM_CONFIG_HEADER(config.h) dnl at the distribution this done

dnl Checks for programs.
AC_CHECK_COMPILERS
AC_ENABLE_SHARED(yes)
AC_ENABLE_STATIC(no)
KDE_PROG_LIBTOOL

dnl for NLS support. Call them in this order!
dnl WITH_NLS is for the po files
AM_KDE_WITH_NLS

AC_ARG_ENABLE(
    gideon-qt2,
    [  --enable-gideon-qt2  use qt2 for gideon],
    gideon_use_qt2=$enableval,
    gideon_use_qt2=no
)

if test "x$gideon_use_qt2" = "xno"; then
    KDE_USE_QT(3.0)
else 
    KDE_USE_QT(2.1)
fi

AC_PATH_KDE

AM_INIT_AUTOMAKE(gideon, 0.2)
AM_PROG_LEX
AC_SUBST(LEXLIB)

dnl KDEV_PATH_QTDOC
KDEV_CHECK_DOCBASE
KDEV_CHECK_SCRIPTING
KDEV_CHECK_JAVA
KDEV_PATH_PYTHONDOCDIR
KDEV_PATH_PHPDOCDIR
KDEV_PATH_GNUSTEPDOCDIR
KDEV_PATH_GTKDOCDIR
KDEV_PATH_KDELIBSDOC

AC_PATH_PROG(DOT_FOUND, dot, no)
AC_CHECK_PROG(gmake_prog, gmake, gmake, make)
AC_DEFINE_UNQUOTED(MAKE_COMMAND, "$gmake_prog", [GNU make command])

if test "$kde_qtver" = "3"; then
    LIBQT3STUFF=""
    QT3STUFFINCLUDES=""
    QT3STUFFSUBDIR=""
else
    LIBQT3STUFF="\$(top_builddir)/lib/qt3stuff/libqt3widgets.la"
    QT3STUFFINCLUDES="-I\$(top_srcdir)/lib/qt3stuff"
    QT3STUFFSUBDIR="qt3stuff"
fi

AC_SUBST(LIBQT3STUFF)
AC_SUBST(QT3STUFFINCLUDES)
AC_SUBST(QT3STUFFSUBDIR)

