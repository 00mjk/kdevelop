<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>KDevelop. Руководство программиста: Стандарт файловой системы KDE</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="">
<META NAME="description" CONTENT="">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="logotp3.png" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-14.html">Next</A>
 <A HREF="index-12.html">Previous</A>
 <A HREF="index.html#toc13">Table of Contents</A>
</P>
<H3><A NAME="s13">13. Стандарт файловой системы KDE</A></H3>

<P>Эта глава - копия стандарта файловой системы KDE, опубликованного на web-сайте KDE 
<A HREF="http://www.kde.org">http://www.kde.org</A>. Стандарт написан
Richard Moore 
<A HREF="rich@kde.org">rich@kde.org</A><P><B>Стандарт файловой системы KDE</B>
<P>Этот документ определяет структуру каталогов, которую должны использовать все программы KDE. Это версия 0.0.4 стандарта.
<P>
<H3><A NAME="ss13.1">13.1 Введение</A>
</H3>

<P>Цель KDE FSSTD - создать уверенность, что все ресурсы (иконки, mime-типы и т.п.), необходимые приложению KDE, расположены
в соответствующих директориях. Следование этой структуре позволит приложениям использовать такие инструменты, как класс KIconLoader, и
реализует отделение платформеннозависимых данных, необходимых KDE, от платформеннонезависимых данных (сделав возможной инсталляцию для различных
архитектур). В этом документе имена каталогов оканчиваются '/'. Когда употребляется слово 'appname', взятое в угловые скобки
&lt;вот так&gt;, то это значит, что на его месте могут быть входы, соответствующие любому установленному приложению KDE.
Слово 'lang' используется аналогично, чтобы показать, что здесь должны быть входы для всех поддерживаемых языков, состоящие из двух букв,
например, 'fr' для французского, 'ru' для русского.
<P>
<H3><A NAME="ss13.2">13.2 Структура каталогов</A>
</H3>

<P>Структура каталогов KDE показана ниже, корневой каталог инсталляции KDE обычно '/opt/kde', и может быть получен в процессе выполнения
вызовом метода kdedir() класса KApplication (это заменяет переменную окружения KDEDIR, которую постепенно перестают использовать).
В данном документе этот каталог обозначается kdedir().
<!--
KDE File System
-->
<!--
.kdelnk files
-->
<P>
<UL>
<LI>kdedir()/
<UL>
<LI>bin/
<UL>
<LI>Бинарные файлы приложений</LI>
</UL>
</LI>
<LI>lib/
<UL>
<LI>стандартные библиотеки KDE (libkdecore, например)</LI>
<LI><EM>&lt;appname&gt;</EM>/
<UL>
<LI>Платформеннозависимые данные приложения</LI>
</UL>
</LI>
</UL>
</LI>
<LI>include/
<UL>
<LI>Стандартные файлы заголовков KDE</LI>
</UL>
</LI>
<LI>parts/</LI>
<LI>cgi-bin/
<UL>
<LI>CGI программы для kdehelp</LI>
</UL>
</LI>
<LI>share/
<UL>
<LI>doc/
<UL>
<LI>HTML/
<UL>
<LI>default --> ссылка на kdedir()/share/doc/HTML/en</LI>
<LI><EM>&lt;lang&gt;</EM>/
<UL>
<LI><EM>&lt;appname&gt;</EM>/
<UL>
<LI>index.html</LI>
<LI>Другие файлы помощи</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
</LI>
<LI>config/</LI>
<LI>applnk/
<UL>
<LI>System/</LI>
<LI>Utilities/</LI>
<LI>Applications/</LI>
<LI>Games/</LI>
<LI>kfind.kdelnk</LI>
<LI>khelp.kdelnk</LI>
<LI>khome.kdelnk</LI>
<LI>krefresh.kdelnk</LI>
</UL>
</LI>
<LI>mimelnk/
<UL>
<LI>magic</LI>
<LI>text/</LI>
<LI>audio/</LI>
</UL>
</LI>
<LI>partlnk/
<UL>
<LI><EM>&lt;partname&gt;</EM>.kdelnk</LI>
</UL>
</LI>
<LI>icons/
<UL>
<LI>Иконки, используемые в kdelnk файлах</LI>
<LI><EM>&lt;appname&gt;</EM>.xpm</LI>
<LI>mini/
<UL>
<LI>Мини-иконки для kpanel</LI>
</UL>
</LI>
</UL>
</LI>
<LI>toolbar/
<UL>
<LI>Стандартные иконки панели инструментов (например, fileopen.xpm)</LI>
</UL>
</LI>
<LI>wallpapers/
<UL>
<LI>Обои, используемые kdisplay</LI>
</UL>
</LI>
<LI>apps/
<UL>
<LI><EM>&lt;appname&gt;</EM>/
<UL>
<LI>toolbar/
<UL>
<LI>Иконки панели инструментов</LI>
</UL>
</LI>
<LI>pics/
<UL>
<LI>Другие рисунки приложения</LI>
</UL>
</LI>
<LI>Платформеннонезависимые данные приложения</LI>
</UL>
                                </LI>
<LI><EM>&lt;libname&gt;</EM>/
<UL>
<LI>pics/</LI>
</UL>
</LI>
</UL>
</LI>
<LI>locale/
<UL>
<LI><EM>&lt;lang&gt;</EM>/
<UL>
<LI>LC_MESSAGES/
<UL>
<LI><EM>&lt;appname&gt;</EM>.mo</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
</LI>
</UL>
<P>
<H3><A NAME="ss13.3">13.3 Что это значит для разработчика?</A>
</H3>

<P>Стандартное приложение KDE инсталлирует файлы в различные места вышеприведенной структуры. Безусловно необходимые файлы - исполнимые файлы приложения,
файл kdelnk, иконка приложения и файлы помощи - все остальные не обязательны. Файлы инсталлируются в следующие каталоги:
<P>
<BLOCKQUOTE><CODE>
<PRE>
Тип файла                                         Расположение

Бинарные файлы приложения (необходимо             kdedir()/bin/
Файл kdelnk приложения (необходимо)               kdedir()/share/applnk/
Иконка приложения (необходимо)                    kdedir()/share/icons/&lt;appname&gt;.xpm
Файлы помощи приложения (необходимо)              kdedir()/share/doc/default/HTML/&lt;appname&gt;/&lt;index&gt;.html
Иконки панели инструментов приложения             kdedir()/share/apps/&lt;appname&gt;/toolbar/
Платформеннонезависимые данные приложения         kdedir()/share/apps/&lt;appname&gt;/
Платформеннозависимые данные приложения           kdedir()/lib/&lt;appname&gt;/
</PRE>
</CODE></BLOCKQUOTE>

<!--
KDE File System
-->
<P>
<H3><A NAME="ss13.4">13.4 Документация приложения</A>
</H3>

<P>Я советую поместить хотя бы одну страницу в
<P>kdedir()/doc/default/HTML/&lt;appname&gt;/&lt;appname&gt;.html
<P>для соответствия стандартам KDE. Приложение может использовать каталог для хранения в нем любых необходимых файлов помощи. 
<P>Приложения, поддерживающие несколько языков, должны поместить файлы на этих языках в 
kdedir()/doc/&lt;lang&gt;/HTML/&lt;appname&gt;/&lt;appname&gt;.html,
создавая один 'lang' каталог для каждого языка, используя его двухбуквенный код, как обычно. Такое расположение файлов позволит создать ссылки
между файлами помощи двух различных приложений, поддерживающих данный язык. 
<P>Я не совсем удовлетворен предлагаемым решением, поскольку оно не позволяет вернуться к языку по умолчанию, если требуемый перевод отсутствует.
<P>
<H3><A NAME="ss13.5">13.5 Что это значит для разработчиков библиотек?</A>
</H3>

<P>
<P>
<UL>
<LI>kdedir()/share/apps/&lt;libname&gt;/toolbar</LI>
</UL>

Иконки панели инструментов для элементов библиотеки.
<P>
<UL>
<LI>kdedir()/share/apps/&lt;libname&gt;/pics</LI>
</UL>

Другие картинки (bitmaps) для элементов библиотеки.
<P>
<P ALIGN="RIGHT">

<A HREF="index-14.html">Next</A>
 <A HREF="index-12.html">Previous</A>
 <A HREF="index.html#toc13">Table of Contents</A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
