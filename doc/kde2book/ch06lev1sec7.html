<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Executing Other Programs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"/><LINK
REL="HOME"
TITLE="KDE 2.0 Development"
HREF="index.html"/><LINK
REL="UP"
TITLE="KDE Style Reference"
HREF="ch06.html"/><LINK
REL="PREVIOUS"
TITLE="User Notifications"
HREF="ch06lev1sec6.html"/><LINK
REL="NEXT"
TITLE="Network Transparency"
HREF="ch06lev1sec8.html"/><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"/><LINK
REL="stylesheet"
HREF="kde-common.css"
TYPE="text/css"/><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=iso-8859-1"/><META
HTTP-EQUIV="Content-Language"
CONTENT="en"/><LINK
REL="stylesheet"
HREF="kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"/><LINK
REL="stylesheet"
HREF="kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"/></HEAD
><BODY
CLASS="section"
LINK="#336699"
VLINK="#336699"
ALINK="#336699"
BGCOLOR="#FFFFFF"
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="ch06lev1sec6.html"
>Prev</A
> <A
HREF="ch06lev1sec8.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><DIV
CLASS="section"
><TABLE
WIDTH="100%"
CELLPADDING="0"
CELLSPACING="0"
BORDER="0"
ALIGN="CENTER"
><TR
><TD
WIDTH="90%"
><H1
CLASS="section"
><A
NAME="ch06lev1sec7"
>6.7. Executing Other Programs</A
></H1
><P
>KDE has the <TT
CLASS="literal"
>KRun</TT
> class, a member of the KIO library. It is able to run executables and .desktop files (as produced by KDE).</P
><P
>The most useful members of this class are the static <TT
CLASS="literal"
>run()</TT
> functions, shown in <A
HREF="ch06lev1sec7.html#ch06list05"
>Listing 6.5</A
>:</P
><DIV
CLASS="example"
><HR/><A
NAME="ch06list05"
></A
><P
><B
>Example 6.5. Static <TT
CLASS="literal"
>run</TT
> Functions</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1: #include &lt;krun.h&gt;
   3&nbsp; 2:
   4&nbsp; 3: bool run(const KService&amp;_service,
   5&nbsp; 4:          const KURL::List&amp;_urls)
   6&nbsp; 5: bool run(const QString&amp;_exec,
   7&nbsp; 6:          const KURL::List&amp;_urls,
   8&nbsp; 7:          const QString&amp;_name = QString::null,
   9&nbsp; 8:          const QString&amp;_icon = QString::null,
  10&nbsp; 9:          const QString&amp;_mini_icon = QString::null,
  11&nbsp;10:          const QString&amp;_desktop_file = QString::null)
  12&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
><P
>The first of these two static <TT
CLASS="literal"
>run</TT
> functions allows you to execute services. Those that are available are in your $KDEDIR/share/services. To execute Konqueror, you can use <TT
CLASS="literal"
>KRun::run(KService(locate</TT
>(<TT
CLASS="literal"
>"services"</TT
>, <TT
CLASS="literal"
>"konqueror.desktop"</TT
><TT
CLASS="literal"
>)), QStringList());</TT
>.</P
><P
>This method is, in fact, preferable to just executing Konqueror and hoping that it will work. By filling the <TT
CLASS="literal"
>QStringList</TT
> at the end, you can send arguments to Konqueror.</P
><P
>The second static method can be used to execute a program, like so:</P
><DIV
CLASS="informalexample"
><HR/><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp;KRun::run("netscape", QStringList("http://www.kde.org"),
   3&nbsp;"Netscape", locate("icon", "locolor/32x32/apps/netscape.png"));
   4&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
><P
>It is still, of course, preferable to visit <A
HREF="http://www.KDE.org"
TARGET="_top"
>http://www.KDE.org</A
> with Konqueror.</P
><P
>You can also open files with <TT
CLASS="literal"
>KRun</TT
>. In the next example (see <A
HREF="ch06lev1sec7.html#ch06list06"
>Listings 6.6</A
> and <A
HREF="ch06lev1sec7.html#ch06list07"
>6.7</A
>), when the libraries are ready for their next command, the Open File button becomes re-enabled.</P
><DIV
CLASS="example"
><HR/><A
NAME="ch06list06"
></A
><P
><B
>Example 6.6. <TT
CLASS="literal"
>runwalk.h</TT
>: Open a File (Header)</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1:
   3&nbsp; 2: #ifndef _RUNWALK_H
   4&nbsp; 3: #define _RUNWALK_H
   5&nbsp; 4:
   6&nbsp; 5: #include &lt;krun.h&gt;
   7&nbsp; 6: #include &lt;qpushbutton.h&gt;
   8&nbsp; 7: #include &lt;klineedit.h&gt;
   9&nbsp; 8: Style Reference
  10&nbsp; 9: class RunWalk : public QWidget
  11&nbsp;10: {
  12&nbsp;11:  Q_OBJECT
  13&nbsp;12:  public:
  14&nbsp;13:   RunWalk();
  15&nbsp;14:  public slots:
  16&nbsp;15:   void slotDoneExec();
  17&nbsp;16:   void slotRun();
  18&nbsp;17:  private:
  19&nbsp;18:   QPushButton *pushme;
  20&nbsp;19:   KLineEdit *program;
  21&nbsp;20: };
  22&nbsp;21:
  23&nbsp;22: #endif
  24&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
><DIV
CLASS="example"
><HR/><A
NAME="ch06list07"
></A
><P
><B
>Example 6.7. <TT
CLASS="literal"
>runwalk.cpp</TT
>: Open a File (Source).XXX</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1: #include &lt;qlayout.h&gt;
   3&nbsp; 2: #include "runwalk.h"
   4&nbsp; 3: #include &lt;klocale.h&gt;
   5&nbsp; 4:
   6&nbsp; 5: RunWalk::RunWalk()
   7&nbsp; 6: {
   8&nbsp; 7:   QVBoxLayout *layout=new QVBoxLayout(this,0,2);
   9&nbsp; 8:   layout-&gt;setAutoAdd(true);
  10&nbsp; 9:   program=new KLineEdit("http://www.kde.org/",this);
  11&nbsp;10:   pushme=new QPushButton(i18n("Open File"),this);
  12&nbsp;11:   show();
  13&nbsp;12:
  14&nbsp;13:   connect(pushme, SIGNAL(clicked()), SLOT(slotRun()));
  15&nbsp;14: }
  16&nbsp;15:
  17&nbsp;16: void RunWalk::slotDoneExec()
  18&nbsp;17: {
  19&nbsp;18:   pushme-&gt;setEnabled(true);
  20&nbsp;19:   program-&gt;setEnabled(true);
  21&nbsp;20: }
  22&nbsp;21:
  23&nbsp;22: void RunWalk::slotRun()
  24&nbsp;23: {
  25&nbsp;24:   KRun *run=new KRun(KURL(program-&gt;text()));
  26&nbsp;25:   connect(run, SIGNAL(finished()), SLOT(slotDoneExec()));
  27&nbsp;26:   connect(run, SIGNAL(error()), SLOT(slotDoneExec()));
  28&nbsp;27:   pushme-&gt;setEnabled(false);
  29&nbsp;28:   program-&gt;setEnabled(false);
  30&nbsp;29: }
  31&nbsp;30:
  32&nbsp;31: int main(int argc, char **argv)
  33&nbsp;32: {
  34&nbsp;33:   KApplication app(argc, argv, "runwalk", true);
  35&nbsp;34:   RunWalk runwalk;
  36&nbsp;35:
  37&nbsp;36:   app.setMainWidget(&amp;runwalk);
  38&nbsp;37:   return app.exec();
  39&nbsp;38: }
  40&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
></TD
><TD
WIDTH="10%"
VALIGN="BOTTOM"
ALIGN="CENTER"
><ANNMARK
NAME="ch06lev1sec7"/></TD
></TR
><ANNOTATION
NAME="ch06lev1sec7"
TITLE="Executing Other Programs"/></TABLE
></DIV
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="ch06lev1sec6.html"
>Prev</A
> <A
HREF="ch06lev1sec8.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><HR
WIDTH="100%"
SIZE="2"
ALIGN="CENTER"
NOSHADE="NOSHADE"/></BODY
></HTML
>