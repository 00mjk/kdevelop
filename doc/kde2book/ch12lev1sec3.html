<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Describing User Interface in XML</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"/><LINK
REL="HOME"
TITLE="KDE 2.0 Development"
HREF="index.html"/><LINK
REL="UP"
TITLE="Creating and Using Components (KParts)"
HREF="ch12.html"/><LINK
REL="PREVIOUS"
TITLE="The KDE Component Framework"
HREF="ch12lev1sec2.html"/><LINK
REL="NEXT"
TITLE="Read-Only and Read/Write Parts"
HREF="ch12lev1sec4.html"/><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"/><LINK
REL="stylesheet"
HREF="kde-common.css"
TYPE="text/css"/><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=iso-8859-1"/><META
HTTP-EQUIV="Content-Language"
CONTENT="en"/><LINK
REL="stylesheet"
HREF="kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"/><LINK
REL="stylesheet"
HREF="kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"/></HEAD
><BODY
CLASS="section"
LINK="#336699"
VLINK="#336699"
ALINK="#336699"
BGCOLOR="#FFFFFF"
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="ch12lev1sec2.html"
>Prev</A
> <A
HREF="ch12lev1sec4.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><DIV
CLASS="section"
><TABLE
WIDTH="100%"
CELLPADDING="0"
CELLSPACING="0"
BORDER="0"
ALIGN="CENTER"
><TR
><TD
WIDTH="90%"
><H1
CLASS="section"
><A
NAME="ch12lev1sec3"
>12.3. Describing User Interface in XML</A
></H1
><P
>The 
			
			XML file used by a part or a mainwindow provides only the layout of the actions in the user interface. The actions themselves are still implemented in the code, with slots, as usual.</P
><P
>More precisely, the XML file describes the layout of the menus and submenus in the menubar (only one menubar is always present) and the menu items within those menus, as well as the toolbars and the toolbar buttons. The menubar, menus, and toolbars are containers; menu items and toolbar buttons are the actions.</P
><P
>A sample XML file for a mainwindow looks like the one shown in <A
HREF="ch12lev1sec3.html#ch12list01"
>Listing 12.1</A
>.
			
			
		</P
><DIV
CLASS="example"
><HR/><A
NAME="ch12list01"
></A
><P
><B
>Example 12.1. Excerpt of konqueror.rc: A User Interface Described in XML</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp;&lt;!DOCTYPE kpartgui SYSTEM "kpartgui.dtd"&gt;
   3&nbsp;&lt;kpartgui name="Konqueror" version="1"&gt;
   4&nbsp;  &lt;MenuBar&gt;
   5&nbsp;   &lt;Menu name="file"&gt;&lt;Text&gt;&amp;amp;File&lt;/Text&gt;
   6&nbsp;    &lt;Action name="find"/&gt;
   7&nbsp;    &lt;Separator/&gt;
   8&nbsp;    &lt;Action name="print"/&gt;
   9&nbsp;    &lt;Separator/&gt;
  10&nbsp;    &lt;Action name="close"/&gt;
  11&nbsp;   &lt;/Menu&gt;
  12&nbsp;   &lt;Menu name="edit"&gt;&lt;Text&gt;&amp;amp;Edit&lt;/Text&gt;
  13&nbsp;    &lt;Action name="cut"/&gt;
  14&nbsp;    &lt;Action name="copy"/&gt;
  15&nbsp;    &lt;Action name="paste"/&gt;
  16&nbsp;    &lt;Action name="trash"/&gt;
  17&nbsp;    &lt;Action name="del"/&gt;
  18&nbsp;    &lt;Separator/&gt;
  19&nbsp;    &lt;Merge/&gt;
  20&nbsp;    &lt;Separator/&gt;
  21&nbsp;   &lt;/Menu&gt;
  22&nbsp;   &lt;Merge/&gt;
  23&nbsp;  &lt;/MenuBar&gt;
  24&nbsp;  &lt;ToolBar fullWidth="true" name="mainToolBar"&gt;&lt;Text&gt;Main&lt;/Text&gt;
  25&nbsp;   &lt;Action name="cut"/&gt;
  26&nbsp;   &lt;Action name="copy"/&gt;
  27&nbsp;   &lt;Action name="paste"/&gt;
  28&nbsp;   &lt;Action name="print"/&gt;
  29&nbsp;   &lt;Separator/&gt;
  30&nbsp;   &lt;Merge/&gt;
  31&nbsp;   &lt;Separator/&gt;
  32&nbsp;   &lt;Action name="animated_logo"/&gt;
  33&nbsp;  &lt;/ToolBar&gt;
  34&nbsp;  &lt;ToolBar name="locationToolBar"&gt;&lt;Text&gt;Location&lt;/Text&gt;
  35&nbsp;   &lt;Action name="toolbar_url_combo"/&gt;
  36&nbsp;  &lt;/ToolBar&gt;
  37&nbsp;&lt;/kpartgui&gt;
  38&nbsp;				
  39&nbsp;				
  40&nbsp;			</PRE
></TD
></TR
></TABLE
><HR/></DIV
><P
>The <TT
CLASS="literal"
>DOCTYPE</TT
>
			
			
			tag contains the name of the main element, which should be set to <TT
CLASS="literal"
>kpartgui</TT
>. The top-level elements are <TT
CLASS="literal"
>MenuBar</TT
> and <TT
CLASS="literal"
>ToolBar</TT
>, as expected. In the <TT
CLASS="literal"
>MenuBar</TT
>, the menus are described. Note that they have a name, used for merging later on, and a text, which is displayed in the user interface, possibly translated. Because this is XML, <TT
CLASS="literal"
>&amp;</TT
> has to be encoded as <TT
CLASS="literal"
>&amp;amp;</TT
>. Inside a <TT
CLASS="literal"
>Menu</TT
> tag, the actions, some separators, and possibly submenus are laid out. The action names are very important because they are used to match the actions created in the code.
			
			
		</P
><P
>The toolbars are then described. Note that the main toolbar has to be called mainToolBar because its settings can be different. KToolBar takes care of adding text under icons for this particular toolbar, if the user wants them. Actions are laid out in the toolbars the usual way. The text for a toolbar is used where the name of the toolbar is to be displayed to the user, possibly translated, such as the toolbar editor.</P
><P
>Another important tag is the 
			
			
			<TT
CLASS="literal"
>Merge</TT
> tag. This tag tells the framework where the actions of the active part&#8212;and the plug-ins&#8212;should be merged in a given container. As you can see, this XML file inserts the part's actions before a separator in the Edit menu, whereas it doesn't specify a position for items in the File menu. This means that if the part defines actions for the File menu, they will be appended to the File menu of the mainwindow.
			
			
		</P
><P
>The merging happens when a part simply uses the same menu name or toolbar name as the mainwindow.</P
><P
>If a <TT
CLASS="literal"
>Merge</TT
> tag is specified as a child of the <TT
CLASS="literal"
>MenuBar</TT
> tag, the merging happens at that position; otherwise, it takes place on the right of the existing menus. The toolbar allows merging of the part's actions as well, based on the same principle.</P
><P
>The <TT
CLASS="literal"
>Merge</TT
> tag can also appear in a part's XML. It will be used for merging plug-ins or for more advanced uses; the merging engine can merge any number of <SPAN
CLASS="QUOTE"
>"inputs"</SPAN
> and it is possible to define specific inputs, such as the one Konqueror defines for its View menu.</P
><P
>Another advanced use of the <TT
CLASS="literal"
>Merge</TT
> tag is to set a name attribute for it. For instance, if another XML file wants to embed a part and any other parts or plug-ins at different positions in a given menu, it can use two merge tags:
			
			
		</P
><DIV
CLASS="informalexample"
><HR/><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp;&lt;Merge name="MyPart"/&gt;
   3&nbsp;.
   4&nbsp;.
   5&nbsp;.
   6&nbsp;&lt;Merge /&gt;
   7&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
><P
>Using the name attribute for the <TT
CLASS="literal"
>Merge</TT
> tag allows you to control at which position each XML fragment is merged, but it is usually unnecessary.
			
			
		</P
></TD
><TD
WIDTH="10%"
VALIGN="BOTTOM"
ALIGN="CENTER"
><ANNMARK
NAME="ch12lev1sec3"/></TD
></TR
><ANNOTATION
NAME="ch12lev1sec3"
TITLE="Describing User Interface in XML"/></TABLE
></DIV
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="ch12lev1sec2.html"
>Prev</A
> <A
HREF="ch12lev1sec4.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><HR
WIDTH="100%"
SIZE="2"
ALIGN="CENTER"
NOSHADE="NOSHADE"/></BODY
></HTML
>