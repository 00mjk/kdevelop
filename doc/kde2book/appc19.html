<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Chapter 11</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"/><LINK
REL="HOME"
TITLE="KDE 2.0 Development"
HREF="index.html"/><LINK
REL="UP"
TITLE="Answers"
HREF="ap-c.html"/><LINK
REL="PREVIOUS"
TITLE="Chapter 10"
HREF="appc17.html"/><LINK
REL="NEXT"
TITLE="Chapter 12"
HREF="appc21.html"/><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"/><LINK
REL="stylesheet"
HREF="kde-common.css"
TYPE="text/css"/><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=iso-8859-1"/><META
HTTP-EQUIV="Content-Language"
CONTENT="en"/><LINK
REL="stylesheet"
HREF="kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"/><LINK
REL="stylesheet"
HREF="kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"/></HEAD
><BODY
CLASS="section"
LINK="#336699"
VLINK="#336699"
ALINK="#336699"
BGCOLOR="#FFFFFF"
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="appc17.html"
>Prev</A
> <A
HREF="appc21.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><DIV
CLASS="section"
><TABLE
WIDTH="100%"
CELLPADDING="0"
CELLSPACING="0"
BORDER="0"
ALIGN="CENTER"
><TR
><TD
WIDTH="90%"
><H1
CLASS="section"
><A
NAME="appC19"
>C.11. <A
HREF="ch11.html"
>Chapter 11</A
></A
></H1
><P
></P
><DIV
CLASS="section"
><TABLE
WIDTH="100%"
CELLPADDING="0"
CELLSPACING="0"
BORDER="0"
ALIGN="CENTER"
><TR
><TD
WIDTH="90%"
><H2
CLASS="section"
><A
NAME="appC20"
>C.11.1. Exercises</A
></H2
><DIV
CLASS="qandaset"
><DL
><DT
>C.11.1.1. <A
HREF="appc19.html#AEN28299"
>Suppose you would like to have only one instance of your panel applet running at a time. (Who would want, for example, two pagers in their panel?) Combine <TT
CLASS="literal"
>KWeather</TT
> and <TT
CLASS="literal"
>KUnique</TT
> into one application that runs only once and displays a <SPAN
CLASS="QUOTE"
>"sorry"</SPAN
> message if the user tries to start it a second time. See Listings C.35&#8211;C.37 for the answers.</A
></DT
></DL
><DIV
CLASS="qandaentry"
><DIV
CLASS="question"
><P
><A
NAME="AEN28299"
></A
><B
>C.11.1.1. </B
>Suppose you would like to have only one instance of your panel applet running at a time. (Who would want, for example, two pagers in their panel?) Combine <TT
CLASS="literal"
>KWeather</TT
> and <TT
CLASS="literal"
>KUnique</TT
> into one application that runs only once and displays a <SPAN
CLASS="QUOTE"
>"sorry"</SPAN
> message if the user tries to start it a second time. See Listings C.35&#8211;C.37 for the answers.</P
></DIV
><DIV
CLASS="answer"
><P
><B
> </B
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1: #ifndef __KUNIQUEWEATHER_H__
   3&nbsp; 2: #define __KUNIQUEWEATHER_H__
   4&nbsp; 3:
   5&nbsp; 4: #include &lt;kuniqueapp.h&gt;
   6&nbsp; 5: #include &lt;kpanelapplet.h&gt;
   7&nbsp; 6:
   8&nbsp; 7: class KUniqueWeather : public KUniqueApplication, KPanelApplet
   9&nbsp; 8: {
  10&nbsp; 9:  public:
  11&nbsp;10:   KUniqueWeather (int&amp; argc, char** argv,
  12&nbsp;11:              const QCString&amp; rAppName = 0, QWidget *parent=0);
  13&nbsp;12:
  14&nbsp;13: protected:
  15&nbsp;14:   void preferences();
  16&nbsp;15:
  17&nbsp;16: };
  18&nbsp;17:
  19&nbsp;18: #endif
  20&nbsp;</PRE
></TD
></TR
></TABLE
></P
><DIV
CLASS="example"
><HR/><A
NAME="ap-clist36"
></A
><P
><B
>Example C.36. kuniqueweather.cpp: Class Definition for <TT
CLASS="literal"
>KUniqueWeather</TT
>, a Single-Instance Panel Applet</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1: #include &lt;stdio.h&gt;
   3&nbsp; 2:
   4&nbsp; 3: #include &lt;qlabel.h&gt;
   5&nbsp; 4:
   6&nbsp; 5: #include "kuniqueweather.h"
   7&nbsp; 6:
   8&nbsp; 7: KUniqueWeather::KUniqueWeather (int&amp; argc, char** argv,
   9&nbsp; 8:              const QCString&amp; rAppName, QWidget *parent) :
  10&nbsp; 9:   KUniqueApplication (argc, argv, rAppName),
  11&nbsp;10:   KPanelApplet (parent)
  12&nbsp;11: {
  13&nbsp;12:   QLabel *qlabel = new QLabel ("Rainy\n  48F", this);
  14&nbsp;13:   qlabel-&gt;setAlignment (Qt::AlignVCenter);
  15&nbsp;14:   setMinimumSize (qlabel-&gt;sizeHint());
  16&nbsp;15:
  17&nbsp;16:   setActions (Preferences);
  18&nbsp;17:
  19&nbsp;18:   dock("kweather");
  20&nbsp;19: }
  21&nbsp;20:
  22&nbsp;21: void
  23&nbsp;22: KUniqueWeather::preferences()
  24&nbsp;23: {
  25&nbsp;24:   printf ("Here we let the user configure the panel applet.\n");
  26&nbsp;25: }
  27&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
><DIV
CLASS="example"
><HR/><A
NAME="ap-clist37"
></A
><P
><B
>Example C.37. main.cpp: The <TT
CLASS="literal"
>main()</TT
> Function Used to Start <TT
CLASS="literal"
>KUniqueWeather</TT
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>   1&nbsp;
   2&nbsp; 1: #include &lt;kapp.h&gt;
   3&nbsp; 2: #include &lt;kmessagebox.h&gt;
   4&nbsp; 3:
   5&nbsp; 4: #include "kuniqueweather.h"
   6&nbsp; 5:
   7&nbsp; 6: int
   8&nbsp; 7: main (int argc, char *argv[])
   9&nbsp; 8: {
  10&nbsp; 9:   if (!KUniqueWeather::start(argc, argv, "kuniqueweather"))
  11&nbsp;10:     {
  12&nbsp;11:       KApplication a (argc, argv, "kuniqueweather");
  13&nbsp;12:       KMessageBox::sorry (0, "Cannot start more that one instance of "
  14&nbsp;13:                      "KUniqueWeather.");
  15&nbsp;14:       exit (0);
  16&nbsp;15:     }
  17&nbsp;16:
  18&nbsp;17:
  19&nbsp;18:   KUniqueWeather kuniqueweather (argc, argv, "kuniqueweather");
  20&nbsp;19:
  21&nbsp;20:   return  kuniqueweather.exec();
  22&nbsp;21: }
  23&nbsp;</PRE
></TD
></TR
></TABLE
><HR/></DIV
></DIV
></DIV
></DIV
></TD
><TD
WIDTH="10%"
VALIGN="BOTTOM"
ALIGN="CENTER"
><ANNMARK
NAME="appC20"/></TD
></TR
><ANNOTATION
NAME="appC20"
TITLE="Exercises"/></TABLE
></DIV
></TD
><TD
WIDTH="10%"
VALIGN="BOTTOM"
ALIGN="CENTER"
><ANNMARK
NAME="appC19"/></TD
></TR
><ANNOTATION
NAME="appC19"
TITLE="Chapter 11"/></TABLE
></DIV
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="appc17.html"
>Prev</A
> <A
HREF="appc21.html"
>Next</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><HR
WIDTH="100%"
SIZE="2"
ALIGN="CENTER"
NOSHADE="NOSHADE"/></BODY
></HTML
>