<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Opening a Directory</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_247.html">previous</A>, <A HREF="libc_249.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC255" HREF="libc_toc.html#TOC255">Opening a Directory Stream</A></H3>

<P>
<A NAME="IDX1182"></A>
This section describes how to open a directory stream.  All the symbols
are declared in the header file <TT>`dirent.h'</TT>.

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>DIR</B>
<DD><A NAME="IDX1183"></A>
The <CODE>DIR</CODE> data type represents a directory stream.
</DL>

</P>
<P>
You shouldn't ever allocate objects of the <CODE>struct dirent</CODE> or
<CODE>DIR</CODE> data types, since the directory access functions do that for
you.  Instead, you refer to these objects using the pointers returned by
the following functions.

</P>
<P>
<DL>
<DT><U>Function:</U> DIR * <B>opendir</B> <I>(const char *<VAR>dirname</VAR>)</I>
<DD><A NAME="IDX1184"></A>
The <CODE>opendir</CODE> function opens and returns a directory stream for
reading the directory whose file name is <VAR>dirname</VAR>.  The stream has
type <CODE>DIR *</CODE>.

</P>
<P>
If unsuccessful, <CODE>opendir</CODE> returns a null pointer.  In addition to
the usual file name errors (see section <A HREF="libc_153.html#SEC160">File Name Errors</A>), the
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EACCES</CODE>
<DD>
Read permission is denied for the directory named by <CODE>dirname</CODE>.

<DT><CODE>EMFILE</CODE>
<DD>
The process has too many files open.

<DT><CODE>ENFILE</CODE>
<DD>
The entire system, or perhaps the file system which contains the
directory, cannot support any additional open files at the moment.
(This problem cannot happen on the GNU system.)
</DL>

<P>
The <CODE>DIR</CODE> type is typically implemented using a file descriptor,
and the <CODE>opendir</CODE> function in terms of the <CODE>open</CODE> function.
See section <A HREF="libc_213.html#SEC220">Low-Level Input/Output</A>.  Directory streams and the underlying
file descriptors are closed on <CODE>exec</CODE> (see section <A HREF="libc_517.html#SEC525">Executing a File</A>).
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_247.html">previous</A>, <A HREF="libc_249.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
