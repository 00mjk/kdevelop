<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Environment Access</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_503.html">previous</A>, <A HREF="libc_505.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC512" HREF="libc_toc.html#TOC512">Environment Access</A></H3>
<P>
<A NAME="IDX2709"></A>
<A NAME="IDX2710"></A>

</P>
<P>
The value of an environment variable can be accessed with the
<CODE>getenv</CODE> function.  This is declared in the header file
<TT>`stdlib.h'</TT>.  All of the following functions can be safely used in
multi-threaded programs.  It is made sure that concurrent modifications
to the environment do not lead to errors.
<A NAME="IDX2711"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> char * <B>getenv</B> <I>(const char *<VAR>name</VAR>)</I>
<DD><A NAME="IDX2712"></A>
This function returns a string that is the value of the environment
variable <VAR>name</VAR>.  You must not modify this string.  In some non-Unix
systems not using the GNU library, it might be overwritten by subsequent
calls to <CODE>getenv</CODE> (but not by any other library function).  If the
environment variable <VAR>name</VAR> is not defined, the value is a null
pointer.
</DL>

</P>

<P>
<DL>
<DT><U>Function:</U> int <B>putenv</B> <I>(const char *<VAR>string</VAR>)</I>
<DD><A NAME="IDX2713"></A>
The <CODE>putenv</CODE> function adds or removes definitions from the environment.
If the <VAR>string</VAR> is of the form <SAMP>`<VAR>name</VAR>=<VAR>value</VAR>'</SAMP>, the
definition is added to the environment.  Otherwise, the <VAR>string</VAR> is
interpreted as the name of an environment variable, and any definition
for this variable in the environment is removed.

</P>
<P>
This function is part of the extended Unix interface.  Since it was also
available in old SVID libraries you should define either
<VAR>_XOPEN_SOURCE</VAR> or <VAR>_SVID_SOURCE</VAR> before including any header.
</DL>

</P>

<P>
<DL>
<DT><U>Function:</U> int <B>setenv</B> <I>(const char *<VAR>name</VAR>, const char *<VAR>value</VAR>, int <VAR>replace</VAR>)</I>
<DD><A NAME="IDX2714"></A>
The <CODE>setenv</CODE> function can be used to add a new definition to the
environment.  The entry with the name <VAR>name</VAR> is replaced by the
value <SAMP>`<VAR>name</VAR>=<VAR>value</VAR>'</SAMP>.  Please note that this is also true
if <VAR>value</VAR> is the empty string.  A null pointer for the <VAR>value</VAR>
parameter is illegal.  If the environment already contains an entry with
key <VAR>name</VAR> the <VAR>replace</VAR> parameter controls the action.  If
replace is zero, nothing happens.  otherwise the old entry is replaced
by the new one.

</P>
<P>
Please note that you cannot remove an entry completely using this function.

</P>
<P>
This function is part of the BSD library.  The GNU C Library provides
this function for compatibility but it may not be available on other
systems.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>unsetenv</B> <I>(const char *<VAR>name</VAR>)</I>
<DD><A NAME="IDX2715"></A>
Using this function one can remove an entry completely from the
environment.  If the environment contains an entry with the key
<VAR>name</VAR> this whole entry is removed.  A call to this function is
equivalent to a call to <CODE>putenv</CODE> when the <VAR>value</VAR> part of the
string is empty.

</P>
<P>
This function is part of the BSD library.  The GNU C Library provides
this function for compatibility but it may not be available on other
systems.
</DL>

</P>
<P>
There is one more function to modify the whole environment.  This
function is said to be used in the POSIX.9 (POSIX bindings for Fortran
77) and so one should expect it did made it into POSIX.1.  But this
never happened.  But we still provide this function as a GNU extension
to enable writing standard compliant Fortran environments.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>clearenv</B> <I>(void)</I>
<DD><A NAME="IDX2716"></A>
The <CODE>clearenv</CODE> function removes all entries from the environment.
Using <CODE>putenv</CODE> and <CODE>setenv</CODE> new entries can be added again
later.

</P>
<P>
If the function is successful it returns <CODE>0</CODE>.  Otherwise the return
value is nonzero.
</DL>

</P>

<P>
You can deal directly with the underlying representation of environment
objects to add more variables to the environment (for example, to
communicate with another program you are about to execute;
see section <A HREF="libc_517.html#SEC525">Executing a File</A>).

</P>
<P>
<DL>
<DT><U>Variable:</U> char ** <B>environ</B>
<DD><A NAME="IDX2717"></A>
The environment is represented as an array of strings.  Each string is
of the format <SAMP>`<VAR>name</VAR>=<VAR>value</VAR>'</SAMP>.  The order in which
strings appear in the environment is not significant, but the same
<VAR>name</VAR> must not appear more than once.  The last element of the
array is a null pointer.

</P>
<P>
This variable is declared in the header file <TT>`unistd.h'</TT>.

</P>
<P>
If you just want to get the value of an environment variable, use
<CODE>getenv</CODE>.
</DL>

</P>
<P>
Unix systems, and the GNU system, pass the initial value of
<CODE>environ</CODE> as the third argument to <CODE>main</CODE>.
See section <A HREF="libc_472.html#SEC479">Program Arguments</A>.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_503.html">previous</A>, <A HREF="libc_505.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
