<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - FP Function Optimizations</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_365.html">previous</A>, <A HREF="libc_367.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC373" HREF="libc_toc.html#TOC373">Is Fast Code or Small Code preferred?</A></H2>
<P>
<A NAME="IDX2029"></A>

</P>
<P>
If an application uses many floating point functions, it is often the case
that the costs of the function calls themselves are not negligible.
Modern processor implementation often can execute the operation itself
very fast but the call means a disturbance of the control flow.

</P>
<P>
For this reason the GNU C Library provides optimizations for many of the
frequently used math functions.  When the GNU CC is used and the user
activates the optimizer several new inline functions and macros get
defined.  These new functions and macros have the same names as the
library function and so get used instead of the latter.  In case of
inline functions the compiler will decide whether it is reasonable to
use the inline function and this decision is usually correct.

</P>
<P>
For the generated code this means that no calls to the library functions
are necessary.  This increases the speed significantly.  But the
drawback is that the code size increases and this increase is not always
negligible.

</P>
<P>
The speed increase has one drawback: the inline functions might not set
<CODE>errno</CODE> and might not have the same precision as the library
functions.

</P>
<P>
In cases where the inline functions and macros are not wanted the symbol
<CODE>__NO_MATH_INLINES</CODE> should be defined before any system header is
included.  This will make sure only library functions are used.  Of
course it can be determined for each single file in the project whether
giving this option is preferred or not.

</P>
<P>
Not all hardware implements the entire IEEE 754 standard, or if it
does, there may be a substantial performance penalty for using some of
its features.  For example, enabling traps on some processors forces
the FPU to run unpipelined, which more than doubles calculation time.
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_365.html">previous</A>, <A HREF="libc_367.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
