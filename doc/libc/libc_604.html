<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Thread Attributes</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_603.html">previous</A>, <A HREF="libc_605.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC612" HREF="libc_toc.html#TOC612">Thread Attributes</A></H2>

<P>
Threads have a number of attributes that may be set at creation time.
This is done by filling a thread attribute object <VAR>attr</VAR> of type
<CODE>pthread_attr_t</CODE>, then passing it as second argument to
<CODE>pthread_create</CODE>. Passing <CODE>NULL</CODE> is equivalent to passing a
thread attribute object with all attributes set to their default values.

</P>
<P>
Attribute objects are consulted only when creating a new thread.  The
same attribute object can be used for creating several threads.
Modifying an attribute object after a call to <CODE>pthread_create</CODE> does
not change the attributes of the thread previously created.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>pthread_attr_init</B> <I>(pthread_attr_t *<VAR>attr</VAR>)</I>
<DD><A NAME="IDX3138"></A>
<CODE>pthread_attr_init</CODE> initializes the thread attribute object
<VAR>attr</VAR> and fills it with default values for the attributes. (The
default values are listed below for each attribute.)

</P>
<P>
Each attribute <VAR>attrname</VAR> (see below for a list of all attributes)
can be individually set using the function
<CODE>pthread_attr_set<VAR>attrname</VAR></CODE> and retrieved using the function
<CODE>pthread_attr_get<VAR>attrname</VAR></CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>pthread_attr_destroy</B> <I>(pthread_attr_t *<VAR>attr</VAR>)</I>
<DD><A NAME="IDX3139"></A>
<CODE>pthread_attr_destroy</CODE> destroys the attribute object pointed to by
<VAR>attr</VAR> releasing any resources associated with it.  <VAR>attr</VAR> is
left in an undefined state, and you must not use it again in a call to
any pthreads function until it has been reinitialized.
</DL>

</P>
<P>
<A NAME="IDX3140"></A>
<A NAME="IDX3141"></A>
<A NAME="IDX3142"></A>
<A NAME="IDX3143"></A>
<DL>
<DT><U>Function:</U> int <B>pthread_attr_set<VAR>attr</VAR></B> <I>(pthread_attr_t *<VAR>obj</VAR>, int <VAR>value</VAR>)</I>
<DD><A NAME="IDX3144"></A>
Set attribute <VAR>attr</VAR> to <VAR>value</VAR> in the attribute object pointed
to by <VAR>obj</VAR>.  See below for a list of possible attributes and the
values they can take.

</P>
<P>
On success, these functions return 0.  If <VAR>value</VAR> is not meaningful
for the <VAR>attr</VAR> being modified, they will return the error code
<CODE>EINVAL</CODE>.  Some of the functions have other failure modes; see
below.
</DL>

</P>
<P>
<A NAME="IDX3145"></A>
<A NAME="IDX3146"></A>
<A NAME="IDX3147"></A>
<A NAME="IDX3148"></A>
<DL>
<DT><U>Function:</U> int <B>pthread_attr_get<VAR>attr</VAR></B> <I>(const pthread_attr_t *<VAR>obj</VAR>, int *<VAR>value</VAR>)</I>
<DD><A NAME="IDX3149"></A>
Store the current setting of <VAR>attr</VAR> in <VAR>obj</VAR> into the variable
pointed to by <VAR>value</VAR>.

</P>
<P>
These functions always return 0.
</DL>

</P>
<P>
The following thread attributes are supported:
<DL COMPACT>

<DT><SAMP>`detachstate'</SAMP>
<DD>
Choose whether the thread is created in the joinable state (value
<CODE>PTHREAD_CREATE_JOINABLE</CODE>) or in the detached state
(<CODE>PTHREAD_CREATE_DETACHED</CODE>).  The default is
<CODE>PTHREAD_CREATE_JOINABLE</CODE>.

In the joinable state, another thread can synchronize on the thread
termination and recover its termination code using <CODE>pthread_join</CODE>,
but some of the thread resources are kept allocated after the thread
terminates, and reclaimed only when another thread performs
<CODE>pthread_join</CODE> on that thread.

In the detached state, the thread resources are immediately freed when
it terminates, but <CODE>pthread_join</CODE> cannot be used to synchronize on
the thread termination.

A thread created in the joinable state can later be put in the detached
thread using <CODE>pthread_detach</CODE>.

<DT><SAMP>`schedpolicy'</SAMP>
<DD>
Select the scheduling policy for the thread: one of <CODE>SCHED_OTHER</CODE>
(regular, non-realtime scheduling), <CODE>SCHED_RR</CODE> (realtime,
round-robin) or <CODE>SCHED_FIFO</CODE> (realtime, first-in first-out).
The default is <CODE>SCHED_OTHER</CODE>.

The realtime scheduling policies <CODE>SCHED_RR</CODE> and <CODE>SCHED_FIFO</CODE>
are available only to processes with superuser privileges.
<CODE>pthread_attr_setschedparam</CODE> will fail and return <CODE>ENOTSUP</CODE> if
you try to set a realtime policy when you are unprivileged.

The scheduling policy of a thread can be changed after creation with
<CODE>pthread_setschedparam</CODE>.

<DT><SAMP>`schedparam'</SAMP>
<DD>
Change the scheduling parameter (the scheduling priority)
for the thread.  The default is 0.

This attribute is not significant if the scheduling policy is
<CODE>SCHED_OTHER</CODE>; it only matters for the realtime policies
<CODE>SCHED_RR</CODE> and <CODE>SCHED_FIFO</CODE>.

The scheduling priority of a thread can be changed after creation with
<CODE>pthread_setschedparam</CODE>.

<DT><SAMP>`inheritsched'</SAMP>
<DD>
Choose whether the scheduling policy and scheduling parameter for the
newly created thread are determined by the values of the
<VAR>schedpolicy</VAR> and <VAR>schedparam</VAR> attributes (value
<CODE>PTHREAD_EXPLICIT_SCHED</CODE>) or are inherited from the parent thread
(value <CODE>PTHREAD_INHERIT_SCHED</CODE>).  The default is
<CODE>PTHREAD_EXPLICIT_SCHED</CODE>.

<DT><SAMP>`scope'</SAMP>
<DD>
Choose the scheduling contention scope for the created thread.  The
default is <CODE>PTHREAD_SCOPE_SYSTEM</CODE>, meaning that the threads contend
for CPU time with all processes running on the machine. In particular,
thread priorities are interpreted relative to the priorities of all
other processes on the machine. The other possibility,
<CODE>PTHREAD_SCOPE_PROCESS</CODE>, means that scheduling contention occurs
only between the threads of the running process: thread priorities are
interpreted relative to the priorities of the other threads of the
process, regardless of the priorities of other processes.

<CODE>PTHREAD_SCOPE_PROCESS</CODE> is not supported in LinuxThreads.  If you
try to set the scope to this value <CODE>pthread_attr_setscope</CODE> will
fail and return <CODE>ENOTSUP</CODE>.
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_603.html">previous</A>, <A HREF="libc_605.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
