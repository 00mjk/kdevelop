<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Line Control</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_349.html">previous</A>, <A HREF="libc_351.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC357" HREF="libc_toc.html#TOC357">Line Control Functions</A></H2>
<P>
<A NAME="IDX1751"></A>

</P>
<P>
These functions perform miscellaneous control actions on terminal
devices.  As regards terminal access, they are treated like doing
output: if any of these functions is used by a background process on its
controlling terminal, normally all processes in the process group are
sent a <CODE>SIGTTOU</CODE> signal.  The exception is if the calling process
itself is ignoring or blocking <CODE>SIGTTOU</CODE> signals, in which case the
operation is performed and no signal is sent.  See section <A HREF="libc_522.html#SEC530">Job Control</A>.

</P>
<P>
<A NAME="IDX1752"></A>
<DL>
<DT><U>Function:</U> int <B>tcsendbreak</B> <I>(int <VAR>filedes</VAR>, int <VAR>duration</VAR>)</I>
<DD><A NAME="IDX1753"></A>
This function generates a break condition by transmitting a stream of
zero bits on the terminal associated with the file descriptor
<VAR>filedes</VAR>.  The duration of the break is controlled by the
<VAR>duration</VAR> argument.  If zero, the duration is between 0.25 and 0.5
seconds.  The meaning of a nonzero value depends on the operating system.

</P>
<P>
This function does nothing if the terminal is not an asynchronous serial
data port.

</P>
<P>
The return value is normally zero.  In the event of an error, a value
of @math{-1} is returned.  The following <CODE>errno</CODE> error conditions
are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>filedes</VAR> is not a valid file descriptor.

<DT><CODE>ENOTTY</CODE>
<DD>
The <VAR>filedes</VAR> is not associated with a terminal device.
</DL>
</DL>

<P>
<A NAME="IDX1754"></A>
<A NAME="IDX1755"></A>
<DL>
<DT><U>Function:</U> int <B>tcdrain</B> <I>(int <VAR>filedes</VAR>)</I>
<DD><A NAME="IDX1756"></A>
The <CODE>tcdrain</CODE> function waits until all queued
output to the terminal <VAR>filedes</VAR> has been transmitted.

</P>
<P>
This function is a cancelation point in multi-threaded programs.  This
is a problem if the thread allocates some resources (like memory, file
descriptors, semaphores or whatever) at the time <CODE>tcdrain</CODE> is
called.  If the thread gets canceled these resources stay allocated
until the program ends.  To avoid this calls to <CODE>tcdrain</CODE> should be
protected using cancelation handlers.

</P>
<P>
The return value is normally zero.  In the event of an error, a value
of @math{-1} is returned.  The following <CODE>errno</CODE> error conditions
are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>filedes</VAR> is not a valid file descriptor.

<DT><CODE>ENOTTY</CODE>
<DD>
The <VAR>filedes</VAR> is not associated with a terminal device.

<DT><CODE>EINTR</CODE>
<DD>
The operation was interrupted by delivery of a signal.
See section <A HREF="libc_449.html#SEC456">Primitives Interrupted by Signals</A>.
</DL>
</DL>

<P>
<A NAME="IDX1757"></A>
<A NAME="IDX1758"></A>
<DL>
<DT><U>Function:</U> int <B>tcflush</B> <I>(int <VAR>filedes</VAR>, int <VAR>queue</VAR>)</I>
<DD><A NAME="IDX1759"></A>
The <CODE>tcflush</CODE> function is used to clear the input and/or output
queues associated with the terminal file <VAR>filedes</VAR>.  The <VAR>queue</VAR>
argument specifies which queue(s) to clear, and can be one of the
following values:

</P>
<DL COMPACT>

<DT><CODE>TCIFLUSH</CODE>
<DD>
<A NAME="IDX1760"></A>
 

Clear any input data received, but not yet read.

<A NAME="IDX1761"></A>
<DT><CODE>TCOFLUSH</CODE>
<DD>
Clear any output data written, but not yet transmitted.

<A NAME="IDX1762"></A>
<DT><CODE>TCIOFLUSH</CODE>
<DD>
Clear both queued input and output.
</DL>

<P>
The return value is normally zero.  In the event of an error, a value
of @math{-1} is returned.  The following <CODE>errno</CODE> error conditions
are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>filedes</VAR> is not a valid file descriptor.

<DT><CODE>ENOTTY</CODE>
<DD>
The <VAR>filedes</VAR> is not associated with a terminal device.

<DT><CODE>EINVAL</CODE>
<DD>
A bad value was supplied as the <VAR>queue</VAR> argument.
</DL>

<P>
It is unfortunate that this function is named <CODE>tcflush</CODE>, because
the term "flush" is normally used for quite another operation--waiting
until all output is transmitted--and using it for discarding input or
output would be confusing.  Unfortunately, the name <CODE>tcflush</CODE> comes
from POSIX and we cannot change it.
</DL>

</P>
<P>
<A NAME="IDX1763"></A>
<A NAME="IDX1764"></A>
<DL>
<DT><U>Function:</U> int <B>tcflow</B> <I>(int <VAR>filedes</VAR>, int <VAR>action</VAR>)</I>
<DD><A NAME="IDX1765"></A>
The <CODE>tcflow</CODE> function is used to perform operations relating to
XON/XOFF flow control on the terminal file specified by <VAR>filedes</VAR>.

</P>
<P>
The <VAR>action</VAR> argument specifies what operation to perform, and can
be one of the following values:

</P>
<DL COMPACT>

<DT><CODE>TCOOFF</CODE>
<DD>
<A NAME="IDX1766"></A>
 
Suspend transmission of output.

<A NAME="IDX1767"></A>
<DT><CODE>TCOON</CODE>
<DD>
Restart transmission of output.

<A NAME="IDX1768"></A>
<DT><CODE>TCIOFF</CODE>
<DD>
Transmit a STOP character.

<A NAME="IDX1769"></A>
<DT><CODE>TCION</CODE>
<DD>
Transmit a START character.
</DL>

<P>
For more information about the STOP and START characters, see section <A HREF="libc_344.html#SEC351">Special Characters</A>.

</P>
<P>
The return value is normally zero.  In the event of an error, a value
of @math{-1} is returned.  The following <CODE>errno</CODE> error conditions
are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
<A NAME="IDX1770"></A>
 
The <VAR>filedes</VAR> is not a valid file descriptor.

<A NAME="IDX1771"></A>
<DT><CODE>ENOTTY</CODE>
<DD>
The <VAR>filedes</VAR> is not associated with a terminal device.

<A NAME="IDX1772"></A>
<DT><CODE>EINVAL</CODE>
<DD>
A bad value was supplied as the <VAR>action</VAR> argument.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_349.html">previous</A>, <A HREF="libc_351.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
