<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Services Database</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_297.html">previous</A>, <A HREF="libc_299.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC305" HREF="libc_toc.html#TOC305">The Services Database</A></H3>
<P>
<A NAME="IDX1490"></A>
<A NAME="IDX1491"></A>
<A NAME="IDX1492"></A>

</P>
<P>
<A NAME="IDX1493"></A>
The database that keeps track of "well-known" services is usually
either the file <TT>`/etc/services'</TT> or an equivalent from a name server.
You can use these utilities, declared in <TT>`netdb.h'</TT>, to access
the services database.
<A NAME="IDX1494"></A>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct servent</B>
<DD><A NAME="IDX1495"></A>
This data type holds information about entries from the services database.
It has the following members:

</P>
<DL COMPACT>

<DT><CODE>char *s_name</CODE>
<DD>
This is the "official" name of the service.

<DT><CODE>char **s_aliases</CODE>
<DD>
These are alternate names for the service, represented as an array of
strings.  A null pointer terminates the array.

<DT><CODE>int s_port</CODE>
<DD>
This is the port number for the service.  Port numbers are given in
network byte order; see section <A HREF="libc_299.html#SEC306">Byte Order Conversion</A>.

<DT><CODE>char *s_proto</CODE>
<DD>
This is the name of the protocol to use with this service.
See section <A HREF="libc_300.html#SEC307">Protocols Database</A>.
</DL>
</DL>

<P>
To get information about a particular service, use the
<CODE>getservbyname</CODE> or <CODE>getservbyport</CODE> functions.  The information
is returned in a statically-allocated structure; you must copy the
information if you need to save it across calls.

</P>
<P>
<DL>
<DT><U>Function:</U> struct servent * <B>getservbyname</B> <I>(const char *<VAR>name</VAR>, const char *<VAR>proto</VAR>)</I>
<DD><A NAME="IDX1496"></A>
The <CODE>getservbyname</CODE> function returns information about the
service named <VAR>name</VAR> using protocol <VAR>proto</VAR>.  If it can't find
such a service, it returns a null pointer.

</P>
<P>
This function is useful for servers as well as for clients; servers
use it to determine which port they should listen on (see section <A HREF="libc_309.html#SEC316">Listening for Connections</A>).
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct servent * <B>getservbyport</B> <I>(int <VAR>port</VAR>, const char *<VAR>proto</VAR>)</I>
<DD><A NAME="IDX1497"></A>
The <CODE>getservbyport</CODE> function returns information about the
service at port <VAR>port</VAR> using protocol <VAR>proto</VAR>.  If it can't
find such a service, it returns a null pointer.
</DL>

</P>
<P>
You can also scan the services database using <CODE>setservent</CODE>,
<CODE>getservent</CODE>, and <CODE>endservent</CODE>.  Be careful in using these
functions, because they are not reentrant.

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>setservent</B> <I>(int <VAR>stayopen</VAR>)</I>
<DD><A NAME="IDX1498"></A>
This function opens the services database to begin scanning it.

</P>
<P>
If the <VAR>stayopen</VAR> argument is nonzero, this sets a flag so that
subsequent calls to <CODE>getservbyname</CODE> or <CODE>getservbyport</CODE> will
not close the database (as they usually would).  This makes for more
efficiency if you call those functions several times, by avoiding
reopening the database for each call.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct servent * <B>getservent</B> <I>(void)</I>
<DD><A NAME="IDX1499"></A>
This function returns the next entry in the services database.  If
there are no more entries, it returns a null pointer.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>endservent</B> <I>(void)</I>
<DD><A NAME="IDX1500"></A>
This function closes the services database.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_297.html">previous</A>, <A HREF="libc_299.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
