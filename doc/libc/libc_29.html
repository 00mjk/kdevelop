<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Aligned Memory Blocks</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_28.html">previous</A>, <A HREF="libc_30.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC29" HREF="libc_toc.html#TOC29">Allocating Aligned Memory Blocks</A></H3>

<P>
<A NAME="IDX231"></A>
<A NAME="IDX232"></A>
<A NAME="IDX233"></A>
The address of a block returned by <CODE>malloc</CODE> or <CODE>realloc</CODE> in
the GNU system is always a multiple of eight (or sixteen on 64-bit
systems).  If you need a block whose address is a multiple of a higher
power of two than that, use <CODE>memalign</CODE> or <CODE>valloc</CODE>.  These
functions are declared in <TT>`stdlib.h'</TT>.

</P>
<P>
With the GNU library, you can use <CODE>free</CODE> to free the blocks that
<CODE>memalign</CODE> and <CODE>valloc</CODE> return.  That does not work in BSD,
however--BSD does not provide any way to free such blocks.

</P>
<P>
<DL>
<DT><U>Function:</U> void * <B>memalign</B> <I>(size_t <VAR>boundary</VAR>, size_t <VAR>size</VAR>)</I>
<DD><A NAME="IDX234"></A>
The <CODE>memalign</CODE> function allocates a block of <VAR>size</VAR> bytes whose
address is a multiple of <VAR>boundary</VAR>.  The <VAR>boundary</VAR> must be a
power of two!  The function <CODE>memalign</CODE> works by allocating a
somewhat larger block, and then returning an address within the block
that is on the specified boundary.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void * <B>valloc</B> <I>(size_t <VAR>size</VAR>)</I>
<DD><A NAME="IDX235"></A>
Using <CODE>valloc</CODE> is like using <CODE>memalign</CODE> and passing the page size
as the value of the second argument.  It is implemented like this:

</P>

<PRE>
void *
valloc (size_t size)
{
  return memalign (getpagesize (), size);
}
</PRE>

</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_28.html">previous</A>, <A HREF="libc_30.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
