<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Conversion Specifier Options</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_180.html">previous</A>, <A HREF="libc_182.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC188" HREF="libc_toc.html#TOC188">Conversion Specifier Options</A></H3>

<P>
If you define a meaning for <SAMP>`%A'</SAMP>, what if the template contains
<SAMP>`%+23A'</SAMP> or <SAMP>`%-#A'</SAMP>?  To implement a sensible meaning for these,
the handler when called needs to be able to get the options specified in
the template.

</P>
<P>
Both the <VAR>handler-function</VAR> and <VAR>arginfo-function</VAR> accept an
argument that points to a <CODE>struct printf_info</CODE>, which contains
information about the options appearing in an instance of the conversion
specifier.  This data type is declared in the header file
<TT>`printf.h'</TT>.
<A NAME="IDX862"></A>

</P>
<P>
<DL>
<DT><U>Type:</U> <B>struct printf_info</B>
<DD><A NAME="IDX863"></A>
This structure is used to pass information about the options appearing
in an instance of a conversion specifier in a <CODE>printf</CODE> template
string to the handler and arginfo functions for that specifier.  It
contains the following members:

</P>
<DL COMPACT>

<DT><CODE>int prec</CODE>
<DD>
This is the precision specified.  The value is <CODE>-1</CODE> if no precision
was specified.  If the precision was given as <SAMP>`*'</SAMP>, the
<CODE>printf_info</CODE> structure passed to the handler function contains the
actual value retrieved from the argument list.  But the structure passed
to the arginfo function contains a value of <CODE>INT_MIN</CODE>, since the
actual value is not known.

<DT><CODE>int width</CODE>
<DD>
This is the minimum field width specified.  The value is <CODE>0</CODE> if no
width was specified.  If the field width was given as <SAMP>`*'</SAMP>, the
<CODE>printf_info</CODE> structure passed to the handler function contains the
actual value retrieved from the argument list.  But the structure passed
to the arginfo function contains a value of <CODE>INT_MIN</CODE>, since the
actual value is not known.

<DT><CODE>wchar_t spec</CODE>
<DD>
This is the conversion specifier character specified.  It's stored in
the structure so that you can register the same handler function for
multiple characters, but still have a way to tell them apart when the
handler function is called.

<DT><CODE>unsigned int is_long_double</CODE>
<DD>
This is a boolean that is true if the <SAMP>`L'</SAMP>, <SAMP>`ll'</SAMP>, or <SAMP>`q'</SAMP>
type modifier was specified.  For integer conversions, this indicates
<CODE>long long int</CODE>, as opposed to <CODE>long double</CODE> for floating
point conversions.

<DT><CODE>unsigned int is_char</CODE>
<DD>
This is a boolean that is true if the <SAMP>`hh'</SAMP> type modifier was specified.

<DT><CODE>unsigned int is_short</CODE>
<DD>
This is a boolean that is true if the <SAMP>`h'</SAMP> type modifier was specified.

<DT><CODE>unsigned int is_long</CODE>
<DD>
This is a boolean that is true if the <SAMP>`l'</SAMP> type modifier was specified.

<DT><CODE>unsigned int alt</CODE>
<DD>
This is a boolean that is true if the <SAMP>`#'</SAMP> flag was specified.

<DT><CODE>unsigned int space</CODE>
<DD>
This is a boolean that is true if the <SAMP>` '</SAMP> flag was specified.

<DT><CODE>unsigned int left</CODE>
<DD>
This is a boolean that is true if the <SAMP>`-'</SAMP> flag was specified.

<DT><CODE>unsigned int showsign</CODE>
<DD>
This is a boolean that is true if the <SAMP>`+'</SAMP> flag was specified.

<DT><CODE>unsigned int group</CODE>
<DD>
This is a boolean that is true if the <SAMP>`''</SAMP> flag was specified.

<DT><CODE>unsigned int extra</CODE>
<DD>
This flag has a special meaning depending on the context.  It could
be used freely by the user-defined handlers but when called from
the <CODE>printf</CODE> function this variable always contains the value
<CODE>0</CODE>.

<DT><CODE>wchar_t pad</CODE>
<DD>
This is the character to use for padding the output to the minimum field
width.  The value is <CODE>'0'</CODE> if the <SAMP>`0'</SAMP> flag was specified, and
<CODE>' '</CODE> otherwise.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_180.html">previous</A>, <A HREF="libc_182.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
