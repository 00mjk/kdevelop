<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Who is Connected</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_310.html">previous</A>, <A HREF="libc_312.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC318" HREF="libc_toc.html#TOC318">Who is Connected to Me?</A></H3>

<P>
<DL>
<DT><U>Function:</U> int <B>getpeername</B> <I>(int <VAR>socket</VAR>, struct sockaddr *<VAR>addr</VAR>, socklen_t *<VAR>length-ptr</VAR>)</I>
<DD><A NAME="IDX1557"></A>
The <CODE>getpeername</CODE> function returns the address of the socket that
<VAR>socket</VAR> is connected to; it stores the address in the memory space
specified by <VAR>addr</VAR> and <VAR>length-ptr</VAR>.  It stores the length of
the address in <CODE>*<VAR>length-ptr</VAR></CODE>.

</P>
<P>
See section <A HREF="libc_281.html#SEC288">Socket Addresses</A>, for information about the format of the
address.  In some operating systems, <CODE>getpeername</CODE> works only for
sockets in the Internet domain.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on error.  The
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The argument <VAR>socket</VAR> is not a valid file descriptor.

<DT><CODE>ENOTSOCK</CODE>
<DD>
The descriptor <VAR>socket</VAR> is not a socket.

<DT><CODE>ENOTCONN</CODE>
<DD>
The socket <VAR>socket</VAR> is not connected.

<DT><CODE>ENOBUFS</CODE>
<DD>
There are not enough internal buffers available.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_310.html">previous</A>, <A HREF="libc_312.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
