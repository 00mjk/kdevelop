<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Signaling Yourself</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_450.html">previous</A>, <A HREF="libc_452.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC458" HREF="libc_toc.html#TOC458">Signaling Yourself</A></H3>

<P>
A process can send itself a signal with the <CODE>raise</CODE> function.  This
function is declared in <TT>`signal.h'</TT>.
<A NAME="IDX2561"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>raise</B> <I>(int <VAR>signum</VAR>)</I>
<DD><A NAME="IDX2562"></A>
The <CODE>raise</CODE> function sends the signal <VAR>signum</VAR> to the calling
process.  It returns zero if successful and a nonzero value if it fails.
About the only reason for failure would be if the value of <VAR>signum</VAR>
is invalid.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>gsignal</B> <I>(int <VAR>signum</VAR>)</I>
<DD><A NAME="IDX2563"></A>
The <CODE>gsignal</CODE> function does the same thing as <CODE>raise</CODE>; it is
provided only for compatibility with SVID.
</DL>

</P>
<P>
One convenient use for <CODE>raise</CODE> is to reproduce the default behavior
of a signal that you have trapped.  For instance, suppose a user of your
program types the SUSP character (usually <KBD>C-z</KBD>; see section <A HREF="libc_344.html#SEC351">Special Characters</A>) to send it an interactive stop signal
(<CODE>SIGTSTP</CODE>), and you want to clean up some internal data buffers
before stopping.  You might set this up like this:

</P>


<PRE>
#include &#60;signal.h&#62;

/* When a stop signal arrives, set the action back to the default
   and then resend the signal after doing cleanup actions. */

void
tstp_handler (int sig)
{
  signal (SIGTSTP, SIG_DFL);
  /* Do cleanup actions here. */
  ...
  raise (SIGTSTP);
}

/* When the process is continued again, restore the signal handler. */

void
cont_handler (int sig)
{
  signal (SIGCONT, cont_handler);
  signal (SIGTSTP, tstp_handler);
}

/* Enable both handlers during program initialization. */

int
main (void)
{
  signal (SIGCONT, cont_handler);
  signal (SIGTSTP, tstp_handler);
  ...
}
</PRE>

<P>
<STRONG>Portability note:</STRONG> <CODE>raise</CODE> was invented by the ISO C
committee.  Older systems may not support it, so using <CODE>kill</CODE> may
be more portable.  See section <A HREF="libc_452.html#SEC459">Signaling Another Process</A>.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_450.html">previous</A>, <A HREF="libc_452.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
