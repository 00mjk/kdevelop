<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Process Signal Mask</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_457.html">previous</A>, <A HREF="libc_459.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC465" HREF="libc_toc.html#TOC465">Process Signal Mask</A></H3>
<P>
<A NAME="IDX2578"></A>
<A NAME="IDX2579"></A>

</P>
<P>
The collection of signals that are currently blocked is called the
<STRONG>signal mask</STRONG>.  Each process has its own signal mask.  When you
create a new process (see section <A HREF="libc_516.html#SEC524">Creating a Process</A>), it inherits its
parent's mask.  You can block or unblock signals with total flexibility
by modifying the signal mask.

</P>
<P>
The prototype for the <CODE>sigprocmask</CODE> function is in <TT>`signal.h'</TT>.
<A NAME="IDX2580"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>sigprocmask</B> <I>(int <VAR>how</VAR>, const sigset_t *<VAR>set</VAR>, sigset_t *<VAR>oldset</VAR>)</I>
<DD><A NAME="IDX2581"></A>
The <CODE>sigprocmask</CODE> function is used to examine or change the calling
process's signal mask.  The <VAR>how</VAR> argument determines how the signal
mask is changed, and must be one of the following values:

</P>
<DL COMPACT>

<DT><CODE>SIG_BLOCK</CODE>
<DD>
<A NAME="IDX2582"></A>
 
Block the signals in <CODE>set</CODE>---add them to the existing mask.  In
other words, the new mask is the union of the existing mask and
<VAR>set</VAR>.

<A NAME="IDX2583"></A>
<DT><CODE>SIG_UNBLOCK</CODE>
<DD>
Unblock the signals in <VAR>set</VAR>---remove them from the existing mask.

<A NAME="IDX2584"></A>
<DT><CODE>SIG_SETMASK</CODE>
<DD>
Use <VAR>set</VAR> for the mask; ignore the previous value of the mask.
</DL>

<P>
The last argument, <VAR>oldset</VAR>, is used to return information about the
old process signal mask.  If you just want to change the mask without
looking at it, pass a null pointer as the <VAR>oldset</VAR> argument.
Similarly, if you want to know what's in the mask without changing it,
pass a null pointer for <VAR>set</VAR> (in this case the <VAR>how</VAR> argument
is not significant).  The <VAR>oldset</VAR> argument is often used to
remember the previous signal mask in order to restore it later.  (Since
the signal mask is inherited over <CODE>fork</CODE> and <CODE>exec</CODE> calls, you
can't predict what its contents are when your program starts running.)

</P>
<P>
If invoking <CODE>sigprocmask</CODE> causes any pending signals to be
unblocked, at least one of those signals is delivered to the process
before <CODE>sigprocmask</CODE> returns.  The order in which pending signals
are delivered is not specified, but you can control the order explicitly
by making multiple <CODE>sigprocmask</CODE> calls to unblock various signals
one at a time.

</P>
<P>
The <CODE>sigprocmask</CODE> function returns <CODE>0</CODE> if successful, and <CODE>-1</CODE>
to indicate an error.  The following <CODE>errno</CODE> error conditions are
defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EINVAL</CODE>
<DD>
The <VAR>how</VAR> argument is invalid.
</DL>

<P>
You can't block the <CODE>SIGKILL</CODE> and <CODE>SIGSTOP</CODE> signals, but
if the signal set includes these, <CODE>sigprocmask</CODE> just ignores
them instead of returning an error status.

</P>
<P>
Remember, too, that blocking program error signals such as <CODE>SIGFPE</CODE>
leads to undesirable results for signals generated by an actual program
error (as opposed to signals sent with <CODE>raise</CODE> or <CODE>kill</CODE>).
This is because your program may be too broken to be able to continue
executing to a point where the signal is unblocked again.
See section <A HREF="libc_423.html#SEC430">Program Error Signals</A>.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_457.html">previous</A>, <A HREF="libc_459.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
