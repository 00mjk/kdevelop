<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Testing File Type</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_262.html">previous</A>, <A HREF="libc_264.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC270" HREF="libc_toc.html#TOC270">Testing the Type of a File</A></H3>

<P>
The <STRONG>file mode</STRONG>, stored in the <CODE>st_mode</CODE> field of the file
attributes, contains two kinds of information: the file type code, and
the access permission bits.  This section discusses only the type code,
which you can use to tell whether the file is a directory, whether it is
a socket, and so on.  For information about the access permission,
section <A HREF="libc_265.html#SEC272">The Mode Bits for Access Permission</A>.

</P>
<P>
There are two predefined ways you can access the file type portion of
the file mode.  First of all, for each type of file, there is a
<STRONG>predicate macro</STRONG> which examines a file mode value and returns
true or false--is the file of that type, or not.  Secondly, you can
mask out the rest of the file mode to get just a file type code.
You can compare this against various constants for the supported file
types.

</P>
<P>
All of the symbols listed in this section are defined in the header file
<TT>`sys/stat.h'</TT>.
<A NAME="IDX1274"></A>

</P>
<P>
The following predicate macros test the type of a file, given the value
<VAR>m</VAR> which is the <CODE>st_mode</CODE> field returned by <CODE>stat</CODE> on
that file:

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISDIR</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1275"></A>
This macro returns nonzero if the file is a directory.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISCHR</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1276"></A>
This macro returns nonzero if the file is a character special file (a
device like a terminal).
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISBLK</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1277"></A>
This macro returns nonzero if the file is a block special file (a device
like a disk).
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISREG</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1278"></A>
This macro returns nonzero if the file is a regular file.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISFIFO</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1279"></A>
This macro returns nonzero if the file is a FIFO special file, or a
pipe.  See section <A HREF="libc_273.html#SEC280">Pipes and FIFOs</A>.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISLNK</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1280"></A>
This macro returns nonzero if the file is a symbolic link.
See section <A HREF="libc_256.html#SEC263">Symbolic Links</A>.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>S_ISSOCK</B> <I>(mode_t <VAR>m</VAR>)</I>
<DD><A NAME="IDX1281"></A>
This macro returns nonzero if the file is a socket.  See section <A HREF="libc_278.html#SEC285">Sockets</A>.
</DL>

</P>
<P>
An alternate non-POSIX method of testing the file type is supported for
compatibility with BSD.  The mode can be bitwise ANDed with
<CODE>S_IFMT</CODE> to extract the file type code, and compared to the
appropriate type code constant.  For example,

</P>

<PRE>
S_ISCHR (<VAR>mode</VAR>)
</PRE>

<P>
is equivalent to:

</P>

<PRE>
((<VAR>mode</VAR> &#38; S_IFMT) == S_IFCHR)
</PRE>

<P>
<DL>
<DT><U>Macro:</U> int <B>S_IFMT</B>
<DD><A NAME="IDX1282"></A>
This is a bit mask used to extract the file type code portion of a mode
value.
</DL>

</P>
<P>
These are the symbolic names for the different file type codes:

</P>
<DL COMPACT>

<DT><CODE>S_IFDIR</CODE>
<DD>
<A NAME="IDX1283"></A>
This macro represents the value of the file type code for a directory file.

<DT><CODE>S_IFCHR</CODE>
<DD>
<A NAME="IDX1284"></A>
This macro represents the value of the file type code for a
character-oriented device file.

<DT><CODE>S_IFBLK</CODE>
<DD>
<A NAME="IDX1285"></A>
This macro represents the value of the file type code for a block-oriented
device file.

<DT><CODE>S_IFREG</CODE>
<DD>
<A NAME="IDX1286"></A>
This macro represents the value of the file type code for a regular file.

<DT><CODE>S_IFLNK</CODE>
<DD>
<A NAME="IDX1287"></A>
This macro represents the value of the file type code for a symbolic link.

<DT><CODE>S_IFSOCK</CODE>
<DD>
<A NAME="IDX1288"></A>
This macro represents the value of the file type code for a socket.

<DT><CODE>S_IFIFO</CODE>
<DD>
<A NAME="IDX1289"></A>
This macro represents the value of the file type code for a FIFO or pipe.
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_262.html">previous</A>, <A HREF="libc_264.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
