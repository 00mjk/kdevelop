<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Scanning All Groups</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_575.html">previous</A>, <A HREF="libc_577.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC584" HREF="libc_toc.html#TOC584">Scanning the List of All Groups</A></H3>
<P>
<A NAME="IDX3020"></A>

</P>
<P>
This section explains how a program can read the list of all groups in
the system, one group at a time.  The functions described here are
declared in <TT>`grp.h'</TT>.

</P>
<P>
You can use the <CODE>fgetgrent</CODE> function to read group entries from a
particular file.

</P>
<P>
<DL>
<DT><U>Function:</U> struct group * <B>fgetgrent</B> <I>(FILE *<VAR>stream</VAR>)</I>
<DD><A NAME="IDX3021"></A>
The <CODE>fgetgrent</CODE> function reads the next entry from <VAR>stream</VAR>.
It returns a pointer to the entry.  The structure is statically
allocated and is overwritten on subsequent calls to <CODE>fgetgrent</CODE>.  You
must copy the contents of the structure if you wish to save the
information.

</P>
<P>
The stream must correspond to a file in the same format as the standard
group database file.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>fgetgrent_r</B> <I>(FILE *<VAR>stream</VAR>, struct group *<VAR>result_buf</VAR>, char *<VAR>buffer</VAR>, size_t <VAR>buflen</VAR>, struct group **<VAR>result</VAR>)</I>
<DD><A NAME="IDX3022"></A>
This function is similar to <CODE>fgetgrent</CODE> in that it reads the next
user entry from <VAR>stream</VAR>.  But the result is returned in the
structure pointed to by <VAR>result_buf</VAR>.  The first <VAR>buflen</VAR> bytes
of the additional buffer pointed to by <VAR>buffer</VAR> are used to contain
additional information, normally strings which are pointed to by the
elements of the result structure.

</P>
<P>
This stream must correspond to a file in the same format as the standard
group database file.

</P>
<P>
If the function returns zero <VAR>result</VAR> points to the structure with
the wanted data (normally this is in <VAR>result_buf</VAR>).  If errors
occurred the return value is non-zero and <VAR>result</VAR> contains a null
pointer.
</DL>

</P>
<P>
The way to scan all the entries in the group database is with
<CODE>setgrent</CODE>, <CODE>getgrent</CODE>, and <CODE>endgrent</CODE>.

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>setgrent</B> <I>(void)</I>
<DD><A NAME="IDX3023"></A>
This function initializes a stream for reading from the group data base.
You use this stream by calling <CODE>getgrent</CODE> or <CODE>getgrent_r</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct group * <B>getgrent</B> <I>(void)</I>
<DD><A NAME="IDX3024"></A>
The <CODE>getgrent</CODE> function reads the next entry from the stream
initialized by <CODE>setgrent</CODE>.  It returns a pointer to the entry.  The
structure is statically allocated and is overwritten on subsequent calls
to <CODE>getgrent</CODE>.  You must copy the contents of the structure if you
wish to save the information.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getgrent_r</B> <I>(struct group *<VAR>result_buf</VAR>, char *<VAR>buffer</VAR>, size_t <VAR>buflen</VAR>, struct group **<VAR>result</VAR>)</I>
<DD><A NAME="IDX3025"></A>
This function is similar to <CODE>getgrent</CODE> in that it returns the next
entry from the stream initialized by <CODE>setgrent</CODE>.  Like
<CODE>fgetgrent_r</CODE>, it places the result in user-supplied buffers
pointed to <VAR>result_buf</VAR> and <VAR>buffer</VAR>.

</P>
<P>
If the function returns zero <VAR>result</VAR> contains a pointer to the data
(normally equal to <VAR>result_buf</VAR>).  If errors occurred the return
value is non-zero and <VAR>result</VAR> contains a null pointer.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>endgrent</B> <I>(void)</I>
<DD><A NAME="IDX3026"></A>
This function closes the internal stream used by <CODE>getgrent</CODE> or
<CODE>getgrent_r</CODE>.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_575.html">previous</A>, <A HREF="libc_577.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
