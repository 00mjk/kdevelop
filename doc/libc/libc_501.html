<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Suboptions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_500.html">previous</A>, <A HREF="libc_502.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC509" HREF="libc_toc.html#TOC509">Parsing of Suboptions</A></H4>

<P>
Having a single level of options is sometimes not enough.  There might
be too many options which have to be available or a set of options is
closely related.

</P>
<P>
For this case some programs use suboptions.  One of the most prominent
programs is certainly <CODE>mount</CODE>(8).  The <CODE>-o</CODE> option take one
argument which itself is a comma separated list of options.  To ease the
programming of code like this the function <CODE>getsubopt</CODE> is
available.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getsubopt</B> <I>(char **<VAR>optionp</VAR>, const char* const *<VAR>tokens</VAR>, char **<VAR>valuep</VAR>)</I>
<DD><A NAME="IDX2706"></A>

</P>
<P>
The <VAR>optionp</VAR> parameter must be a pointer to a variable containing
the address of the string to process.  When the function returns the
reference is updated to point to the next suboption or to the
terminating <SAMP>`\0'</SAMP> character if there is no more suboption available.

</P>
<P>
The <VAR>tokens</VAR> parameter references an array of strings containing the
known suboptions.  All strings must be <SAMP>`\0'</SAMP> terminated and to mark
the end a null pointer must be stored.  When <CODE>getsubopt</CODE> finds a
possible legal suboption it compares it with all strings available in
the <VAR>tokens</VAR> array and returns the index in the string as the
indicator.

</P>
<P>
In case the suboption has an associated value introduced by a <SAMP>`='</SAMP>
character, a pointer to the value is returned in <VAR>valuep</VAR>.  The
string is <SAMP>`\0'</SAMP> terminated.  If no argument is available
<VAR>valuep</VAR> is set to the null pointer.  By doing this the caller can
check whether a necessary value is given or whether no unexpected value
is present.

</P>
<P>
In case the next suboption in the string is not mentioned in the
<VAR>tokens</VAR> array the starting address of the suboption including a
possible value is returned in <VAR>valuep</VAR> and the return value of the
function is <SAMP>`-1'</SAMP>.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_500.html">previous</A>, <A HREF="libc_502.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
