<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Continuing Stopped Jobs</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_533.html">previous</A>, <A HREF="libc_535.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC542" HREF="libc_toc.html#TOC542">Continuing Stopped Jobs</A></H3>

<P>
<A NAME="IDX2829"></A>
The shell can continue a stopped job by sending a <CODE>SIGCONT</CODE> signal
to its process group.  If the job is being continued in the foreground,
the shell should first invoke <CODE>tcsetpgrp</CODE> to give the job access to
the terminal, and restore the saved terminal settings.  After continuing
a job in the foreground, the shell should wait for the job to stop or
complete, as if the job had just been launched in the foreground.

</P>
<P>
The sample shell program handles both newly created and continued jobs
with the same pair of functions, <CODE>put_job_in_foreground</CODE> and
<CODE>put_job_in_background</CODE>.  The definitions of these functions
were given in section <A HREF="libc_532.html#SEC540">Foreground and Background</A>.  When continuing a
stopped job, a nonzero value is passed as the <VAR>cont</VAR> argument to
ensure that the <CODE>SIGCONT</CODE> signal is sent and the terminal modes
reset, as appropriate.

</P>
<P>
This leaves only a function for updating the shell's internal bookkeeping
about the job being continued:

</P>

<PRE>
/* Mark a stopped job J as being running again.  */

void
mark_job_as_running (job *j)
{
  Process *p;

  for (p = j-&#62;first_process; p; p = p-&#62;next)
    p-&#62;stopped = 0;
  j-&#62;notified = 0;
}

/* Continue the job J.  */

void
continue_job (job *j, int foreground)
{
  mark_job_as_running (j);
  if (foreground)
    put_job_in_foreground (j, 1);
  else
    put_job_in_background (j, 1);
}
</PRE>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_533.html">previous</A>, <A HREF="libc_535.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
