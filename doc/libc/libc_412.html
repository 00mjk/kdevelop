<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Priority</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_411.html">previous</A>, <A HREF="libc_413.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC419" HREF="libc_toc.html#TOC419">Process Priority</A></H2>
<P>
<A NAME="IDX2402"></A>
<A NAME="IDX2403"></A>

</P>
<P>
<A NAME="IDX2404"></A>
When several processes try to run, their respective priorities determine
what share of the CPU each process gets.  This section describes how you
can read and set the priority of a process.  All these functions and
macros are declared in <TT>`sys/resource.h'</TT>.

</P>
<P>
The range of valid priority values depends on the operating system, but
typically it runs from <CODE>-20</CODE> to <CODE>20</CODE>.  A lower priority value
means the process runs more often.  These constants describe the range of
priority values:

</P>
<DL COMPACT>

<DT><CODE>PRIO_MIN</CODE>
<DD>
<A NAME="IDX2405"></A>
The smallest valid priority value.

<DT><CODE>PRIO_MAX</CODE>
<DD>
<A NAME="IDX2406"></A>
The largest valid priority value.
</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>getpriority</B> <I>(int <VAR>class</VAR>, int <VAR>id</VAR>)</I>
<DD><A NAME="IDX2407"></A>
Read the priority of a class of processes; <VAR>class</VAR> and <VAR>id</VAR>
specify which ones (see below).  If the processes specified do not all
have the same priority, this returns the smallest value that any of them
has.

</P>
<P>
The return value is the priority value on success, and <CODE>-1</CODE> on
failure.  The following <CODE>errno</CODE> error condition are possible for
this function:

</P>
<DL COMPACT>

<DT><CODE>ESRCH</CODE>
<DD>
The combination of <VAR>class</VAR> and <VAR>id</VAR> does not match any existing
process.

<DT><CODE>EINVAL</CODE>
<DD>
The value of <VAR>class</VAR> is not valid.
</DL>

<P>
When the return value is <CODE>-1</CODE>, it could indicate failure, or it
could be the priority value.  The only way to make certain is to set
<CODE>errno = 0</CODE> before calling <CODE>getpriority</CODE>, then use <CODE>errno
!= 0</CODE> afterward as the criterion for failure.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>setpriority</B> <I>(int <VAR>class</VAR>, int <VAR>id</VAR>, int <VAR>priority</VAR>)</I>
<DD><A NAME="IDX2408"></A>
Set the priority of a class of processes to <VAR>priority</VAR>; <VAR>class</VAR>
and <VAR>id</VAR> specify which ones (see below).

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.  The
following <CODE>errno</CODE> error condition are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>ESRCH</CODE>
<DD>
The combination of <VAR>class</VAR> and <VAR>id</VAR> does not match any existing
process.

<DT><CODE>EINVAL</CODE>
<DD>
The value of <VAR>class</VAR> is not valid.

<DT><CODE>EPERM</CODE>
<DD>
You tried to set the priority of some other user's process, and you
don't have privileges for that.

<DT><CODE>EACCES</CODE>
<DD>
You tried to lower the priority of a process, and you don't have
privileges for that.
</DL>
</DL>

<P>
The arguments <VAR>class</VAR> and <VAR>id</VAR> together specify a set of
processes you are interested in.  These are the possible values for
<VAR>class</VAR>:

</P>
<DL COMPACT>

<DT><CODE>PRIO_PROCESS</CODE>
<DD>
<A NAME="IDX2409"></A>
Read or set the priority of one process.  The argument <VAR>id</VAR> is a
process ID.

<DT><CODE>PRIO_PGRP</CODE>
<DD>
<A NAME="IDX2410"></A>
Read or set the priority of one process group.  The argument <VAR>id</VAR> is
a process group ID.

<DT><CODE>PRIO_USER</CODE>
<DD>
<A NAME="IDX2411"></A>
Read or set the priority of one user's processes.  The argument <VAR>id</VAR>
is a user ID.
</DL>

<P>
If the argument <VAR>id</VAR> is 0, it stands for the current process,
current process group, or the current user, according to <VAR>class</VAR>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>nice</B> <I>(int <VAR>increment</VAR>)</I>
<DD><A NAME="IDX2412"></A>
Increment the priority of the current process by <VAR>increment</VAR>.
The return value is the same as for <CODE>setpriority</CODE>.

</P>
<P>
Here is an equivalent definition for <CODE>nice</CODE>:

</P>

<PRE>
int
nice (int increment)
{
  int old = getpriority (PRIO_PROCESS, 0);
  return setpriority (PRIO_PROCESS, 0, old + increment);
}
</PRE>

</DL>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_411.html">previous</A>, <A HREF="libc_413.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
