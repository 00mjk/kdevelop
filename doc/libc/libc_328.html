<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Socket Option Functions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_327.html">previous</A>, <A HREF="libc_329.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC335" HREF="libc_toc.html#TOC335">Socket Option Functions</A></H3>

<P>
<A NAME="IDX1582"></A>
Here are the functions for examining and modifying socket options.
They are declared in <TT>`sys/socket.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getsockopt</B> <I>(int <VAR>socket</VAR>, int <VAR>level</VAR>, int <VAR>optname</VAR>, void *<VAR>optval</VAR>, socklen_t *<VAR>optlen-ptr</VAR>)</I>
<DD><A NAME="IDX1583"></A>
The <CODE>getsockopt</CODE> function gets information about the value of
option <VAR>optname</VAR> at level <VAR>level</VAR> for socket <VAR>socket</VAR>.

</P>
<P>
The option value is stored in a buffer that <VAR>optval</VAR> points to.
Before the call, you should supply in <CODE>*<VAR>optlen-ptr</VAR></CODE> the
size of this buffer; on return, it contains the number of bytes of
information actually stored in the buffer.

</P>
<P>
Most options interpret the <VAR>optval</VAR> buffer as a single <CODE>int</CODE>
value.

</P>
<P>
The actual return value of <CODE>getsockopt</CODE> is <CODE>0</CODE> on success
and <CODE>-1</CODE> on failure.  The following <CODE>errno</CODE> error conditions
are defined:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>socket</VAR> argument is not a valid file descriptor.

<DT><CODE>ENOTSOCK</CODE>
<DD>
The descriptor <VAR>socket</VAR> is not a socket.

<DT><CODE>ENOPROTOOPT</CODE>
<DD>
The <VAR>optname</VAR> doesn't make sense for the given <VAR>level</VAR>.
</DL>
</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>setsockopt</B> <I>(int <VAR>socket</VAR>, int <VAR>level</VAR>, int <VAR>optname</VAR>, void *<VAR>optval</VAR>, socklen_t <VAR>optlen</VAR>)</I>
<DD><A NAME="IDX1584"></A>
This function is used to set the socket option <VAR>optname</VAR> at level
<VAR>level</VAR> for socket <VAR>socket</VAR>.  The value of the option is passed
in the buffer <VAR>optval</VAR>, which has size <VAR>optlen</VAR>.

</P>
<P>
@hfuzz 6pt
The return value and error codes for <CODE>setsockopt</CODE> are the same as
for <CODE>getsockopt</CODE>.

</P>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_327.html">previous</A>, <A HREF="libc_329.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
