<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Networks Database</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_329.html">previous</A>, <A HREF="libc_331.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC337" HREF="libc_toc.html#TOC337">Networks Database</A></H2>
<P>
<A NAME="IDX1588"></A>
<A NAME="IDX1589"></A>
<A NAME="IDX1590"></A>

</P>
<P>
<A NAME="IDX1591"></A>
<A NAME="IDX1592"></A>
Many systems come with a database that records a list of networks known
to the system developer.  This is usually kept either in the file
<TT>`/etc/networks'</TT> or in an equivalent from a name server.  This data
base is useful for routing programs such as <CODE>route</CODE>, but it is not
useful for programs that simply communicate over the network.  We
provide functions to access this data base, which are declared in
<TT>`netdb.h'</TT>.

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct netent</B>
<DD><A NAME="IDX1593"></A>
This data type is used to represent information about entries in the
networks database.  It has the following members:

</P>
<DL COMPACT>

<DT><CODE>char *n_name</CODE>
<DD>
This is the "official" name of the network.

<DT><CODE>char **n_aliases</CODE>
<DD>
These are alternative names for the network, represented as a vector
of strings.  A null pointer terminates the array.

<DT><CODE>int n_addrtype</CODE>
<DD>
This is the type of the network number; this is always equal to
<CODE>AF_INET</CODE> for Internet networks.

<DT><CODE>unsigned long int n_net</CODE>
<DD>
This is the network number.  Network numbers are returned in host
byte order; see section <A HREF="libc_299.html#SEC306">Byte Order Conversion</A>.
</DL>
</DL>

<P>
Use the <CODE>getnetbyname</CODE> or <CODE>getnetbyaddr</CODE> functions to search
the networks database for information about a specific network.  The
information is returned in a statically-allocated structure; you must
copy the information if you need to save it.

</P>
<P>
<DL>
<DT><U>Function:</U> struct netent * <B>getnetbyname</B> <I>(const char *<VAR>name</VAR>)</I>
<DD><A NAME="IDX1594"></A>
The <CODE>getnetbyname</CODE> function returns information about the network
named <VAR>name</VAR>.  It returns a null pointer if there is no such
network.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct netent * <B>getnetbyaddr</B> <I>(unsigned long int <VAR>net</VAR>, int <VAR>type</VAR>)</I>
<DD><A NAME="IDX1595"></A>
The <CODE>getnetbyaddr</CODE> function returns information about the network
of type <VAR>type</VAR> with number <VAR>net</VAR>.  You should specify a value of
<CODE>AF_INET</CODE> for the <VAR>type</VAR> argument for Internet networks.

</P>
<P>
<CODE>getnetbyaddr</CODE> returns a null pointer if there is no such
network.
</DL>

</P>
<P>
You can also scan the networks database using <CODE>setnetent</CODE>,
<CODE>getnetent</CODE>, and <CODE>endnetent</CODE>.  Be careful in using these
functions, because they are not reentrant.

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>setnetent</B> <I>(int <VAR>stayopen</VAR>)</I>
<DD><A NAME="IDX1596"></A>
This function opens and rewinds the networks database.

</P>
<P>
If the <VAR>stayopen</VAR> argument is nonzero, this sets a flag so that
subsequent calls to <CODE>getnetbyname</CODE> or <CODE>getnetbyaddr</CODE> will
not close the database (as they usually would).  This makes for more
efficiency if you call those functions several times, by avoiding
reopening the database for each call.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct netent * <B>getnetent</B> <I>(void)</I>
<DD><A NAME="IDX1597"></A>
This function returns the next entry in the networks database.  It
returns a null pointer if there are no more entries.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>endnetent</B> <I>(void)</I>
<DD><A NAME="IDX1598"></A>
This function closes the networks database.
</DL>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_329.html">previous</A>, <A HREF="libc_331.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
