<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Reading Address</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_283.html">previous</A>, <A HREF="libc_285.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC291" HREF="libc_toc.html#TOC291">Reading the Address of a Socket</A></H3>

<P>
<A NAME="IDX1418"></A>
Use the function <CODE>getsockname</CODE> to examine the address of an
Internet socket.  The prototype for this function is in the header file
<TT>`sys/socket.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getsockname</B> <I>(int <VAR>socket</VAR>, struct sockaddr *<VAR>addr</VAR>, socklen_t *<VAR>length-ptr</VAR>)</I>
<DD><A NAME="IDX1419"></A>
The <CODE>getsockname</CODE> function returns information about the
address of the socket <VAR>socket</VAR> in the locations specified by the
<VAR>addr</VAR> and <VAR>length-ptr</VAR> arguments.  Note that the
<VAR>length-ptr</VAR> is a pointer; you should initialize it to be the
allocation size of <VAR>addr</VAR>, and on return it contains the actual
size of the address data.

</P>
<P>
The format of the address data depends on the socket namespace.  The
length of the information is usually fixed for a given namespace, so
normally you can know exactly how much space is needed and can provide
that much.  The usual practice is to allocate a place for the value
using the proper data type for the socket's namespace, then cast its
address to <CODE>struct sockaddr *</CODE> to pass it to <CODE>getsockname</CODE>.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on error.  The
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>socket</VAR> argument is not a valid file descriptor.

<DT><CODE>ENOTSOCK</CODE>
<DD>
The descriptor <VAR>socket</VAR> is not a socket.

<DT><CODE>ENOBUFS</CODE>
<DD>
There are not enough internal buffers available for the operation.
</DL>
</DL>

<P>
You can't read the address of a socket in the file namespace.  This is
consistent with the rest of the system; in general, there's no way to
find a file's name from a descriptor for that file.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_283.html">previous</A>, <A HREF="libc_285.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
