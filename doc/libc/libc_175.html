<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Dynamic Output</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_174.html">previous</A>, <A HREF="libc_176.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC182" HREF="libc_toc.html#TOC182">Dynamically Allocating Formatted Output</A></H3>

<P>
The functions in this section do formatted output and place the results
in dynamically allocated memory.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>asprintf</B> <I>(char **<VAR>ptr</VAR>, const char *<VAR>template</VAR>, ...)</I>
<DD><A NAME="IDX833"></A>
This function is similar to <CODE>sprintf</CODE>, except that it dynamically
allocates a string (as with <CODE>malloc</CODE>; see section <A HREF="libc_22.html#SEC22">Unconstrained Allocation</A>) to hold the output, instead of putting the output in a
buffer you allocate in advance.  The <VAR>ptr</VAR> argument should be the
address of a <CODE>char *</CODE> object, and <CODE>asprintf</CODE> stores a pointer
to the newly allocated string at that location.

</P>
<P>
Here is how to use <CODE>asprintf</CODE> to get the same result as the
<CODE>snprintf</CODE> example, but more easily:

</P>

<PRE>
/* Construct a message describing the value of a variable
   whose name is <VAR>name</VAR> and whose value is <VAR>value</VAR>. */
char *
make_message (char *name, char *value)
{
  char *result;
  asprintf (&#38;result, "value of %s is %s", name, value);
  return result;
}
</PRE>

</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>obstack_printf</B> <I>(struct obstack *<VAR>obstack</VAR>, const char *<VAR>template</VAR>, ...)</I>
<DD><A NAME="IDX834"></A>
This function is similar to <CODE>asprintf</CODE>, except that it uses the
obstack <VAR>obstack</VAR> to allocate the space.  See section <A HREF="libc_40.html#SEC40">Obstacks</A>.

</P>
<P>
The characters are written onto the end of the current object.
To get at them, you must finish the object with <CODE>obstack_finish</CODE>
(see section <A HREF="libc_46.html#SEC46">Growing Objects</A>).</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_174.html">previous</A>, <A HREF="libc_176.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
