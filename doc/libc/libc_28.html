<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Efficiency and Malloc</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_27.html">previous</A>, <A HREF="libc_29.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC28" HREF="libc_toc.html#TOC28">Efficiency Considerations for <CODE>malloc</CODE></A></H3>
<P>
<A NAME="IDX230"></A>

</P>

<P>
As opposed to other versions, the <CODE>malloc</CODE> in GNU libc does not
round up block sizes to powers of two, neither for large nor for small
sizes.  Neighboring chunks can be coalesced on a <CODE>free</CODE> no matter
what their size is.  This makes the implementation suitable for all
kinds of allocation patterns without generally incurring high memory
waste through fragmentation.

</P>
<P>
Very large blocks (much larger than a page) are allocated with
<CODE>mmap</CODE> (anonymous or via <CODE>/dev/zero</CODE>) by this implementation.
This has the great advantage that these chunks are returned to the
system immediately when they are freed.  Therefore, it cannot happen
that a large chunk becomes "locked" in between smaller ones and even
after calling <CODE>free</CODE> wastes memory.  The size threshold for
<CODE>mmap</CODE> to be used can be adjusted with <CODE>mallopt</CODE>.  The use of
<CODE>mmap</CODE> can also be disabled completely.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_27.html">previous</A>, <A HREF="libc_29.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
