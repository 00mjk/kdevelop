<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Resource Usage</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_409.html">previous</A>, <A HREF="libc_411.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC417" HREF="libc_toc.html#TOC417">Resource Usage</A></H2>

<P>
<A NAME="IDX2377"></A>
The function <CODE>getrusage</CODE> and the data type <CODE>struct rusage</CODE>
are used for examining the usage figures of a process.  They are declared
in <TT>`sys/resource.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getrusage</B> <I>(int <VAR>processes</VAR>, struct rusage *<VAR>rusage</VAR>)</I>
<DD><A NAME="IDX2378"></A>
This function reports the usage totals for processes specified by
<VAR>processes</VAR>, storing the information in <CODE>*<VAR>rusage</VAR></CODE>.

</P>
<P>
In most systems, <VAR>processes</VAR> has only two valid values:

</P>
<DL COMPACT>

<DT><CODE>RUSAGE_SELF</CODE>
<DD>
Just the current process.

<DT><CODE>RUSAGE_CHILDREN</CODE>
<DD>
All child processes (direct and indirect) that have terminated already.
</DL>

<P>
In the GNU system, you can also inquire about a particular child process
by specifying its process ID.

</P>
<P>
The return value of <CODE>getrusage</CODE> is zero for success, and <CODE>-1</CODE>
for failure.

</P>
<DL COMPACT>

<DT><CODE>EINVAL</CODE>
<DD>
The argument <VAR>processes</VAR> is not valid.
</DL>
</DL>

<P>
One way of getting usage figures for a particular child process is with
the function <CODE>wait4</CODE>, which returns totals for a child when it
terminates.  See section <A HREF="libc_520.html#SEC528">BSD Process Wait Functions</A>.

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct rusage</B>
<DD><A NAME="IDX2379"></A>
This data type records a collection usage amounts for various sorts of
resources.  It has the following members, and possibly others:

</P>
<DL COMPACT>

<DT><CODE>struct timeval ru_utime</CODE>
<DD>
Time spent executing user instructions.

<DT><CODE>struct timeval ru_stime</CODE>
<DD>
Time spent in operating system code on behalf of <VAR>processes</VAR>.

<DT><CODE>long int ru_maxrss</CODE>
<DD>
The maximum resident set size used, in kilobytes.  That is, the maximum
number of kilobytes that <VAR>processes</VAR> used in real memory simultaneously.

<DT><CODE>long int ru_ixrss</CODE>
<DD>
An integral value expressed in kilobytes times ticks of execution, which
indicates the amount of memory used by text that was shared with other
processes.

<DT><CODE>long int ru_idrss</CODE>
<DD>
An integral value expressed the same way, which is the amount of
unshared memory used in data.

<DT><CODE>long int ru_isrss</CODE>
<DD>
An integral value expressed the same way, which is the amount of
unshared memory used in stack space.

<DT><CODE>long int ru_minflt</CODE>
<DD>
The number of page faults which were serviced without requiring any I/O.

<DT><CODE>long int ru_majflt</CODE>
<DD>
The number of page faults which were serviced by doing I/O.

<DT><CODE>long int ru_nswap</CODE>
<DD>
The number of times <VAR>processes</VAR> was swapped entirely out of main memory.

<DT><CODE>long int ru_inblock</CODE>
<DD>
The number of times the file system had to read from the disk on behalf
of <VAR>processes</VAR>.

<DT><CODE>long int ru_oublock</CODE>
<DD>
The number of times the file system had to write to the disk on behalf
of <VAR>processes</VAR>.

<DT><CODE>long int ru_msgsnd</CODE>
<DD>
Number of IPC messages sent.

<DT><CODE>long ru_msgrcv</CODE>
<DD>
Number of IPC messages received.

<DT><CODE>long int ru_nsignals</CODE>
<DD>
Number of signals received.

<DT><CODE>long int ru_nvcsw</CODE>
<DD>
The number of times <VAR>processes</VAR> voluntarily invoked a context switch
(usually to wait for some service).

<DT><CODE>long int ru_nivcsw</CODE>
<DD>
The number of times an involuntary context switch took place (because
the time slice expired, or another process of higher priority became
runnable).
</DL>
</DL>

<P>
An additional historical function for examining usage figures,
<CODE>vtimes</CODE>, is supported but not documented here.  It is declared in
<TT>`sys/vtimes.h'</TT>.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_409.html">previous</A>, <A HREF="libc_411.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
