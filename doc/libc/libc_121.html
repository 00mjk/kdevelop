<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Array Search Function</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_120.html">previous</A>, <A HREF="libc_122.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC128" HREF="libc_toc.html#TOC128">Array Search Function</A></H2>
<P>
<A NAME="IDX695"></A>
<A NAME="IDX696"></A>
<A NAME="IDX697"></A>

</P>
<P>
Generally searching for a specific element in an array means that
potentially all elements must be checked.  The GNU C library contains
functions to perform linear search.  The prototypes for the following
two functions can be found in <TT>`search.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> void * <B>lfind</B> <I>(const void *<VAR>key</VAR>, void *<VAR>base</VAR>, size_t *<VAR>nmemb</VAR>, size_t <VAR>size</VAR>, comparison_fn_t <VAR>compar</VAR>)</I>
<DD><A NAME="IDX698"></A>
The <CODE>lfind</CODE> function searches in the array with <CODE>*<VAR>nmemb</VAR></CODE>
elements of <VAR>size</VAR> bytes pointed to by <VAR>base</VAR> for an element
which matches the one pointed to by <VAR>key</VAR>.  The function pointed to
by <VAR>compar</VAR> is used decide whether two elements match.

</P>
<P>
The return value is a pointer to the matching element in the array
starting at <VAR>base</VAR> if it is found.  If no matching element is
available <CODE>NULL</CODE> is returned.

</P>
<P>
The mean runtime of this function is <CODE>*<VAR>nmemb</VAR></CODE>/2.  This
function should only be used elements often get added to or deleted from
the array in which case it might not be useful to sort the array before
searching.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void * <B>lsearch</B> <I>(const void *<VAR>key</VAR>, void *<VAR>base</VAR>, size_t *<VAR>nmemb</VAR>, size_t <VAR>size</VAR>, comparison_fn_t <VAR>compar</VAR>)</I>
<DD><A NAME="IDX699"></A>
The <CODE>lsearch</CODE> function is similar to the <CODE>lfind</CODE> function.  It
searches the given array for an element and returns it if found.  The
difference is that if no matching element is found the <CODE>lsearch</CODE>
function adds the object pointed to by <VAR>key</VAR> (with a size of
<VAR>size</VAR> bytes) at the end of the array and it increments the value of
<CODE>*<VAR>nmemb</VAR></CODE> to reflect this addition.

</P>
<P>
This means for the caller that if it is not sure that the array contains
the element one is searching for the memory allocated for the array
starting at <VAR>base</VAR> must have room for at least <VAR>size</VAR> more
bytes.  If one is sure the element is in the array it is better to use
<CODE>lfind</CODE> so having more room in the array is always necessary when
calling <CODE>lsearch</CODE>.
</DL>

</P>
<P>
To search a sorted array for an element matching the key, use the
<CODE>bsearch</CODE> function.  The prototype for this function is in
the header file <TT>`stdlib.h'</TT>.
<A NAME="IDX700"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> void * <B>bsearch</B> <I>(const void *<VAR>key</VAR>, const void *<VAR>array</VAR>, size_t <VAR>count</VAR>, size_t <VAR>size</VAR>, comparison_fn_t <VAR>compare</VAR>)</I>
<DD><A NAME="IDX701"></A>
The <CODE>bsearch</CODE> function searches the sorted array <VAR>array</VAR> for an object
that is equivalent to <VAR>key</VAR>.  The array contains <VAR>count</VAR> elements,
each of which is of size <VAR>size</VAR> bytes.

</P>
<P>
The <VAR>compare</VAR> function is used to perform the comparison.  This
function is called with two pointer arguments and should return an
integer less than, equal to, or greater than zero corresponding to
whether its first argument is considered less than, equal to, or greater
than its second argument.  The elements of the <VAR>array</VAR> must already
be sorted in ascending order according to this comparison function.

</P>
<P>
The return value is a pointer to the matching array element, or a null
pointer if no match is found.  If the array contains more than one element
that matches, the one that is returned is unspecified.

</P>
<P>
This function derives its name from the fact that it is implemented
using the binary search algorithm.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_120.html">previous</A>, <A HREF="libc_122.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
