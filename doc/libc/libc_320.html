<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Sending Datagrams</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_319.html">previous</A>, <A HREF="libc_321.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC327" HREF="libc_toc.html#TOC327">Sending Datagrams</A></H3>
<P>
<A NAME="IDX1572"></A>
<A NAME="IDX1573"></A>
<A NAME="IDX1574"></A>

</P>
<P>
<A NAME="IDX1575"></A>
The normal way of sending data on a datagram socket is by using the
<CODE>sendto</CODE> function, declared in <TT>`sys/socket.h'</TT>.

</P>
<P>
You can call <CODE>connect</CODE> on a datagram socket, but this only
specifies a default destination for further data transmission on the
socket.  When a socket has a default destination, then you can use
<CODE>send</CODE> (see section <A HREF="libc_313.html#SEC320">Sending Data</A>) or even <CODE>write</CODE> (see section <A HREF="libc_216.html#SEC223">Input and Output Primitives</A>) to send a packet there.  You can cancel the default
destination by calling <CODE>connect</CODE> using an address format of
<CODE>AF_UNSPEC</CODE> in the <VAR>addr</VAR> argument.  See section <A HREF="libc_308.html#SEC315">Making a Connection</A>, for
more information about the <CODE>connect</CODE> function.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>sendto</B> <I>(int <VAR>socket</VAR>, void *<VAR>buffer</VAR>. size_t <VAR>size</VAR>, int <VAR>flags</VAR>, struct sockaddr *<VAR>addr</VAR>, socklen_t <VAR>length</VAR>)</I>
<DD><A NAME="IDX1576"></A>
The <CODE>sendto</CODE> function transmits the data in the <VAR>buffer</VAR>
through the socket <VAR>socket</VAR> to the destination address specified
by the <VAR>addr</VAR> and <VAR>length</VAR> arguments.  The <VAR>size</VAR> argument
specifies the number of bytes to be transmitted.

</P>
<P>
The <VAR>flags</VAR> are interpreted the same way as for <CODE>send</CODE>; see
section <A HREF="libc_315.html#SEC322">Socket Data Options</A>.

</P>
<P>
The return value and error conditions are also the same as for
<CODE>send</CODE>, but you cannot rely on the system to detect errors and
report them; the most common error is that the packet is lost or there
is no one at the specified address to receive it, and the operating
system on your machine usually does not know this.

</P>
<P>
It is also possible for one call to <CODE>sendto</CODE> to report an error
due to a problem related to a previous call.

</P>
<P>
This function is defined as a cancelation point in multi-threaded
programs.  So one has to be prepared for this and make sure that
possibly allocated resources (like memory, files descriptors,
semaphores or whatever) are freed even if the thread is canceled.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_319.html">previous</A>, <A HREF="libc_321.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
