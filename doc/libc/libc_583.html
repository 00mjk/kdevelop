<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Host Identification</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_582.html">previous</A>, <A HREF="libc_584.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC591" HREF="libc_toc.html#TOC591">Host Identification</A></H2>

<P>
This section explains how to identify the particular machine that your
program is running on.  The identification of a machine consists of its
Internet host name and Internet address; see section <A HREF="libc_290.html#SEC297">The Internet Namespace</A>.
The host name should always be a fully qualified domain name, like
<SAMP>`crispy-wheats-n-chicken.ai.mit.edu'</SAMP>, not a simple name like
just <SAMP>`crispy-wheats-n-chicken'</SAMP>.

</P>
<P>
<A NAME="IDX3033"></A>
<A NAME="IDX3034"></A>
<A NAME="IDX3035"></A>
Prototypes for these functions appear in <TT>`unistd.h'</TT>.  The shell
commands <CODE>hostname</CODE> and <CODE>hostid</CODE> work by calling them.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>gethostname</B> <I>(char *<VAR>name</VAR>, size_t <VAR>size</VAR>)</I>
<DD><A NAME="IDX3036"></A>
This function returns the name of the host machine in the array
<VAR>name</VAR>.  The <VAR>size</VAR> argument specifies the size of this array,
in bytes.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.  In
the GNU C library, <CODE>gethostname</CODE> fails if <VAR>size</VAR> is not large
enough; then you can try again with a larger array.  The following
<CODE>errno</CODE> error condition is defined for this function:

</P>
<DL COMPACT>

<DT><CODE>ENAMETOOLONG</CODE>
<DD>
The <VAR>size</VAR> argument is less than the size of the host name plus one.
</DL>

<P>
<A NAME="IDX3037"></A>
On some systems, there is a symbol for the maximum possible host name
length: <CODE>MAXHOSTNAMELEN</CODE>.  It is defined in <TT>`sys/param.h'</TT>.
But you can't count on this to exist, so it is cleaner to handle
failure and try again.

</P>
<P>
<CODE>gethostname</CODE> stores the beginning of the host name in <VAR>name</VAR>
even if the host name won't entirely fit.  For some purposes, a
truncated host name is good enough.  If it is, you can ignore the
error code.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>sethostname</B> <I>(const char *<VAR>name</VAR>, size_t <VAR>length</VAR>)</I>
<DD><A NAME="IDX3038"></A>
The <CODE>sethostname</CODE> function sets the name of the host machine to
<VAR>name</VAR>, a string with length <VAR>length</VAR>.  Only privileged
processes are allowed to do this.  Usually it happens just once, at
system boot time.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.
The following <CODE>errno</CODE> error condition is defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EPERM</CODE>
<DD>
This process cannot set the host name because it is not privileged.
</DL>
</DL>

<P>
<DL>
<DT><U>Function:</U> long int <B>gethostid</B> <I>(void)</I>
<DD><A NAME="IDX3039"></A>
This function returns the "host ID" of the machine the program is
running on.  By convention, this is usually the primary Internet address
of that machine, converted to a <CODE>long int</CODE>.  However, some
systems it is a meaningless but unique number which is hard-coded for
each machine.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>sethostid</B> <I>(long int <VAR>id</VAR>)</I>
<DD><A NAME="IDX3040"></A>
The <CODE>sethostid</CODE> function sets the "host ID" of the host machine
to <VAR>id</VAR>.  Only privileged processes are allowed to do this.  Usually
it happens just once, at system boot time.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.
The following <CODE>errno</CODE> error condition is defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EPERM</CODE>
<DD>
This process cannot set the host name because it is not privileged.

<DT><CODE>ENOSYS</CODE>
<DD>
The operating system does not support setting the host ID.  On some
systems, the host ID is a meaningless but unique number hard-coded for
each machine.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_582.html">previous</A>, <A HREF="libc_584.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
