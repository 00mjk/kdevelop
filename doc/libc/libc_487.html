<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Argp Helper Functions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_486.html">previous</A>, <A HREF="libc_488.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC495" HREF="libc_toc.html#TOC495">Functions For Use in Argp Parsers</A></H4>

<P>
Argp provides a number of functions for the user of argp parser
functions (see section <A HREF="libc_485.html#SEC493">Argp Parser Functions</A>), mostly for producing error
messages.  These take as their first argument the <VAR>state</VAR> argument
to the parser function (see section <A HREF="libc_488.html#SEC496">Argp Parsing State</A>).

</P>
<P>
<A NAME="IDX2667"></A>
<DL>
<DT><U>Function:</U> void <B>argp_usage</B> <I>(const struct argp_state *<VAR>state</VAR>)</I>
<DD><A NAME="IDX2668"></A>
Output the standard usage message for the argp parser referred to by
<VAR>state</VAR> to <CODE><VAR>state</VAR>-&#62;err_stream</CODE> and terminate the program
with <CODE>exit (argp_err_exit_status)</CODE> (see section <A HREF="libc_481.html#SEC489">Argp Global Variables</A>).
</DL>

</P>
<P>
<A NAME="IDX2669"></A>
<DL>
<DT><U>Function:</U> void <B>argp_error</B> <I>(const struct argp_state *<VAR>state</VAR>, const char *<VAR>fmt</VAR>, ...)</I>
<DD><A NAME="IDX2670"></A>
Print the printf format string <VAR>fmt</VAR> and following args, preceded by
the program name and <SAMP>`:'</SAMP>, and followed by a <SAMP>`Try ...
--help'</SAMP> message, and terminate the program with an exit status of
<CODE>argp_err_exit_status</CODE> (see section <A HREF="libc_481.html#SEC489">Argp Global Variables</A>).
</DL>

</P>
<P>
<A NAME="IDX2671"></A>
<DL>
<DT><U>Function:</U> void <B>argp_failure</B> <I>(const struct argp_state *<VAR>state</VAR>, int <VAR>status</VAR>, int <VAR>errnum</VAR>, const char *<VAR>fmt</VAR>, ...)</I>
<DD><A NAME="IDX2672"></A>
Similarly to the standard gnu error-reporting function <CODE>error</CODE>,
print the printf format string <VAR>fmt</VAR> and following args, preceded by
the program name and <SAMP>`:'</SAMP>, and followed by the standard unix error
text for <VAR>errnum</VAR> if it is non-zero; then if <VAR>status</VAR> is
non-zero, terminate the program with that as its exit status.

</P>
<P>
The difference between this function and <CODE>argp_error</CODE> is that
<CODE>argp_error</CODE> is for <EM>parsing errors</EM>, whereas
<CODE>argp_failure</CODE> is for other problems that occur during parsing but
don't reflect a syntactic problem with the input--such as illegal
values for options, bad phase of the moon, etc.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>argp_state_help</B> <I>(const struct argp_state *<VAR>state</VAR>, FILE *<VAR>stream</VAR>, unsigned <VAR>flags</VAR>)</I>
<DD><A NAME="IDX2673"></A>
Output a help message for the argp parser referred to by <VAR>state</VAR> to
<VAR>stream</VAR>.  The <VAR>flags</VAR> argument determines what sort of help
message is produced.  See section <A HREF="libc_494.html#SEC502">Flags for the <CODE>argp_help</CODE> Function</A>.
</DL>

</P>
<P>
Error output is sent to <CODE><VAR>state</VAR>-&#62;err_stream</CODE>, and the program
name printed is <CODE><VAR>state</VAR>-&#62;name</CODE>.

</P>
<P>
The output or program termination behavior of these functions may be
suppressed if the <CODE>ARGP_NO_EXIT</CODE> or <CODE>ARGP_NO_ERRS</CODE> flags,
respectively, were passed to <CODE>argp_parse</CODE>.  See section <A HREF="libc_490.html#SEC498">Flags for <CODE>argp_parse</CODE></A>.

</P>
<P>
This behavior is useful if an argp parser is exported for use by other
programs (e.g., by a library), and may be used in a context where it is
not desirable to terminate the program in response to parsing errors.
In argp parsers intended for such general use, calls to any of these
functions should be followed by code return of an appropriate error code
for the case where the program <EM>doesn't</EM> terminate; for example:

</P>

<PRE>
if (<VAR>bad argument syntax</VAR>)
  {
     argp_usage (<VAR>state</VAR>);
     return EINVAL;
  }
</PRE>

<P>
If it's known that a parser function will only be used when
<CODE>ARGP_NO_EXIT</CODE> is not set, the return may be omitted.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_486.html">previous</A>, <A HREF="libc_488.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
