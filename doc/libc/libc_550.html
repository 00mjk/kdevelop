<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Adding another Service to NSS</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_549.html">previous</A>, <A HREF="libc_551.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC558" HREF="libc_toc.html#TOC558">Adding another Service to NSS</A></H3>

<P>
The sources for a new service need not (and should not) be part of the
GNU C Library itself.  The developer retains complete control over the
sources and its development.  The links between the C library and the
new service module consists solely of the interface functions.

</P>
<P>
Each module is designed following a specific interface specification.
For now the version is 2 (the interface in version 1 was not adequate)
and this manifests in the version number of the shared library object of
the NSS modules: they have the extension <CODE>.2</CODE>.  If the interface
changes again in an incompatible way, this number will be increased.
Modules using the old interface will still be usable.

</P>
<P>
Developers of a new service will have to make sure that their module is
created using the correct interface number.  This means the file itself
must have the correct name and on ElF systems the <STRONG>soname</STRONG> (Shared
Object Name) must also have this number.  Building a module from a bunch
of object files on an ELF system using GNU CC could be done like this:

</P>

<PRE>
gcc -shared -o libnss_NAME.so.2 -Wl,-soname,libnss_NAME.so.2 OBJECTS
</PRE>

<P>
section `Link Options' in <CITE>GNU CC</CITE>, to learn
more about this command line.

</P>
<P>
To use the new module the library must be able to find it.  This can be
achieved by using options for the dynamic linker so that it will search
directory where the binary is placed.  For an ELF system this could be
done by adding the wanted directory to the value of
<CODE>LD_LIBRARY_PATH</CODE>.

</P>
<P>
But this is not always possible since some program (those which run
under IDs which do not belong to the user) ignore this variable.
Therefore the stable version of the module should be placed into a
directory which is searched by the dynamic linker.  Normally this should
be the directory <TT>`$prefix/lib'</TT>, where <TT>`$prefix'</TT> corresponds to
the value given to configure using the <CODE>--prefix</CODE> option.  But be
careful: this should only be done if it is clear the module does not
cause any harm.  System administrators should be careful.

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_549.html">previous</A>, <A HREF="libc_551.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
