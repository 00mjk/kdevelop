<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Argp Parsing State</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_487.html">previous</A>, <A HREF="libc_489.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC496" HREF="libc_toc.html#TOC496">Argp Parsing State</A></H4>

<P>
The third argument to argp parser functions (see section <A HREF="libc_485.html#SEC493">Argp Parser Functions</A>) is a pointer to a <CODE>struct argp_state</CODE>, which contains
information about the state of the option parsing.

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct argp_state</B>
<DD><A NAME="IDX2674"></A>
This structure has the following fields, which may be modified as noted:

</P>
<DL COMPACT>

<DT><CODE>const struct argp *const root_argp</CODE>
<DD>
The top level argp parser being parsed.  Note that this is often
<EM>not</EM> the same <CODE>struct argp</CODE> passed into <CODE>argp_parse</CODE> by
the invoking program (see section <A HREF="libc_480.html#SEC487">Parsing Program Options with Argp</A>), but instead an internal argp parser
that contains options implemented by <CODE>argp_parse</CODE> itself (such as
<SAMP>`--help'</SAMP>).

<DT><CODE>int argc</CODE>
<DD>
<DT><CODE>char **argv</CODE>
<DD>
The argument vector being parsed.  May be modified.

<DT><CODE>int next</CODE>
<DD>
The index in <CODE>argv</CODE> of the next argument to be parsed.  May be modified.

One way to consume all remaining arguments in the input is to set
<CODE><VAR>state</VAR>-&#62;next = <VAR>state</VAR>-&#62;argc</CODE> (perhaps after recording
the value of the <CODE>next</CODE> field to find the consumed arguments).
Also, you can cause the current option to be re-parsed by decrementing
this field, and then modifying
<CODE><VAR>state</VAR>-&#62;argv[<VAR>state</VAR>-&#62;next]</CODE> to be the option that should
be reexamined.

<DT><CODE>unsigned flags</CODE>
<DD>
The flags supplied to <CODE>argp_parse</CODE>.  May be modified, although some
flags may only take effect when <CODE>argp_parse</CODE> is first invoked.
See section <A HREF="libc_490.html#SEC498">Flags for <CODE>argp_parse</CODE></A>.

<DT><CODE>unsigned arg_num</CODE>
<DD>
While calling a parsing function with the <VAR>key</VAR> argument
<CODE>ARGP_KEY_ARG</CODE>, this is the number of the current arg, starting at
0, and incremented after each such call returns.  At all other times,
this is the number of such arguments that have been processed.

<DT><CODE>int quoted</CODE>
<DD>
If non-zero, the index in <CODE>argv</CODE> of the first argument following a
special <SAMP>`--'</SAMP> argument (which prevents anything following being
interpreted as an option).  Only set once argument parsing has proceeded
past this point.

<DT><CODE>void *input</CODE>
<DD>
An arbitrary pointer passed in from the caller of <CODE>argp_parse</CODE>, in
the <VAR>input</VAR> argument.

<DT><CODE>void **child_inputs</CODE>
<DD>
Values to pass to child parsers.  This vector will be the same length as
the number of children in the current parser, and each child parser will
be given the value of <CODE><VAR>state</VAR>-&#62;child_inputs[<VAR>i</VAR>]</CODE> as
<EM>its</EM> <CODE><VAR>state</VAR>-&#62;input</CODE> field, where <VAR>i</VAR> is the index
of the child in the this parser's <CODE>children</CODE> field.  See section <A HREF="libc_489.html#SEC497">Combining Multiple Argp Parsers</A>.

<DT><CODE>void *hook</CODE>
<DD>
For the parser function's use.  Initialized to 0, but otherwise ignored
by argp.

<DT><CODE>char *name</CODE>
<DD>
The name used when printing messages.  This is initialized to
<CODE>argv[0]</CODE>, or <CODE>program_invocation_name</CODE> if that is
unavailable.

<DT><CODE>FILE *err_stream</CODE>
<DD>
<DT><CODE>FILE *out_stream</CODE>
<DD>
Stdio streams used when argp prints something; error messages are
printed to <CODE>err_stream</CODE>, and all other output (such as
<SAMP>`--help'</SAMP> output) to <CODE>out_stream</CODE>.  These are initialized to
<CODE>stderr</CODE> and <CODE>stdout</CODE> respectively (see section <A HREF="libc_157.html#SEC164">Standard Streams</A>).

<DT><CODE>void *pstate</CODE>
<DD>
Private, for use by the argp implementation.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_487.html">previous</A>, <A HREF="libc_489.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
