<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Character Input</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_160.html">previous</A>, <A HREF="libc_162.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC168" HREF="libc_toc.html#TOC168">Character Input</A></H2>

<P>
<A NAME="IDX796"></A>
This section describes functions for performing character-oriented input.
These functions are declared in the header file <TT>`stdio.h'</TT>.
<A NAME="IDX797"></A>

</P>
<P>
These functions return an <CODE>int</CODE> value that is either a character of
input, or the special value <CODE>EOF</CODE> (usually -1).  It is important to
store the result of these functions in a variable of type <CODE>int</CODE>
instead of <CODE>char</CODE>, even when you plan to use it only as a
character.  Storing <CODE>EOF</CODE> in a <CODE>char</CODE> variable truncates its
value to the size of a character, so that it is no longer
distinguishable from the valid character <SAMP>`(char) -1'</SAMP>.  So always
use an <CODE>int</CODE> for the result of <CODE>getc</CODE> and friends, and check
for <CODE>EOF</CODE> after the call; once you've verified that the result is
not <CODE>EOF</CODE>, you can be sure that it will fit in a <SAMP>`char'</SAMP>
variable without loss of information.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>fgetc</B> <I>(FILE *<VAR>stream</VAR>)</I>
<DD><A NAME="IDX798"></A>
This function reads the next character as an <CODE>unsigned char</CODE> from
the stream <VAR>stream</VAR> and returns its value, converted to an
<CODE>int</CODE>.  If an end-of-file condition or read error occurs,
<CODE>EOF</CODE> is returned instead.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getc</B> <I>(FILE *<VAR>stream</VAR>)</I>
<DD><A NAME="IDX799"></A>
This is just like <CODE>fgetc</CODE>, except that it is permissible (and
typical) for it to be implemented as a macro that evaluates the
<VAR>stream</VAR> argument more than once.  <CODE>getc</CODE> is often highly
optimized, so it is usually the best function to use to read a single
character.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getchar</B> <I>(void)</I>
<DD><A NAME="IDX800"></A>
The <CODE>getchar</CODE> function is equivalent to <CODE>getc</CODE> with <CODE>stdin</CODE>
as the value of the <VAR>stream</VAR> argument.
</DL>

</P>
<P>
Here is an example of a function that does input using <CODE>fgetc</CODE>.  It
would work just as well using <CODE>getc</CODE> instead, or using
<CODE>getchar ()</CODE> instead of <CODE>fgetc (stdin)</CODE>.

</P>

<PRE>
int
y_or_n_p (const char *question)
{
  fputs (question, stdout);
  while (1)
    {
      int c, answer;
      /* Write a space to separate answer from question. */
      fputc (' ', stdout);
      /* Read the first character of the line.
         This should be the answer character, but might not be. */
      c = tolower (fgetc (stdin));
      answer = c;
      /* Discard rest of input line. */
      while (c != '\n' &#38;&#38; c != EOF)
        c = fgetc (stdin);
      /* Obey the answer if it was valid. */
      if (answer == 'y')
        return 1;
      if (answer == 'n')
        return 0;
      /* Answer was invalid: ask for valid answer. */
      fputs ("Please answer y or n:", stdout);
    }
}
</PRE>

<P>
<DL>
<DT><U>Function:</U> int <B>getw</B> <I>(FILE *<VAR>stream</VAR>)</I>
<DD><A NAME="IDX801"></A>
This function reads a word (that is, an <CODE>int</CODE>) from <VAR>stream</VAR>.
It's provided for compatibility with SVID.  We recommend you use
<CODE>fread</CODE> instead (see section <A HREF="libc_166.html#SEC173">Block Input/Output</A>).  Unlike <CODE>getc</CODE>,
any <CODE>int</CODE> value could be a valid result.  <CODE>getw</CODE> returns
<CODE>EOF</CODE> when it encounters end-of-file or an error, but there is no
way to distinguish this from an input word with value -1.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_160.html">previous</A>, <A HREF="libc_162.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
