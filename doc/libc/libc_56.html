<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - GNU C Variable-Size Arrays</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_55.html">previous</A>, <A HREF="libc_57.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC56" HREF="libc_toc.html#TOC56">GNU C Variable-Size Arrays</A></H3>
<P>
<A NAME="IDX307"></A>

</P>
<P>
In GNU C, you can replace most uses of <CODE>alloca</CODE> with an array of
variable size.  Here is how <CODE>open2</CODE> would look then:

</P>

<PRE>
int open2 (char *str1, char *str2, int flags, int mode)
{
  char name[strlen (str1) + strlen (str2) + 1];
  stpcpy (stpcpy (name, str1), str2);
  return open (name, flags, mode);
}
</PRE>

<P>
But <CODE>alloca</CODE> is not always equivalent to a variable-sized array, for
several reasons:

</P>

<UL>
<LI>

A variable size array's space is freed at the end of the scope of the
name of the array.  The space allocated with <CODE>alloca</CODE>
remains until the end of the function.

<LI>

It is possible to use <CODE>alloca</CODE> within a loop, allocating an
additional block on each iteration.  This is impossible with
variable-sized arrays.
</UL>

<P>
<STRONG>Note:</STRONG> If you mix use of <CODE>alloca</CODE> and variable-sized arrays
within one function, exiting a scope in which a variable-sized array was
declared frees all blocks allocated with <CODE>alloca</CODE> during the
execution of that scope.

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_55.html">previous</A>, <A HREF="libc_57.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
