<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Local Namespace Details</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_287.html">previous</A>, <A HREF="libc_289.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC295" HREF="libc_toc.html#TOC295">Details of Local Namespace</A></H3>

<P>
<A NAME="IDX1427"></A>
To create a socket in the local namespace, use the constant
<CODE>PF_LOCAL</CODE> as the <VAR>namespace</VAR> argument to <CODE>socket</CODE> or
<CODE>socketpair</CODE>.  This constant is defined in <TT>`sys/socket.h'</TT>.

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>PF_LOCAL</B>
<DD><A NAME="IDX1428"></A>
This designates the local namespace, in which socket addresses are local
names, and its associated family of protocols.  <CODE>PF_Local</CODE> is the
macro used by Posix.1g.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>PF_UNIX</B>
<DD><A NAME="IDX1429"></A>
This is a synonym for <CODE>PF_LOCAL</CODE>, for compatibility's sake.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>PF_FILE</B>
<DD><A NAME="IDX1430"></A>
This is a synonym for <CODE>PF_LOCAL</CODE>, for compatibility's sake.
</DL>

</P>
<P>
The structure for specifying socket names in the local namespace is
defined in the header file <TT>`sys/un.h'</TT>:
<A NAME="IDX1431"></A>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct sockaddr_un</B>
<DD><A NAME="IDX1432"></A>
This structure is used to specify local namespace socket addresses.  It has
the following members:

</P>
<DL COMPACT>

<DT><CODE>short int sun_family</CODE>
<DD>
This identifies the address family or format of the socket address.
You should store the value <CODE>AF_LOCAL</CODE> to designate the local
namespace.  See section <A HREF="libc_281.html#SEC288">Socket Addresses</A>.

<DT><CODE>char sun_path[108]</CODE>
<DD>
This is the file name to use.

<STRONG>Incomplete:</STRONG>  Why is 108 a magic number?  RMS suggests making
this a zero-length array and tweaking the example following to use
<CODE>alloca</CODE> to allocate an appropriate amount of storage based on
the length of the filename.
</DL>
</DL>

<P>
You should compute the <VAR>length</VAR> parameter for a socket address in
the local namespace as the sum of the size of the <CODE>sun_family</CODE>
component and the string length (<EM>not</EM> the allocation size!) of
the file name string.  This can be done using the macro <CODE>SUN_LEN</CODE>:

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>SUN_LEN</B> <I>(<EM>struct sockaddr_un *</EM> <VAR>ptr</VAR>)</I>
<DD><A NAME="IDX1433"></A>
The macro computes the length of socket address in the local namespace.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_287.html">previous</A>, <A HREF="libc_289.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
