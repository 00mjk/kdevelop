<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Symbolic Links</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_255.html">previous</A>, <A HREF="libc_257.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC263" HREF="libc_toc.html#TOC263">Symbolic Links</A></H2>
<P>
<A NAME="IDX1228"></A>
<A NAME="IDX1229"></A>
<A NAME="IDX1230"></A>
<A NAME="IDX1231"></A>

</P>
<P>
The GNU system supports <STRONG>soft links</STRONG> or <STRONG>symbolic links</STRONG>.  This
is a kind of "file" that is essentially a pointer to another file
name.  Unlike hard links, symbolic links can be made to directories or
across file systems with no restrictions.  You can also make a symbolic
link to a name which is not the name of any file.  (Opening this link
will fail until a file by that name is created.)  Likewise, if the
symbolic link points to an existing file which is later deleted, the
symbolic link continues to point to the same file name even though the
name no longer names any file.

</P>
<P>
The reason symbolic links work the way they do is that special things
happen when you try to open the link.  The <CODE>open</CODE> function realizes
you have specified the name of a link, reads the file name contained in
the link, and opens that file name instead.  The <CODE>stat</CODE> function
likewise operates on the file that the symbolic link points to, instead
of on the link itself.

</P>
<P>
By contrast, other operations such as deleting or renaming the file
operate on the link itself.  The functions <CODE>readlink</CODE> and
<CODE>lstat</CODE> also refrain from following symbolic links, because their
purpose is to obtain information about the link.  So does <CODE>link</CODE>,
the function that makes a hard link--it makes a hard link to the
symbolic link, which one rarely wants.

</P>
<P>
Prototypes for the functions listed in this section are in
<TT>`unistd.h'</TT>.
<A NAME="IDX1232"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>symlink</B> <I>(const char *<VAR>oldname</VAR>, const char *<VAR>newname</VAR>)</I>
<DD><A NAME="IDX1233"></A>
The <CODE>symlink</CODE> function makes a symbolic link to <VAR>oldname</VAR> named
<VAR>newname</VAR>.

</P>
<P>
The normal return value from <CODE>symlink</CODE> is <CODE>0</CODE>.  A return value
of <CODE>-1</CODE> indicates an error.  In addition to the usual file name
syntax errors (see section <A HREF="libc_153.html#SEC160">File Name Errors</A>), the following <CODE>errno</CODE>
error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EEXIST</CODE>
<DD>
There is already an existing file named <VAR>newname</VAR>.

<DT><CODE>EROFS</CODE>
<DD>
The file <VAR>newname</VAR> would exist on a read-only file system.

<DT><CODE>ENOSPC</CODE>
<DD>
The directory or file system cannot be extended to make the new link.

<DT><CODE>EIO</CODE>
<DD>
A hardware error occurred while reading or writing data on the disk.

</DL>
</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>readlink</B> <I>(const char *<VAR>filename</VAR>, char *<VAR>buffer</VAR>, size_t <VAR>size</VAR>)</I>
<DD><A NAME="IDX1234"></A>
The <CODE>readlink</CODE> function gets the value of the symbolic link
<VAR>filename</VAR>.  The file name that the link points to is copied into
<VAR>buffer</VAR>.  This file name string is <EM>not</EM> null-terminated;
<CODE>readlink</CODE> normally returns the number of characters copied.  The
<VAR>size</VAR> argument specifies the maximum number of characters to copy,
usually the allocation size of <VAR>buffer</VAR>.

</P>
<P>
If the return value equals <VAR>size</VAR>, you cannot tell whether or not
there was room to return the entire name.  So make a bigger buffer and
call <CODE>readlink</CODE> again.  Here is an example:

</P>

<PRE>
char *
readlink_malloc (char *filename)
{
  int size = 100;

  while (1)
    {
      char *buffer = (char *) xmalloc (size);
      int nchars = readlink (filename, buffer, size);
      if (nchars &#60; size)
        return buffer;
      free (buffer);
      size *= 2;
    }
}
</PRE>

<P>
A value of <CODE>-1</CODE> is returned in case of error.  In addition to the
usual file name errors (see section <A HREF="libc_153.html#SEC160">File Name Errors</A>), the following
<CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EINVAL</CODE>
<DD>
The named file is not a symbolic link.

<DT><CODE>EIO</CODE>
<DD>
A hardware error occurred while reading or writing data on the disk.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_255.html">previous</A>, <A HREF="libc_257.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
