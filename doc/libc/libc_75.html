<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Envz Functions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_74.html">previous</A>, <A HREF="libc_76.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC75" HREF="libc_toc.html#TOC75">Envz Functions</A></H3>

<P>
Envz vectors are just argz vectors with additional constraints on the form
of each element; as such, argz functions can also be used on them, where it
makes sense.

</P>
<P>
Each element in an envz vector is a name-value pair, separated by a <CODE>'='</CODE>
character; if multiple <CODE>'='</CODE> characters are present in an element, those
after the first are considered part of the value, and treated like all other
non-<CODE>'\0'</CODE> characters.

</P>
<P>
If <EM>no</EM> <CODE>'='</CODE> characters are present in an element, that element is
considered the name of a "null" entry, as distinct from an entry with an
empty value: <CODE>envz_get</CODE> will return <CODE>0</CODE> if given the name of null
entry, whereas an entry with an empty value would result in a value of
<CODE>""</CODE>; <CODE>envz_entry</CODE> will still find such entries, however.  Null
entries can be removed with <CODE>envz_strip</CODE> function.

</P>
<P>
As with argz functions, envz functions that may allocate memory (and thus
fail) have a return type of <CODE>error_t</CODE>, and return either <CODE>0</CODE> or
<CODE>ENOMEM</CODE>.

</P>
<P>
<A NAME="IDX497"></A>
These functions are declared in the standard include file <TT>`envz.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> char * <B>envz_entry</B> <I>(const char *<VAR>envz</VAR>, size_t <VAR>envz_len</VAR>, const char *<VAR>name</VAR>)</I>
<DD><A NAME="IDX498"></A>
The <CODE>envz_entry</CODE> function finds the entry in <VAR>envz</VAR> with the name
<VAR>name</VAR>, and returns a pointer to the whole entry--that is, the argz
element which begins with <VAR>name</VAR> followed by a <CODE>'='</CODE> character.  If
there is no entry with that name, <CODE>0</CODE> is returned.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> char * <B>envz_get</B> <I>(const char *<VAR>envz</VAR>, size_t <VAR>envz_len</VAR>, const char *<VAR>name</VAR>)</I>
<DD><A NAME="IDX499"></A>
The <CODE>envz_get</CODE> function finds the entry in <VAR>envz</VAR> with the name
<VAR>name</VAR> (like <CODE>envz_entry</CODE>), and returns a pointer to the value
portion of that entry (following the <CODE>'='</CODE>).  If there is no entry with
that name (or only a null entry), <CODE>0</CODE> is returned.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> error_t <B>envz_add</B> <I>(char **<VAR>envz</VAR>, size_t *<VAR>envz_len</VAR>, const char *<VAR>name</VAR>, const char *<VAR>value</VAR>)</I>
<DD><A NAME="IDX500"></A>
The <CODE>envz_add</CODE> function adds an entry to <CODE>*<VAR>envz</VAR></CODE>
(updating <CODE>*<VAR>envz</VAR></CODE> and <CODE>*<VAR>envz_len</VAR></CODE>) with the name
<VAR>name</VAR>, and value <VAR>value</VAR>.  If an entry with the same name
already exists in <VAR>envz</VAR>, it is removed first.  If <VAR>value</VAR> is
<CODE>0</CODE>, then the new entry will the special null type of entry
(mentioned above).
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> error_t <B>envz_merge</B> <I>(char **<VAR>envz</VAR>, size_t *<VAR>envz_len</VAR>, const char *<VAR>envz2</VAR>, size_t <VAR>envz2_len</VAR>, int <VAR>override</VAR>)</I>
<DD><A NAME="IDX501"></A>
The <CODE>envz_merge</CODE> function adds each entry in <VAR>envz2</VAR> to <VAR>envz</VAR>,
as if with <CODE>envz_add</CODE>, updating <CODE>*<VAR>envz</VAR></CODE> and
<CODE>*<VAR>envz_len</VAR></CODE>.  If <VAR>override</VAR> is true, then values in <VAR>envz2</VAR>
will supersede those with the same name in <VAR>envz</VAR>, otherwise not.

</P>
<P>
Null entries are treated just like other entries in this respect, so a null
entry in <VAR>envz</VAR> can prevent an entry of the same name in <VAR>envz2</VAR> from
being added to <VAR>envz</VAR>, if <VAR>override</VAR> is false.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>envz_strip</B> <I>(char **<VAR>envz</VAR>, size_t *<VAR>envz_len</VAR>)</I>
<DD><A NAME="IDX502"></A>
The <CODE>envz_strip</CODE> function removes any null entries from <VAR>envz</VAR>,
updating <CODE>*<VAR>envz</VAR></CODE> and <CODE>*<VAR>envz_len</VAR></CODE>.
</DL>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_74.html">previous</A>, <A HREF="libc_76.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
