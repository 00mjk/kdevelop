<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Creating a Socket</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_303.html">previous</A>, <A HREF="libc_305.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC311" HREF="libc_toc.html#TOC311">Creating a Socket</A></H3>
<P>
<A NAME="IDX1526"></A>
<A NAME="IDX1527"></A>
<A NAME="IDX1528"></A>

</P>
<P>
The primitive for creating a socket is the <CODE>socket</CODE> function,
declared in <TT>`sys/socket.h'</TT>.
<A NAME="IDX1529"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>socket</B> <I>(int <VAR>namespace</VAR>, int <VAR>style</VAR>, int <VAR>protocol</VAR>)</I>
<DD><A NAME="IDX1530"></A>
This function creates a socket and specifies communication style
<VAR>style</VAR>, which should be one of the socket styles listed in
section <A HREF="libc_280.html#SEC287">Communication Styles</A>.  The <VAR>namespace</VAR> argument specifies
the namespace; it must be <CODE>PF_LOCAL</CODE> (see section <A HREF="libc_286.html#SEC293">The Local Namespace</A>) or
<CODE>PF_INET</CODE> (see section <A HREF="libc_290.html#SEC297">The Internet Namespace</A>).  <VAR>protocol</VAR>
designates the specific protocol (see section <A HREF="libc_279.html#SEC286">Socket Concepts</A>); zero is
usually right for <VAR>protocol</VAR>.

</P>
<P>
The return value from <CODE>socket</CODE> is the file descriptor for the new
socket, or <CODE>-1</CODE> in case of error.  The following <CODE>errno</CODE> error
conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EPROTONOSUPPORT</CODE>
<DD>
The <VAR>protocol</VAR> or <VAR>style</VAR> is not supported by the
<VAR>namespace</VAR> specified.

<DT><CODE>EMFILE</CODE>
<DD>
The process already has too many file descriptors open.

<DT><CODE>ENFILE</CODE>
<DD>
The system already has too many file descriptors open.

<DT><CODE>EACCESS</CODE>
<DD>
The process does not have privilege to create a socket of the specified
<VAR>style</VAR> or <VAR>protocol</VAR>.

<DT><CODE>ENOBUFS</CODE>
<DD>
The system ran out of internal buffer space.
</DL>

<P>
The file descriptor returned by the <CODE>socket</CODE> function supports both
read and write operations.  But, like pipes, sockets do not support file
positioning operations.
</DL>

</P>
<P>
For examples of how to call the <CODE>socket</CODE> function,
see section <A HREF="libc_289.html#SEC296">Example of Local-Namespace Sockets</A>, or section <A HREF="libc_301.html#SEC308">Internet Socket Example</A>.

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_303.html">previous</A>, <A HREF="libc_305.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
