<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Reading Persona</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_556.html">previous</A>, <A HREF="libc_558.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC565" HREF="libc_toc.html#TOC565">Reading the Persona of a Process</A></H2>

<P>
Here are detailed descriptions of the functions for reading the user and
group IDs of a process, both real and effective.  To use these
facilities, you must include the header files <TT>`sys/types.h'</TT> and
<TT>`unistd.h'</TT>.
<A NAME="IDX2913"></A>
<A NAME="IDX2914"></A>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>uid_t</B>
<DD><A NAME="IDX2915"></A>
This is an integer data type used to represent user IDs.  In the GNU
library, this is an alias for <CODE>unsigned int</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>gid_t</B>
<DD><A NAME="IDX2916"></A>
This is an integer data type used to represent group IDs.  In the GNU
library, this is an alias for <CODE>unsigned int</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> uid_t <B>getuid</B> <I>(void)</I>
<DD><A NAME="IDX2917"></A>
The <CODE>getuid</CODE> function returns the real user ID of the process.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> gid_t <B>getgid</B> <I>(void)</I>
<DD><A NAME="IDX2918"></A>
The <CODE>getgid</CODE> function returns the real group ID of the process.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> uid_t <B>geteuid</B> <I>(void)</I>
<DD><A NAME="IDX2919"></A>
The <CODE>geteuid</CODE> function returns the effective user ID of the process.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> gid_t <B>getegid</B> <I>(void)</I>
<DD><A NAME="IDX2920"></A>
The <CODE>getegid</CODE> function returns the effective group ID of the process.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>getgroups</B> <I>(int <VAR>count</VAR>, gid_t *<VAR>groups</VAR>)</I>
<DD><A NAME="IDX2921"></A>
The <CODE>getgroups</CODE> function is used to inquire about the supplementary
group IDs of the process.  Up to <VAR>count</VAR> of these group IDs are
stored in the array <VAR>groups</VAR>; the return value from the function is
the number of group IDs actually stored.  If <VAR>count</VAR> is smaller than
the total number of supplementary group IDs, then <CODE>getgroups</CODE>
returns a value of <CODE>-1</CODE> and <CODE>errno</CODE> is set to <CODE>EINVAL</CODE>.

</P>
<P>
If <VAR>count</VAR> is zero, then <CODE>getgroups</CODE> just returns the total
number of supplementary group IDs.  On systems that do not support
supplementary groups, this will always be zero.

</P>
<P>
Here's how to use <CODE>getgroups</CODE> to read all the supplementary group
IDs:

</P>

<PRE>
gid_t *
read_all_groups (void)
{
  int ngroups = getgroups (0, NULL);
  gid_t *groups
    = (gid_t *) xmalloc (ngroups * sizeof (gid_t));
  int val = getgroups (ngroups, groups);
  if (val &#60; 0)
    {
      free (groups);
      return NULL;
    }
  return groups;
}
</PRE>

</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_556.html">previous</A>, <A HREF="libc_558.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
