<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Hierarchy Conventions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_645.html">previous</A>, <A HREF="libc_647.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC654" HREF="libc_toc.html#TOC654">Layout of the <TT>`sysdeps'</TT> Directory Hierarchy</A></H3>

<P>
A GNU configuration name has three parts: the CPU type, the
manufacturer's name, and the operating system.  <TT>`configure'</TT> uses
these to pick the list of system-dependent directories to look for.  If
the <SAMP>`--nfp'</SAMP> option is <EM>not</EM> passed to <TT>`configure'</TT>, the
directory <TT>`<VAR>machine</VAR>/fpu'</TT> is also used.  The operating system
often has a <STRONG>base operating system</STRONG>; for example, if the operating
system is <SAMP>`Linux'</SAMP>, the base operating system is <SAMP>`unix/sysv'</SAMP>.
The algorithm used to pick the list of directories is simple:
<TT>`configure'</TT> makes a list of the base operating system,
manufacturer, CPU type, and operating system, in that order.  It then
concatenates all these together with slashes in between, to produce a
directory name; for example, the configuration <SAMP>`i686-linux-gnu'</SAMP>
results in <TT>`unix/sysv/linux/i386/i686'</TT>.  <TT>`configure'</TT> then
tries removing each element of the list in turn, so
<TT>`unix/sysv/linux'</TT> and <TT>`unix/sysv'</TT> are also tried, among others.
Since the precise version number of the operating system is often not
important, and it would be very inconvenient, for example, to have
identical <TT>`irix6.2'</TT> and <TT>`irix6.3'</TT> directories,
<TT>`configure'</TT> tries successively less specific operating system names
by removing trailing suffixes starting with a period.

</P>
<P>
As an example, here is the complete list of directories that would be
tried for the configuration <SAMP>`i686-linux-gnu'</SAMP> (with the
<TT>`crypt'</TT> and <TT>`linuxthreads'</TT> add-on):

</P>

<PRE>
sysdeps/i386/elf
crypt/sysdeps/unix
linuxthreads/sysdeps/unix/sysv/linux
linuxthreads/sysdeps/pthread
linuxthreads/sysdeps/unix/sysv
linuxthreads/sysdeps/unix
linuxthreads/sysdeps/i386/i686
linuxthreads/sysdeps/i386
linuxthreads/sysdeps/pthread/no-cmpxchg
sysdeps/unix/sysv/linux/i386
sysdeps/unix/sysv/linux
sysdeps/gnu
sysdeps/unix/common
sysdeps/unix/mman
sysdeps/unix/inet
sysdeps/unix/sysv/i386/i686
sysdeps/unix/sysv/i386
sysdeps/unix/sysv
sysdeps/unix/i386
sysdeps/unix
sysdeps/posix
sysdeps/i386/i686
sysdeps/i386/i486
sysdeps/libm-i387/i686
sysdeps/i386/fpu
sysdeps/libm-i387
sysdeps/i386
sysdeps/wordsize-32
sysdeps/ieee754
sysdeps/libm-ieee754
sysdeps/generic
</PRE>

<P>
Different machine architectures are conventionally subdirectories at the
top level of the <TT>`sysdeps'</TT> directory tree.  For example,
<TT>`sysdeps/sparc'</TT> and <TT>`sysdeps/m68k'</TT>.  These contain
files specific to those machine architectures, but not specific to any
particular operating system.  There might be subdirectories for
specializations of those architectures, such as
<TT>`sysdeps/m68k/68020'</TT>. Code which is specific to the
floating-point coprocessor used with a particular machine should go in
<TT>`sysdeps/<VAR>machine</VAR>/fpu'</TT>.

</P>
<P>
There are a few directories at the top level of the <TT>`sysdeps'</TT>
hierarchy that are not for particular machine architectures.

</P>
<DL COMPACT>

<DT><TT>`generic'</TT>
<DD>
As described above (see section <A HREF="libc_645.html#SEC653">Porting the GNU C Library</A>), this is the subdirectory
that every configuration implicitly uses after all others.

<DT><TT>`ieee754'</TT>
<DD>
This directory is for code using the IEEE 754 floating-point format,
where the C type <CODE>float</CODE> is IEEE 754 single-precision format, and
<CODE>double</CODE> is IEEE 754 double-precision format.  Usually this
directory is referred to in the <TT>`Implies'</TT> file in a machine
architecture-specific directory, such as <TT>`m68k/Implies'</TT>.

<DT><TT>`libm-ieee754'</TT>
<DD>
This directory contains an implementation of a mathematical library
usable on platforms which use IEEE 754 conformant floating-point
arithmetic.

<DT><TT>`libm-i387'</TT>
<DD>
This is a special case.  Ideally the code should be in
<TT>`sysdeps/i386/fpu'</TT> but for various reasons it is kept aside.

<DT><TT>`posix'</TT>
<DD>
This directory contains implementations of things in the library in
terms of POSIX.1 functions.  This includes some of the POSIX.1
functions themselves.  Of course, POSIX.1 cannot be completely
implemented in terms of itself, so a configuration using just
<TT>`posix'</TT> cannot be complete.

<DT><TT>`unix'</TT>
<DD>
This is the directory for Unix-like things.  See section <A HREF="libc_647.html#SEC655">Porting the GNU C Library to Unix Systems</A>.
<TT>`unix'</TT> implies <TT>`posix'</TT>.  There are some special-purpose
subdirectories of <TT>`unix'</TT>:

<DL COMPACT>

<DT><TT>`unix/common'</TT>
<DD>
This directory is for things common to both BSD and System V release 4.
Both <TT>`unix/bsd'</TT> and <TT>`unix/sysv/sysv4'</TT> imply <TT>`unix/common'</TT>.

<DT><TT>`unix/inet'</TT>
<DD>
This directory is for <CODE>socket</CODE> and related functions on Unix systems.
<TT>`unix/inet/Subdirs'</TT> enables the <TT>`inet'</TT> top-level subdirectory.
<TT>`unix/common'</TT> implies <TT>`unix/inet'</TT>.
</DL>

<DT><TT>`mach'</TT>
<DD>
This is the directory for things based on the Mach microkernel from CMU
(including the GNU operating system).  Other basic operating systems
(VMS, for example) would have their own directories at the top level of
the <TT>`sysdeps'</TT> hierarchy, parallel to <TT>`unix'</TT> and <TT>`mach'</TT>.
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_645.html">previous</A>, <A HREF="libc_647.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
