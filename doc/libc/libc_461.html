<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Checking for Pending Signals</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_460.html">previous</A>, <A HREF="libc_462.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC468" HREF="libc_toc.html#TOC468">Checking for Pending Signals</A></H3>
<P>
<A NAME="IDX2586"></A>
<A NAME="IDX2587"></A>
<A NAME="IDX2588"></A>

</P>
<P>
You can find out which signals are pending at any time by calling
<CODE>sigpending</CODE>.  This function is declared in <TT>`signal.h'</TT>.
<A NAME="IDX2589"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>sigpending</B> <I>(sigset_t *<VAR>set</VAR>)</I>
<DD><A NAME="IDX2590"></A>
The <CODE>sigpending</CODE> function stores information about pending signals
in <VAR>set</VAR>.  If there is a pending signal that is blocked from
delivery, then that signal is a member of the returned set.  (You can
test whether a particular signal is a member of this set using
<CODE>sigismember</CODE>; see section <A HREF="libc_457.html#SEC464">Signal Sets</A>.)

</P>
<P>
The return value is <CODE>0</CODE> if successful, and <CODE>-1</CODE> on failure.
</DL>

</P>
<P>
Testing whether a signal is pending is not often useful.  Testing when
that signal is not blocked is almost certainly bad design.

</P>
<P>
Here is an example.

</P>

<PRE>
#include &#60;signal.h&#62;
#include &#60;stddef.h&#62;

sigset_t base_mask, waiting_mask;

sigemptyset (&#38;base_mask);
sigaddset (&#38;base_mask, SIGINT);
sigaddset (&#38;base_mask, SIGTSTP);

/* Block user interrupts while doing other processing. */
sigprocmask (SIG_SETMASK, &#38;base_mask, NULL);
...

/* After a while, check to see whether any signals are pending. */
sigpending (&#38;waiting_mask);
if (sigismember (&#38;waiting_mask, SIGINT)) {
  /* User has tried to kill the process. */
}
else if (sigismember (&#38;waiting_mask, SIGTSTP)) {
  /* User has tried to stop the process. */
}
</PRE>

<P>
Remember that if there is a particular signal pending for your process,
additional signals of that same type that arrive in the meantime might
be discarded.  For example, if a <CODE>SIGINT</CODE> signal is pending when
another <CODE>SIGINT</CODE> signal arrives, your program will probably only
see one of them when you unblock this signal.

</P>
<P>
<STRONG>Portability Note:</STRONG> The <CODE>sigpending</CODE> function is new in
POSIX.1.  Older systems have no equivalent facility.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_460.html">previous</A>, <A HREF="libc_462.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
