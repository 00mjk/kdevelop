<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Setting User ID</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_557.html">previous</A>, <A HREF="libc_559.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC566" HREF="libc_toc.html#TOC566">Setting the User ID</A></H2>

<P>
This section describes the functions for altering the user ID (real
and/or effective) of a process.  To use these facilities, you must
include the header files <TT>`sys/types.h'</TT> and <TT>`unistd.h'</TT>.
<A NAME="IDX2922"></A>
<A NAME="IDX2923"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>seteuid</B> <I>(uid_t <VAR>neweuid</VAR>)</I>
<DD><A NAME="IDX2924"></A>
This function sets the effective user ID of a process to <VAR>newuid</VAR>,
provided that the process is allowed to change its effective user ID.  A
privileged process (effective user ID zero) can change its effective
user ID to any legal value.  An unprivileged process with a file user ID
can change its effective user ID to its real user ID or to its file user
ID.  Otherwise, a process may not change its effective user ID at all.

</P>
<P>
The <CODE>seteuid</CODE> function returns a value of <CODE>0</CODE> to indicate
successful completion, and a value of <CODE>-1</CODE> to indicate an error.
The following <CODE>errno</CODE> error conditions are defined for this
function:

</P>
<DL COMPACT>

<DT><CODE>EINVAL</CODE>
<DD>
The value of the <VAR>newuid</VAR> argument is invalid.

<DT><CODE>EPERM</CODE>
<DD>
The process may not change to the specified ID.
</DL>

<P>
Older systems (those without the <CODE>_POSIX_SAVED_IDS</CODE> feature) do not
have this function.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>setuid</B> <I>(uid_t <VAR>newuid</VAR>)</I>
<DD><A NAME="IDX2925"></A>
If the calling process is privileged, this function sets both the real
and effective user ID of the process to <VAR>newuid</VAR>.  It also deletes
the file user ID of the process, if any.  <VAR>newuid</VAR> may be any
legal value.  (Once this has been done, there is no way to recover the
old effective user ID.)

</P>
<P>
If the process is not privileged, and the system supports the
<CODE>_POSIX_SAVED_IDS</CODE> feature, then this function behaves like
<CODE>seteuid</CODE>.

</P>
<P>
The return values and error conditions are the same as for <CODE>seteuid</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>setreuid</B> <I>(uid_t <VAR>ruid</VAR>, uid_t <VAR>euid</VAR>)</I>
<DD><A NAME="IDX2926"></A>
This function sets the real user ID of the process to <VAR>ruid</VAR> and the
effective user ID to <VAR>euid</VAR>.  If <VAR>ruid</VAR> is <CODE>-1</CODE>, it means
not to change the real user ID; likewise if <VAR>euid</VAR> is <CODE>-1</CODE>, it
means not to change the effective user ID.

</P>
<P>
The <CODE>setreuid</CODE> function exists for compatibility with 4.3 BSD Unix,
which does not support file IDs.  You can use this function to swap the
effective and real user IDs of the process.  (Privileged processes are
not limited to this particular usage.)  If file IDs are supported, you
should use that feature instead of this function.  See section <A HREF="libc_560.html#SEC568">Enabling and Disabling Setuid Access</A>.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.
The following <CODE>errno</CODE> error conditions are defined for this
function:

</P>
<DL COMPACT>

<DT><CODE>EPERM</CODE>
<DD>
The process does not have the appropriate privileges; you do not
have permission to change to the specified ID.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_557.html">previous</A>, <A HREF="libc_559.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
