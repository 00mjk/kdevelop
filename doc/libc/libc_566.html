<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - XPG Functions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_565.html">previous</A>, <A HREF="libc_567.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC574" HREF="libc_toc.html#TOC574">XPG User Accounting Database Functions</A></H3>

<P>
These functions, described in the X/Open Portability Guide, are declared
in the header file <TT>`utmpx.h'</TT>.
<A NAME="IDX2969"></A>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct utmpx</B>
<DD><A NAME="IDX2970"></A>
The <CODE>utmpx</CODE> data structure contains at least the following members:

</P>
<DL COMPACT>

<DT><CODE>short int ut_type</CODE>
<DD>
Specifies the type of login; one of <CODE>EMPTY</CODE>, <CODE>RUN_LVL</CODE>,
<CODE>BOOT_TIME</CODE>, <CODE>OLD_TIME</CODE>, <CODE>NEW_TIME</CODE>, <CODE>INIT_PROCESS</CODE>,
<CODE>LOGIN_PROCESS</CODE>, <CODE>USER_PROCESS</CODE> or <CODE>DEAD_PROCESS</CODE>.

<DT><CODE>pid_t ut_pid</CODE>
<DD>
The process ID number of the login process.

<DT><CODE>char ut_line[]</CODE>
<DD>
The device name of the tty (without <TT>`/dev/'</TT>).

<DT><CODE>char ut_id[]</CODE>
<DD>
The inittab ID of the process.

<DT><CODE>char ut_user[]</CODE>
<DD>
The user's login name.

<DT><CODE>struct timeval ut_tv</CODE>
<DD>
Time the entry was made.  For entries of type <CODE>OLD_TIME</CODE> this is
the time when the system clock changed, and for entries of type
<CODE>NEW_TIME</CODE> this is the time the system clock was set to.
</DL>
<P>
On the GNU system, <CODE>struct utmpx</CODE> is identical to <CODE>struct
utmp</CODE> except for the fact that including <TT>`utmpx.h'</TT> does not make
visible the declaration of <CODE>struct exit_status</CODE>.
</DL>

</P>
<P>
The following macros are defined for use as values for the
<CODE>ut_type</CODE> member of the <CODE>utmpx</CODE> structure.  The values are
integer constants and are, on the GNU system, identical to the
definitions in <TT>`utmp.h'</TT>.

</P>
<DL COMPACT>

<DT><CODE>EMPTY</CODE>
<DD>
<A NAME="IDX2971"></A>
 
This macro is used to indicate that the entry contains no valid user
accounting information.

<A NAME="IDX2972"></A>
<DT><CODE>RUN_LVL</CODE>
<DD>
This macro is used to identify the systems runlevel.

<A NAME="IDX2973"></A>
<DT><CODE>BOOT_TIME</CODE>
<DD>
This macro is used to identify the time of system boot.

<A NAME="IDX2974"></A>
<DT><CODE>OLD_TIME</CODE>
<DD>
This macro is used to identify the time when the system clock changed.

<A NAME="IDX2975"></A>
<DT><CODE>NEW_TIME</CODE>
<DD>
This macro is used to identify the time after the system changed.

<A NAME="IDX2976"></A>
<DT><CODE>INIT_PROCESS</CODE>
<DD>
This macro is used to identify a process spawned by the init process.

<A NAME="IDX2977"></A>
<DT><CODE>LOGIN_PROCESS</CODE>
<DD>
This macro is used to identify the session leader of a logged in user.

<A NAME="IDX2978"></A>
<DT><CODE>USER_PROCESS</CODE>
<DD>
This macro is used to identify a user process.

<A NAME="IDX2979"></A>
<DT><CODE>DEAD_PROCESS</CODE>
<DD>
This macro is used to identify a terminated process.
</DL>

<P>
The size of the <CODE>ut_line</CODE>, <CODE>ut_id</CODE> and <CODE>ut_user</CODE> arrays
can be found using the <CODE>sizeof</CODE> operator.

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>setutxent</B> <I>(void)</I>
<DD><A NAME="IDX2980"></A>
This function is similar to <CODE>setutent</CODE>.  On the GNU system it is
simply an alias for <CODE>setutent</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct utmpx * <B>getutxent</B> <I>(void)</I>
<DD><A NAME="IDX2981"></A>
The <CODE>getutxent</CODE> function is similar to <CODE>getutent</CODE>, but returns
a pointer to a <CODE>struct utmpx</CODE> instead of <CODE>struct utmp</CODE>.  On
the GNU system it simply is an alias for <CODE>getutent</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> void <B>endutxent</B> <I>(void)</I>
<DD><A NAME="IDX2982"></A>
This function is similar to <CODE>endutent</CODE>.  On the GNU system it is
simply an alias for <CODE>endutent</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct utmpx * <B>getutxid</B> <I>(const struct utmpx *<VAR>id</VAR>)</I>
<DD><A NAME="IDX2983"></A>
This function is similar to <CODE>getutid</CODE>, but uses <CODE>struct utmpx</CODE>
instead of <CODE>struct utmp</CODE>.  On the GNU system it is simply an alias
for <CODE>getutid</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct utmpx * <B>getutxline</B> <I>(const struct utmpx *<VAR>line</VAR>)</I>
<DD><A NAME="IDX2984"></A>
This function is similar to <CODE>getutid</CODE>, but uses <CODE>struct utmpx</CODE>
instead of <CODE>struct utmp</CODE>.  On the GNU system it is simply an alias
for <CODE>getutline</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> struct utmpx * <B>pututxline</B> <I>(const struct utmpx *<VAR>utmp</VAR>)</I>
<DD><A NAME="IDX2985"></A>
The <CODE>pututxline</CODE> function provides functionality identical to
<CODE>pututline</CODE>, but uses <CODE>struct utmpx</CODE> instead of <CODE>struct
utmp</CODE>.  On the GNU system <CODE>pututxline</CODE> is simply an alias for
<CODE>pututline</CODE>.
</DL>

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_565.html">previous</A>, <A HREF="libc_567.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
