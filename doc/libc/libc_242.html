<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Interrupt Input</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_241.html">previous</A>, <A HREF="libc_243.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC249" HREF="libc_toc.html#TOC249">Interrupt-Driven Input</A></H2>

<P>
<A NAME="IDX1159"></A>
If you set the <CODE>O_ASYNC</CODE> status flag on a file descriptor
(see section <A HREF="libc_236.html#SEC243">File Status Flags</A>), a <CODE>SIGIO</CODE> signal is sent whenever
input or output becomes possible on that file descriptor.  The process
or process group to receive the signal can be selected by using the
<CODE>F_SETOWN</CODE> command to the <CODE>fcntl</CODE> function.  If the file
descriptor is a socket, this also selects the recipient of <CODE>SIGURG</CODE>
signals that are delivered when out-of-band data arrives on that socket;
see section <A HREF="libc_318.html#SEC325">Out-of-Band Data</A>.  (<CODE>SIGURG</CODE> is sent in any situation
where <CODE>select</CODE> would report the socket as having an "exceptional
condition".  See section <A HREF="libc_225.html#SEC232">Waiting for Input or Output</A>.)

</P>
<P>
If the file descriptor corresponds to a terminal device, then <CODE>SIGIO</CODE>
signals are sent to the foreground process group of the terminal.
See section <A HREF="libc_522.html#SEC530">Job Control</A>.

</P>
<P>
<A NAME="IDX1160"></A>
The symbols in this section are defined in the header file
<TT>`fcntl.h'</TT>.

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>F_GETOWN</B>
<DD><A NAME="IDX1161"></A>
This macro is used as the <VAR>command</VAR> argument to <CODE>fcntl</CODE>, to
specify that it should get information about the process or process
group to which <CODE>SIGIO</CODE> signals are sent.  (For a terminal, this is
actually the foreground process group ID, which you can get using
<CODE>tcgetpgrp</CODE>; see section <A HREF="libc_539.html#SEC547">Functions for Controlling Terminal Access</A>.)

</P>
<P>
The return value is interpreted as a process ID; if negative, its
absolute value is the process group ID.

</P>
<P>
The following <CODE>errno</CODE> error condition is defined for this command:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>filedes</VAR> argument is invalid.
</DL>
</DL>

<P>
<DL>
<DT><U>Macro:</U> int <B>F_SETOWN</B>
<DD><A NAME="IDX1162"></A>
This macro is used as the <VAR>command</VAR> argument to <CODE>fcntl</CODE>, to
specify that it should set the process or process group to which
<CODE>SIGIO</CODE> signals are sent.  This command requires a third argument
of type <CODE>pid_t</CODE> to be passed to <CODE>fcntl</CODE>, so that the form of
the call is:

</P>

<PRE>
fcntl (<VAR>filedes</VAR>, F_SETOWN, <VAR>pid</VAR>)
</PRE>

<P>
The <VAR>pid</VAR> argument should be a process ID.  You can also pass a
negative number whose absolute value is a process group ID.

</P>
<P>
The return value from <CODE>fcntl</CODE> with this command is @math{-1}
in case of error and some other value if successful.  The following
<CODE>errno</CODE> error conditions are defined for this command:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>filedes</VAR> argument is invalid.

<DT><CODE>ESRCH</CODE>
<DD>
There is no process or process group corresponding to <VAR>pid</VAR>.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_241.html">previous</A>, <A HREF="libc_243.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
