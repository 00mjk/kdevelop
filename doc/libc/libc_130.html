<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Flags for Globbing</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_129.html">previous</A>, <A HREF="libc_131.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC137" HREF="libc_toc.html#TOC137">Flags for Globbing</A></H3>

<P>
This section describes the flags that you can specify in the
<VAR>flags</VAR> argument to <CODE>glob</CODE>.  Choose the flags you want,
and combine them with the C bitwise OR operator <CODE>|</CODE>.

</P>
<DL COMPACT>

<DT><CODE>GLOB_APPEND</CODE>
<DD>
Append the words from this expansion to the vector of words produced by
previous calls to <CODE>glob</CODE>.  This way you can effectively expand
several words as if they were concatenated with spaces between them.

In order for appending to work, you must not modify the contents of the
word vector structure between calls to <CODE>glob</CODE>.  And, if you set
<CODE>GLOB_DOOFFS</CODE> in the first call to <CODE>glob</CODE>, you must also
set it when you append to the results.

Note that the pointer stored in <CODE>gl_pathv</CODE> may no longer be valid
after you call <CODE>glob</CODE> the second time, because <CODE>glob</CODE> might
have relocated the vector.  So always fetch <CODE>gl_pathv</CODE> from the
<CODE>glob_t</CODE> structure after each <CODE>glob</CODE> call; <STRONG>never</STRONG> save
the pointer across calls.

<DT><CODE>GLOB_DOOFFS</CODE>
<DD>
Leave blank slots at the beginning of the vector of words.
The <CODE>gl_offs</CODE> field says how many slots to leave.
The blank slots contain null pointers.

<DT><CODE>GLOB_ERR</CODE>
<DD>
Give up right away and report an error if there is any difficulty
reading the directories that must be read in order to expand <VAR>pattern</VAR>
fully.  Such difficulties might include a directory in which you don't
have the requisite access.  Normally, <CODE>glob</CODE> tries its best to keep
on going despite any errors, reading whatever directories it can.

You can exercise even more control than this by specifying an
error-handler function <VAR>errfunc</VAR> when you call <CODE>glob</CODE>.  If
<VAR>errfunc</VAR> is not a null pointer, then <CODE>glob</CODE> doesn't give up
right away when it can't read a directory; instead, it calls
<VAR>errfunc</VAR> with two arguments, like this:


<PRE>
(*<VAR>errfunc</VAR>) (<VAR>filename</VAR>, <VAR>error-code</VAR>)
</PRE>

The argument <VAR>filename</VAR> is the name of the directory that
<CODE>glob</CODE> couldn't open or couldn't read, and <VAR>error-code</VAR> is the
<CODE>errno</CODE> value that was reported to <CODE>glob</CODE>.

If the error handler function returns nonzero, then <CODE>glob</CODE> gives up
right away.  Otherwise, it continues.

<DT><CODE>GLOB_MARK</CODE>
<DD>
If the pattern matches the name of a directory, append <SAMP>`/'</SAMP> to the
directory's name when returning it.

<DT><CODE>GLOB_NOCHECK</CODE>
<DD>
If the pattern doesn't match any file names, return the pattern itself
as if it were a file name that had been matched.  (Normally, when the
pattern doesn't match anything, <CODE>glob</CODE> returns that there were no
matches.)

<DT><CODE>GLOB_NOSORT</CODE>
<DD>
Don't sort the file names; return them in no particular order.
(In practice, the order will depend on the order of the entries in
the directory.)  The only reason <EM>not</EM> to sort is to save time.

<DT><CODE>GLOB_NOESCAPE</CODE>
<DD>
Don't treat the <SAMP>`\'</SAMP> character specially in patterns.  Normally,
<SAMP>`\'</SAMP> quotes the following character, turning off its special meaning
(if any) so that it matches only itself.  When quoting is enabled, the
pattern <SAMP>`\?'</SAMP> matches only the string <SAMP>`?'</SAMP>, because the question
mark in the pattern acts like an ordinary character.

If you use <CODE>GLOB_NOESCAPE</CODE>, then <SAMP>`\'</SAMP> is an ordinary character.

<CODE>glob</CODE> does its work by calling the function <CODE>fnmatch</CODE>
repeatedly.  It handles the flag <CODE>GLOB_NOESCAPE</CODE> by turning on the
<CODE>FNM_NOESCAPE</CODE> flag in calls to <CODE>fnmatch</CODE>.
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_129.html">previous</A>, <A HREF="libc_131.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
