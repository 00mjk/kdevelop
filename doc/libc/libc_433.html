<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Advanced Signal Handling</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_432.html">previous</A>, <A HREF="libc_434.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC440" HREF="libc_toc.html#TOC440">Advanced Signal Handling</A></H3>
<P>
<A NAME="IDX2531"></A>

</P>
<P>
The <CODE>sigaction</CODE> function has the same basic effect as
<CODE>signal</CODE>: to specify how a signal should be handled by the process.
However, <CODE>sigaction</CODE> offers more control, at the expense of more
complexity.  In particular, <CODE>sigaction</CODE> allows you to specify
additional flags to control when the signal is generated and how the
handler is invoked.

</P>
<P>
The <CODE>sigaction</CODE> function is declared in <TT>`signal.h'</TT>.
<A NAME="IDX2532"></A>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>struct sigaction</B>
<DD><A NAME="IDX2533"></A>
Structures of type <CODE>struct sigaction</CODE> are used in the
<CODE>sigaction</CODE> function to specify all the information about how to
handle a particular signal.  This structure contains at least the
following members:

</P>
<DL COMPACT>

<DT><CODE>sighandler_t sa_handler</CODE>
<DD>
This is used in the same way as the <VAR>action</VAR> argument to the
<CODE>signal</CODE> function.  The value can be <CODE>SIG_DFL</CODE>,
<CODE>SIG_IGN</CODE>, or a function pointer.  See section <A HREF="libc_432.html#SEC439">Basic Signal Handling</A>.

<DT><CODE>sigset_t sa_mask</CODE>
<DD>
This specifies a set of signals to be blocked while the handler runs.
Blocking is explained in section <A HREF="libc_460.html#SEC467">Blocking Signals for a Handler</A>.  Note that the
signal that was delivered is automatically blocked by default before its
handler is started; this is true regardless of the value in
<CODE>sa_mask</CODE>.  If you want that signal not to be blocked within its
handler, you must write code in the handler to unblock it.

<DT><CODE>int sa_flags</CODE>
<DD>
This specifies various flags which can affect the behavior of
the signal.  These are described in more detail in section <A HREF="libc_436.html#SEC443">Flags for <CODE>sigaction</CODE></A>.
</DL>
</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>sigaction</B> <I>(int <VAR>signum</VAR>, const struct sigaction *<VAR>action</VAR>, struct sigaction *<VAR>old-action</VAR>)</I>
<DD><A NAME="IDX2534"></A>
The <VAR>action</VAR> argument is used to set up a new action for the signal
<VAR>signum</VAR>, while the <VAR>old-action</VAR> argument is used to return
information about the action previously associated with this symbol.
(In other words, <VAR>old-action</VAR> has the same purpose as the
<CODE>signal</CODE> function's return value--you can check to see what the
old action in effect for the signal was, and restore it later if you
want.)

</P>
<P>
Either <VAR>action</VAR> or <VAR>old-action</VAR> can be a null pointer.  If
<VAR>old-action</VAR> is a null pointer, this simply suppresses the return
of information about the old action.  If <VAR>action</VAR> is a null pointer,
the action associated with the signal <VAR>signum</VAR> is unchanged; this
allows you to inquire about how a signal is being handled without changing
that handling.

</P>
<P>
The return value from <CODE>sigaction</CODE> is zero if it succeeds, and
<CODE>-1</CODE> on failure.  The following <CODE>errno</CODE> error conditions are
defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EINVAL</CODE>
<DD>
The <VAR>signum</VAR> argument is not valid, or you are trying to
trap or ignore <CODE>SIGKILL</CODE> or <CODE>SIGSTOP</CODE>.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_432.html">previous</A>, <A HREF="libc_434.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
