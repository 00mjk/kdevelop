<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Hard Links</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_254.html">previous</A>, <A HREF="libc_256.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC262" HREF="libc_toc.html#TOC262">Hard Links</A></H2>
<P>
<A NAME="IDX1222"></A>
<A NAME="IDX1223"></A>
<A NAME="IDX1224"></A>
<A NAME="IDX1225"></A>

</P>
<P>
In POSIX systems, one file can have many names at the same time.  All of
the names are equally real, and no one of them is preferred to the
others.

</P>
<P>
To add a name to a file, use the <CODE>link</CODE> function.  (The new name is
also called a <STRONG>hard link</STRONG> to the file.)  Creating a new link to a
file does not copy the contents of the file; it simply makes a new name
by which the file can be known, in addition to the file's existing name
or names.

</P>
<P>
One file can have names in several directories, so the organization
of the file system is not a strict hierarchy or tree.

</P>
<P>
In most implementations, it is not possible to have hard links to the
same file in multiple file systems.  <CODE>link</CODE> reports an error if you
try to make a hard link to the file from another file system when this
cannot be done.

</P>
<P>
The prototype for the <CODE>link</CODE> function is declared in the header
file <TT>`unistd.h'</TT>.
<A NAME="IDX1226"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>link</B> <I>(const char *<VAR>oldname</VAR>, const char *<VAR>newname</VAR>)</I>
<DD><A NAME="IDX1227"></A>
The <CODE>link</CODE> function makes a new link to the existing file named by
<VAR>oldname</VAR>, under the new name <VAR>newname</VAR>.

</P>
<P>
This function returns a value of <CODE>0</CODE> if it is successful and
<CODE>-1</CODE> on failure.  In addition to the usual file name errors
(see section <A HREF="libc_153.html#SEC160">File Name Errors</A>) for both <VAR>oldname</VAR> and <VAR>newname</VAR>, the
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EACCES</CODE>
<DD>
You are not allowed to write the directory in which the new link is to
be written.

<DT><CODE>EEXIST</CODE>
<DD>
There is already a file named <VAR>newname</VAR>.  If you want to replace
this link with a new link, you must remove the old link explicitly first.

<DT><CODE>EMLINK</CODE>
<DD>
There are already too many links to the file named by <VAR>oldname</VAR>.
(The maximum number of links to a file is <CODE>LINK_MAX</CODE>; see
section <A HREF="libc_595.html#SEC603">Limits on File System Capacity</A>.)

<DT><CODE>ENOENT</CODE>
<DD>
The file named by <VAR>oldname</VAR> doesn't exist.  You can't make a link to
a file that doesn't exist.

<DT><CODE>ENOSPC</CODE>
<DD>
The directory or file system that would contain the new link is full
and cannot be extended.

<DT><CODE>EPERM</CODE>
<DD>
In the GNU system and some others, you cannot make links to directories.
Many systems allow only privileged users to do so.  This error
is used to report the problem.

<DT><CODE>EROFS</CODE>
<DD>
The directory containing the new link can't be modified because it's on
a read-only file system.

<DT><CODE>EXDEV</CODE>
<DD>
The directory specified in <VAR>newname</VAR> is on a different file system
than the existing file.

<DT><CODE>EIO</CODE>
<DD>
A hardware error occurred while trying to read or write the to filesystem.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_254.html">previous</A>, <A HREF="libc_256.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
