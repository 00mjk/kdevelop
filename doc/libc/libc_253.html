<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Simple Directory Lister Mark II</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_252.html">previous</A>, <A HREF="libc_254.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC260" HREF="libc_toc.html#TOC260">Simple Program to List a Directory, Mark II</A></H3>

<P>
Here is a revised version of the directory lister found above
(see section <A HREF="libc_250.html#SEC257">Simple Program to List a Directory</A>).  Using the <CODE>scandir</CODE> function we
can avoid using the functions which directly work with the directory
contents.  After the call the found entries are available for direct
used.

</P>

<PRE>
#include &#60;stdio.h&#62;
#include &#60;dirent.h&#62;

static int
one (struct dirent *unused)
{
  return 1;
}

int
main (void)
{
  struct dirent **eps;
  int n;

  n = scandir ("./", &#38;eps, one, alphasort);
  if (n &#62;= 0)
    {
      int cnt;
      for (cnt = 0; cnt &#60; n; ++cnt)
        puts (eps[cnt]-&#62;d_name);
    }
  else
    perror ("Couldn't open the directory");

  return 0;
}
</PRE>

<P>
Please note the simple selector function for this example.  Since
we want to see all directory entries we always return <CODE>1</CODE>.

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_252.html">previous</A>, <A HREF="libc_254.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
