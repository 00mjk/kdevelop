<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Byte Order</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_298.html">previous</A>, <A HREF="libc_300.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC306" HREF="libc_toc.html#TOC306">Byte Order Conversion</A></H3>
<P>
<A NAME="IDX1501"></A>
<A NAME="IDX1502"></A>

</P>
<P>
<A NAME="IDX1503"></A>
<A NAME="IDX1504"></A>
Different kinds of computers use different conventions for the
ordering of bytes within a word.  Some computers put the most
significant byte within a word first (this is called "big-endian"
order), and others put it last ("little-endian" order).

</P>
<P>
<A NAME="IDX1505"></A>
So that machines with different byte order conventions can
communicate, the Internet protocols specify a canonical byte order
convention for data transmitted over the network.  This is known
as the <STRONG>network byte order</STRONG>.

</P>
<P>
When establishing an Internet socket connection, you must make sure that
the data in the <CODE>sin_port</CODE> and <CODE>sin_addr</CODE> members of the
<CODE>sockaddr_in</CODE> structure are represented in the network byte order.
If you are encoding integer data in the messages sent through the
socket, you should convert this to network byte order too.  If you don't
do this, your program may fail when running on or talking to other kinds
of machines.

</P>
<P>
If you use <CODE>getservbyname</CODE> and <CODE>gethostbyname</CODE> or
<CODE>inet_addr</CODE> to get the port number and host address, the values are
already in the network byte order, and you can copy them directly into
the <CODE>sockaddr_in</CODE> structure.

</P>
<P>
Otherwise, you have to convert the values explicitly.  Use <CODE>htons</CODE>
and <CODE>ntohs</CODE> to convert values for the <CODE>sin_port</CODE> member.  Use
<CODE>htonl</CODE> and <CODE>ntohl</CODE> to convert IPv4 addresses for the
<CODE>sin_addr</CODE> member.  (Remember, <CODE>struct in_addr</CODE> is equivalent
to <CODE>uint32_t</CODE>.)  These functions are declared in
<TT>`netinet/in.h'</TT>.
<A NAME="IDX1506"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> uint16_t <B>htons</B> <I>(uint16_t <VAR>hostshort</VAR>)</I>
<DD><A NAME="IDX1507"></A>
This function converts the <CODE>uint16_t</CODE> integer <VAR>hostshort</VAR> from
host byte order to network byte order.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> uint16_t <B>ntohs</B> <I>(uint16_t <VAR>netshort</VAR>)</I>
<DD><A NAME="IDX1508"></A>
This function converts the <CODE>uint16_t</CODE> integer <VAR>netshort</VAR> from
network byte order to host byte order.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> uint32_t <B>htonl</B> <I>(uint32_t <VAR>hostlong</VAR>)</I>
<DD><A NAME="IDX1509"></A>
This function converts the <CODE>uint32_t</CODE> integer <VAR>hostlong</VAR> from
host byte order to network byte order.

</P>
<P>
This is used for IPv4 internet addresses.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> uint32_t <B>ntohl</B> <I>(uint32_t <VAR>netlong</VAR>)</I>
<DD><A NAME="IDX1510"></A>
This function converts the <CODE>uint32_t</CODE> integer <VAR>netlong</VAR> from
network byte order to host byte order.

</P>
<P>
This is used for IPv4 internet addresses.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_298.html">previous</A>, <A HREF="libc_300.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
