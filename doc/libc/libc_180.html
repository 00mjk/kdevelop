<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Registering New Conversions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_179.html">previous</A>, <A HREF="libc_181.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC187" HREF="libc_toc.html#TOC187">Registering New Conversions</A></H3>

<P>
The function to register a new output conversion is
<CODE>register_printf_function</CODE>, declared in <TT>`printf.h'</TT>.
<A NAME="IDX860"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>register_printf_function</B> <I>(int <VAR>spec</VAR>, printf_function <VAR>handler-function</VAR>, printf_arginfo_function <VAR>arginfo-function</VAR>)</I>
<DD><A NAME="IDX861"></A>
This function defines the conversion specifier character <VAR>spec</VAR>.
Thus, if <VAR>spec</VAR> is <CODE>'z'</CODE>, it defines the conversion <SAMP>`%z'</SAMP>.
You can redefine the built-in conversions like <SAMP>`%s'</SAMP>, but flag
characters like <SAMP>`#'</SAMP> and type modifiers like <SAMP>`l'</SAMP> can never be
used as conversions; calling <CODE>register_printf_function</CODE> for those
characters has no effect.

</P>
<P>
The <VAR>handler-function</VAR> is the function called by <CODE>printf</CODE> and
friends when this conversion appears in a template string.
See section <A HREF="libc_182.html#SEC189">Defining the Output Handler</A>, for information about how to define
a function to pass as this argument.  If you specify a null pointer, any
existing handler function for <VAR>spec</VAR> is removed.

</P>
<P>
The <VAR>arginfo-function</VAR> is the function called by
<CODE>parse_printf_format</CODE> when this conversion appears in a
template string.  See section <A HREF="libc_177.html#SEC184">Parsing a Template String</A>, for information
about this.

</P>

<P>
<STRONG>Attention:</STRONG> In the GNU C library version before 2.0 the
<VAR>arginfo-function</VAR> function did not need to be installed unless
the user uses the <CODE>parse_printf_format</CODE> function.  This changed.
Now a call to any of the <CODE>printf</CODE> functions will call this
function when this format specifier appears in the format string.

</P>
<P>
The return value is <CODE>0</CODE> on success, and <CODE>-1</CODE> on failure
(which occurs if <VAR>spec</VAR> is out of range).

</P>
<P>
You can redefine the standard output conversions, but this is probably
not a good idea because of the potential for confusion.  Library routines
written by other people could break if you do this.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_179.html">previous</A>, <A HREF="libc_181.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
