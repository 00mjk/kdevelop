<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - TZ Variable</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_403.html">previous</A>, <A HREF="libc_405.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC411" HREF="libc_toc.html#TOC411">Specifying the Time Zone with <CODE>TZ</CODE></A></H3>

<P>
In POSIX systems, a user can specify the time zone by means of the
<CODE>TZ</CODE> environment variable.  For information about how to set
environment variables, see section <A HREF="libc_503.html#SEC511">Environment Variables</A>.  The functions
for accessing the time zone are declared in <TT>`time.h'</TT>.
<A NAME="IDX2337"></A>
<A NAME="IDX2338"></A>

</P>
<P>
You should not normally need to set <CODE>TZ</CODE>.  If the system is
configured properly, the default time zone will be correct.  You might
set <CODE>TZ</CODE> if you are using a computer over the network from a
different time zone, and would like times reported to you in the time zone
that local for you, rather than what is local for the computer.

</P>
<P>
In POSIX.1 systems the value of the <CODE>TZ</CODE> variable can be of one of
three formats.  With the GNU C library, the most common format is the
last one, which can specify a selection from a large database of time
zone information for many regions of the world.  The first two formats
are used to describe the time zone information directly, which is both
more cumbersome and less precise.  But the POSIX.1 standard only
specifies the details of the first two formats, so it is good to be
familiar with them in case you come across a POSIX.1 system that doesn't
support a time zone information database.

</P>
<P>
The first format is used when there is no Daylight Saving Time (or
summer time) in the local time zone:

</P>

<PRE>
<VAR>std</VAR> <VAR>offset</VAR>
</PRE>

<P>
The <VAR>std</VAR> string specifies the name of the time zone.  It must be
three or more characters long and must not contain a leading colon or
embedded digits, commas, or plus or minus signs.  There is no space
character separating the time zone name from the <VAR>offset</VAR>, so these
restrictions are necessary to parse the specification correctly.

</P>
<P>
The <VAR>offset</VAR> specifies the time value one must add to the local time
to get a Coordinated Universal Time value.  It has syntax like
[<CODE>+</CODE>|<CODE>-</CODE>]<VAR>hh</VAR>[<CODE>:</CODE><VAR>mm</VAR>[<CODE>:</CODE><VAR>ss</VAR>]].  This
is positive if the local time zone is west of the Prime Meridian and
negative if it is east.  The hour must be between <CODE>0</CODE> and
<CODE>23</CODE>, and the minute and seconds between <CODE>0</CODE> and <CODE>59</CODE>.

</P>
<P>
For example, here is how we would specify Eastern Standard Time, but
without any daylight saving time alternative:

</P>

<PRE>
EST+5
</PRE>

<P>
The second format is used when there is Daylight Saving Time:

</P>

<PRE>
<VAR>std</VAR> <VAR>offset</VAR> <VAR>dst</VAR> [<VAR>offset</VAR>]<CODE>,</CODE><VAR>start</VAR>[<CODE>/</CODE><VAR>time</VAR>]<CODE>,</CODE><VAR>end</VAR>[<CODE>/</CODE><VAR>time</VAR>]
</PRE>

<P>
The initial <VAR>std</VAR> and <VAR>offset</VAR> specify the standard time zone, as
described above.  The <VAR>dst</VAR> string and <VAR>offset</VAR> specify the name
and offset for the corresponding daylight saving time zone; if the
<VAR>offset</VAR> is omitted, it defaults to one hour ahead of standard time.

</P>
<P>
The remainder of the specification describes when daylight saving time is
in effect.  The <VAR>start</VAR> field is when daylight saving time goes into
effect and the <VAR>end</VAR> field is when the change is made back to standard
time.  The following formats are recognized for these fields:

</P>
<DL COMPACT>

<DT><CODE>J<VAR>n</VAR></CODE>
<DD>
This specifies the Julian day, with <VAR>n</VAR> between <CODE>1</CODE> and <CODE>365</CODE>.
February 29 is never counted, even in leap years.

<DT><CODE><VAR>n</VAR></CODE>
<DD>
This specifies the Julian day, with <VAR>n</VAR> between <CODE>0</CODE> and <CODE>365</CODE>.
February 29 is counted in leap years.

<DT><CODE>M<VAR>m</VAR>.<VAR>w</VAR>.<VAR>d</VAR></CODE>
<DD>
This specifies day <VAR>d</VAR> of week <VAR>w</VAR> of month <VAR>m</VAR>.  The day
<VAR>d</VAR> must be between <CODE>0</CODE> (Sunday) and <CODE>6</CODE>.  The week
<VAR>w</VAR> must be between <CODE>1</CODE> and <CODE>5</CODE>; week <CODE>1</CODE> is the
first week in which day <VAR>d</VAR> occurs, and week <CODE>5</CODE> specifies the
<EM>last</EM> <VAR>d</VAR> day in the month.  The month <VAR>m</VAR> should be
between <CODE>1</CODE> and <CODE>12</CODE>.
</DL>

<P>
The <VAR>time</VAR> fields specify when, in the local time currently in
effect, the change to the other time occurs.  If omitted, the default is
<CODE>02:00:00</CODE>.

</P>
<P>
For example, here is how one would specify the Eastern time zone in the
United States, including the appropriate daylight saving time and its dates
of applicability.  The normal offset from UTC is 5 hours; since this is
west of the prime meridian, the sign is positive.  Summer time begins on
the first Sunday in April at 2:00am, and ends on the last Sunday in October
at 2:00am.

</P>

<PRE>
EST+5EDT,M4.1.0/2,M10.5.0/2
</PRE>

<P>
The schedule of daylight saving time in any particular jurisdiction has
changed over the years.  To be strictly correct, the conversion of dates
and times in the past should be based on the schedule that was in effect
then.  However, this format has no facilities to let you specify how the
schedule has changed from year to year.  The most you can do is specify
one particular schedule--usually the present day schedule--and this is
used to convert any date, no matter when.  For precise time zone
specifications, it is best to use the time zone information database
(see below).

</P>
<P>
The third format looks like this:

</P>

<PRE>
:<VAR>characters</VAR>
</PRE>

<P>
Each operating system interprets this format differently; in the GNU C
library, <VAR>characters</VAR> is the name of a file which describes the time
zone.

</P>
<P>
<A NAME="IDX2339"></A>
<A NAME="IDX2340"></A>
If the <CODE>TZ</CODE> environment variable does not have a value, the
operation chooses a time zone by default.  In the GNU C library, the
default time zone is like the specification <SAMP>`TZ=:/etc/localtime'</SAMP>
(or <SAMP>`TZ=:/usr/local/etc/localtime'</SAMP>, depending on how GNU C library
was configured; see section <A HREF="libc_636.html#SEC644">Installing the GNU C Library</A>).  Other C libraries use their own
rule for choosing the default time zone, so there is little we can say
about them.

</P>
<P>
<A NAME="IDX2341"></A>
<A NAME="IDX2342"></A>
<A NAME="IDX2343"></A>
If <VAR>characters</VAR> begins with a slash, it is an absolute file name;
otherwise the library looks for the file
<TT>`/share/lib/zoneinfo/<VAR>characters</VAR>'</TT>.  The <TT>`zoneinfo'</TT>
directory contains data files describing local time zones in many
different parts of the world.  The names represent major cities, with
subdirectories for geographical areas; for example,
<TT>`America/New_York'</TT>, <TT>`Europe/London'</TT>, <TT>`Asia/Hong_Kong'</TT>.
These data files are installed by the system administrator, who also
sets <TT>`/etc/localtime'</TT> to point to the data file for the local time
zone.  The GNU C library comes with a large database of time zone
information for most regions of the world, which is maintained by a
community of volunteers and put in the public domain.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_403.html">previous</A>, <A HREF="libc_405.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
