<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Control Operations</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_232.html">previous</A>, <A HREF="libc_234.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC240" HREF="libc_toc.html#TOC240">Control Operations on Files</A></H2>

<P>
<A NAME="IDX1092"></A>
<A NAME="IDX1093"></A>
This section describes how you can perform various other operations on
file descriptors, such as inquiring about or setting flags describing
the status of the file descriptor, manipulating record locks, and the
like.  All of these operations are performed by the function <CODE>fcntl</CODE>.

</P>
<P>
The second argument to the <CODE>fcntl</CODE> function is a command that
specifies which operation to perform.  The function and macros that name
various flags that are used with it are declared in the header file
<TT>`fcntl.h'</TT>.  Many of these flags are also used by the <CODE>open</CODE>
function; see section <A HREF="libc_214.html#SEC221">Opening and Closing Files</A>.
<A NAME="IDX1094"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>fcntl</B> <I>(int <VAR>filedes</VAR>, int <VAR>command</VAR>, ...)</I>
<DD><A NAME="IDX1095"></A>
The <CODE>fcntl</CODE> function performs the operation specified by
<VAR>command</VAR> on the file descriptor <VAR>filedes</VAR>.  Some commands
require additional arguments to be supplied.  These additional arguments
and the return value and error conditions are given in the detailed
descriptions of the individual commands.

</P>
<P>
Briefly, here is a list of what the various commands are.

</P>
<DL COMPACT>

<DT><CODE>F_DUPFD</CODE>
<DD>
Duplicate the file descriptor (return another file descriptor pointing
to the same open file).  See section <A HREF="libc_234.html#SEC241">Duplicating Descriptors</A>.

<DT><CODE>F_GETFD</CODE>
<DD>
Get flags associated with the file descriptor.  See section <A HREF="libc_235.html#SEC242">File Descriptor Flags</A>.

<DT><CODE>F_SETFD</CODE>
<DD>
Set flags associated with the file descriptor.  See section <A HREF="libc_235.html#SEC242">File Descriptor Flags</A>.

<DT><CODE>F_GETFL</CODE>
<DD>
Get flags associated with the open file.  See section <A HREF="libc_236.html#SEC243">File Status Flags</A>.

<DT><CODE>F_SETFL</CODE>
<DD>
Set flags associated with the open file.  See section <A HREF="libc_236.html#SEC243">File Status Flags</A>.

<DT><CODE>F_GETLK</CODE>
<DD>
Get a file lock.  See section <A HREF="libc_241.html#SEC248">File Locks</A>.

<DT><CODE>F_SETLK</CODE>
<DD>
Set or clear a file lock.  See section <A HREF="libc_241.html#SEC248">File Locks</A>.

<DT><CODE>F_SETLKW</CODE>
<DD>
Like <CODE>F_SETLK</CODE>, but wait for completion.  See section <A HREF="libc_241.html#SEC248">File Locks</A>.

<DT><CODE>F_GETOWN</CODE>
<DD>
Get process or process group ID to receive <CODE>SIGIO</CODE> signals.
See section <A HREF="libc_242.html#SEC249">Interrupt-Driven Input</A>.

<DT><CODE>F_SETOWN</CODE>
<DD>
Set process or process group ID to receive <CODE>SIGIO</CODE> signals.
See section <A HREF="libc_242.html#SEC249">Interrupt-Driven Input</A>.
</DL>

<P>
This function is a cancelation point in multi-threaded programs.  This
is a problem if the thread allocates some resources (like memory, file
descriptors, semaphores or whatever) at the time <CODE>fcntl</CODE> is
called.  If the thread gets canceled these resources stay allocated
until the program ends.  To avoid this calls to <CODE>fcntl</CODE> should be
protected using cancelation handlers.
</DL>

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_232.html">previous</A>, <A HREF="libc_234.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
