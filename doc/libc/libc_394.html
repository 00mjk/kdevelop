<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Basic CPU Time</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_393.html">previous</A>, <A HREF="libc_395.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC401" HREF="libc_toc.html#TOC401">Basic CPU Time Inquiry</A></H3>

<P>
To get the elapsed CPU time used by a process, you can use the
<CODE>clock</CODE> function.  This facility is declared in the header file
<TT>`time.h'</TT>.
<A NAME="IDX2290"></A>

</P>
<P>
In typical usage, you call the <CODE>clock</CODE> function at the beginning and
end of the interval you want to time, subtract the values, and then divide
by <CODE>CLOCKS_PER_SEC</CODE> (the number of clock ticks per second), like this:

</P>

<PRE>
#include &#60;time.h&#62;

clock_t start, end;
double elapsed;

start = clock();
... /* Do the work. */
end = clock();
elapsed = ((double) (end - start)) / CLOCKS_PER_SEC;
</PRE>

<P>
Different computers and operating systems vary wildly in how they keep
track of processor time.  It's common for the internal processor clock
to have a resolution somewhere between hundredth and millionth of a
second.

</P>
<P>
In the GNU system, <CODE>clock_t</CODE> is equivalent to <CODE>long int</CODE> and
<CODE>CLOCKS_PER_SEC</CODE> is an integer value.  But in other systems, both
<CODE>clock_t</CODE> and the type of the macro <CODE>CLOCKS_PER_SEC</CODE> can be
either integer or floating-point types.  Casting processor time values
to <CODE>double</CODE>, as in the example above, makes sure that operations
such as arithmetic and printing work properly and consistently no matter
what the underlying representation is.

</P>
<P>
Note that the clock can wrap around.  On a 32bit system with
<CODE>CLOCKS_PER_SEC</CODE> set to one million a wrap around happens after
around 36 minutes.

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>CLOCKS_PER_SEC</B>
<DD><A NAME="IDX2291"></A>
The value of this macro is the number of clock ticks per second measured
by the <CODE>clock</CODE> function.  POSIX requires that this value is one
million independent of the actual resolution.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> int <B>CLK_TCK</B>
<DD><A NAME="IDX2292"></A>
This is an obsolete name for <CODE>CLOCKS_PER_SEC</CODE>.
</DL>

</P>
<P>
<DL>
<DT><U>Data Type:</U> <B>clock_t</B>
<DD><A NAME="IDX2293"></A>
This is the type of the value returned by the <CODE>clock</CODE> function.
Values of type <CODE>clock_t</CODE> are in units of clock ticks.
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> clock_t <B>clock</B> <I>(void)</I>
<DD><A NAME="IDX2294"></A>
This function returns the elapsed processor time.  The base time is
arbitrary but doesn't change within a single process.  If the processor
time is not available or cannot be represented, <CODE>clock</CODE> returns the
value <CODE>(clock_t)(-1)</CODE>.
</DL>

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_393.html">previous</A>, <A HREF="libc_395.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
