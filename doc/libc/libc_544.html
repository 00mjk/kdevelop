<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Actions in the NSS configuration</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_543.html">previous</A>, <A HREF="libc_545.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC552" HREF="libc_toc.html#TOC552">Actions in the NSS configuration</A></H3>

<P>
The second item in the specification gives the user much finer control
on the lookup process.  Action items are placed between two service
names and are written within brackets.  The general form is

</P>

<PRE>
<CODE>[</CODE> ( <CODE>!</CODE>? <VAR>status</VAR> <CODE>=</CODE> <VAR>action</VAR> )+ <CODE>]</CODE>
</PRE>

<P>
where

</P>

<PRE>
<VAR>status</VAR> => success | notfound | unavail | tryagain
<VAR>action</VAR> => return | continue
</PRE>

<P>
The case of the keywords is insignificant.  The <VAR>status</VAR>
values are the results of a call to a lookup function of a specific
service.  They mean

</P>
<DL COMPACT>

<DT><SAMP>`success'</SAMP>
<DD>
<A NAME="IDX2879"></A>
No error occurred and the wanted entry is returned.  The default action
for this is <CODE>return</CODE>.

<DT><SAMP>`notfound'</SAMP>
<DD>
<A NAME="IDX2880"></A>
The lookup process works ok but the needed value was not found.  The
default action is <CODE>continue</CODE>.

<DT><SAMP>`unavail'</SAMP>
<DD>
<A NAME="IDX2881"></A>
<A NAME="IDX2882"></A>
The service is permanently unavailable.  This can either mean the needed
file is not available, or, for DNS, the server is not available or does
not allow queries.  The default action is <CODE>continue</CODE>.

<DT><SAMP>`tryagain'</SAMP>
<DD>
<A NAME="IDX2883"></A>
The service is temporarily unavailable.  This could mean a file is
locked or a server currently cannot accept more connections.  The
default action is <CODE>continue</CODE>.
</DL>

<P>
If we have a line like

</P>

<PRE>
ethers: nisplus [NOTFOUND=return] db files
</PRE>

<P>
this is equivalent to

</P>

<PRE>
ethers: nisplus [SUCCESS=return NOTFOUND=return UNAVAIL=continue
                 TRYAGAIN=continue]
        db      [SUCCESS=return NOTFOUND=continue UNAVAIL=continue
                 TRYAGAIN=continue]
        files
</PRE>

<P>
(except that it would have to be written on one line).  The default
value for the actions are normally what you want, and only need to be
changed in exceptional cases.

</P>
<P>
If the optional <CODE>!</CODE> is placed before the <VAR>status</VAR> this means
the following action is used for all statuses but <VAR>status</VAR> itself.
I.e., <CODE>!</CODE> is negation as in the C language (and others).

</P>
<P>
Before we explain the exception which makes this action item necessary
one more remark: obviously it makes no sense to add another action
item after the <CODE>files</CODE> service.  Since there is no other service
following the action <EM>always</EM> is <CODE>return</CODE>.

</P>
<P>
<A NAME="IDX2884"></A>
Now, why is this <CODE>[NOTFOUND=return]</CODE> action useful?  To understand
this we should know that the <CODE>nisplus</CODE> service is often
complete; i.e., if an entry is not available in the NIS+ tables it is
not available anywhere else.  This is what is expressed by this action
item: it is useless to examine further services since they will not give
us a result.

</P>
<P>
<A NAME="IDX2885"></A>
<A NAME="IDX2886"></A>
The situation would be different if the NIS+ service is not available
because the machine is booting.  In this case the return value of the
lookup function is not <CODE>notfound</CODE> but instead <CODE>unavail</CODE>.  And
as you can see in the complete form above: in this situation the
<CODE>db</CODE> and <CODE>files</CODE> services are used.  Neat, isn't it?  The
system administrator need not pay special care for the time the system
is not completely ready to work (while booting or shutdown or
network problems).

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_543.html">previous</A>, <A HREF="libc_545.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
