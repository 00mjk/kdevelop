<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Running make install</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_637.html">previous</A>, <A HREF="libc_639.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC646" HREF="libc_toc.html#TOC646">Installing the C Library</A></H2>
<P>
<A NAME="IDX3309"></A>

</P>
<P>
To install the library and its header files, and the Info files of the
manual, type <CODE>make install</CODE>.  This will build things if necessary,
before installing them.  However, you should still compile everything first.
If you are installing glibc as your primary C library, we recommend that you
shut the system down to single-user mode first, and reboot afterward.
This minimizes the risk of breaking things when the library changes out
from underneath.

</P>
<P>
If you're upgrading from Linux libc5 or some other C library, you need to
replace the <TT>`/usr/include'</TT> with a fresh directory before installing it.
The new <TT>`/usr/include'</TT> should contain the Linux headers, but nothing else.  

</P>
<P>
You must first build the library (<SAMP>`make'</SAMP>), optionally check it
(<SAMP>`make check'</SAMP>), switch the include directories and then install
(<SAMP>`make install'</SAMP>).  The steps must be done in this order.  Not moving
the directory before install will result in an unusable mixture of header
files from both libraries, but configuring, building, and checking the
library requires the ability to compile and run programs against the old
library. 

</P>
<P>
If you are upgrading from a previous installation of glibc 2.0 or 2.1,
<SAMP>`make install'</SAMP> will do the entire job.  You do not need to remove 
the old includes -- if you want to do so anyway you must then follow the 
order given above.

</P>
<P>
You may also need to reconfigure GCC to work with the new library.  The
easiest way to do that is to figure out the compiler switches to make it
work again (<SAMP>`-Wl,--dynamic-linker=/lib/ld-linux.so.2'</SAMP> should work on
Linux systems) and use them to recompile gcc.  You can also edit the specs
file (<TT>`/usr/lib/gcc-lib/<VAR>TARGET</VAR>/<VAR>VERSION</VAR>/specs'</TT>), but that
is a bit of a black art. 

</P>
<P>
You can install glibc somewhere other than where you configured it to go
by setting the <CODE>install_root</CODE> variable on the command line for
<SAMP>`make install'</SAMP>.  The value of this variable is prepended to all the
paths for installation.  This is useful when setting up a chroot
environment or preparing a binary distribution.  The directory should be
specified with an absolute file name.

</P>
<P>
Glibc 2.1 includes two daemons, <CODE>nscd</CODE> and <CODE>utmpd</CODE>, which you
may or may not want to run.  <CODE>nscd</CODE> caches name service lookups; it
can dramatically improve performance with NIS+, and may help with DNS as
well.  <CODE>utmpd</CODE> allows programs that use the old format for the
<TT>`utmp'</TT> file to coexist with new programs.  For more information see
the file <TT>`login/README.utmpd'</TT>.

</P>
<P>
One auxiliary program, <TT>`/usr/libexec/pt_chown'</TT>, is installed setuid
<CODE>root</CODE>.  This program is invoked by the <CODE>grantpt</CODE> function; it
sets the permissions on a pseudoterminal so it can be used by the
calling process.  This means programs like <CODE>xterm</CODE> and
<CODE>screen</CODE> do not have to be setuid to get a pty.  (There may be
other reasons why they need privileges.)  If you are using a 2.1 or
newer Linux kernel with the <CODE>devptsfs</CODE> or <CODE>devfs</CODE> filesystems
providing pty slaves, you don't need this program; otherwise you do.
The source for <TT>`pt_chown'</TT> is in <TT>`login/programs/pt_chown.c'</TT>.

</P>
<P>
After installation you might want to configure the timezone and locale
installation of your system.  The GNU C library comes with a locale
database which gets configured with <CODE>localedef</CODE>.  For example, to
set up a German locale with name <CODE>de_DE</CODE>, simply issue the command
<SAMP>`localedef -i de_DE -f ISO-8859-1 de_DE'</SAMP>.  To configure all locales
that are supported by glibc, you can issue from your build directory the
command <SAMP>`make localedata/install-locales'</SAMP>.

</P>
<P>
To configure the locally used timezone, you can either set the <CODE>TZ</CODE>
environment variable.  The script <CODE>tzselect</CODE> helps you to select
the right value.  As an example for Germany, tzselect would tell you to
use <SAMP>`TZ='Europe/Berlin''</SAMP>.  For a system wide installation (the
given paths are for an installation with <SAMP>`--prefix=/usr'</SAMP>), link the
timezone file which is in <TT>`/usr/share/zoneinfo'</TT> to the file
<TT>`/etc/localtime'</TT>.  For Germany, you might execute <SAMP>`ln -s
/usr/share/zoneinfo/Europe/Berlin /etc/localtime'</SAMP>.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_637.html">previous</A>, <A HREF="libc_639.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
