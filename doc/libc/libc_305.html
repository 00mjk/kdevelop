<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Closing a Socket</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_304.html">previous</A>, <A HREF="libc_306.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC312" HREF="libc_toc.html#TOC312">Closing a Socket</A></H3>
<P>
<A NAME="IDX1531"></A>
<A NAME="IDX1532"></A>
<A NAME="IDX1533"></A>
<A NAME="IDX1534"></A>

</P>
<P>
When you are finished using a socket, you can simply close its
file descriptor with <CODE>close</CODE>; see section <A HREF="libc_214.html#SEC221">Opening and Closing Files</A>.
If there is still data waiting to be transmitted over the connection,
normally <CODE>close</CODE> tries to complete this transmission.  You
can control this behavior using the <CODE>SO_LINGER</CODE> socket option to
specify a timeout period; see section <A HREF="libc_327.html#SEC334">Socket Options</A>.

</P>
<P>
<A NAME="IDX1535"></A>
You can also shut down only reception or only transmission on a
connection by calling <CODE>shutdown</CODE>, which is declared in
<TT>`sys/socket.h'</TT>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>shutdown</B> <I>(int <VAR>socket</VAR>, int <VAR>how</VAR>)</I>
<DD><A NAME="IDX1536"></A>
The <CODE>shutdown</CODE> function shuts down the connection of socket
<VAR>socket</VAR>.  The argument <VAR>how</VAR> specifies what action to
perform:

</P>
<DL COMPACT>

<DT><CODE>0</CODE>
<DD>
Stop receiving data for this socket.  If further data arrives,
reject it.

<DT><CODE>1</CODE>
<DD>
Stop trying to transmit data from this socket.  Discard any data
waiting to be sent.  Stop looking for acknowledgement of data already
sent; don't retransmit it if it is lost.

<DT><CODE>2</CODE>
<DD>
Stop both reception and transmission.
</DL>

<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on failure.  The
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
<VAR>socket</VAR> is not a valid file descriptor.

<DT><CODE>ENOTSOCK</CODE>
<DD>
<VAR>socket</VAR> is not a socket.

<DT><CODE>ENOTCONN</CODE>
<DD>
<VAR>socket</VAR> is not connected.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_304.html">previous</A>, <A HREF="libc_306.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
