<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Making Special Files</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_270.html">previous</A>, <A HREF="libc_272.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC278" HREF="libc_toc.html#TOC278">Making Special Files</A></H2>
<P>
<A NAME="IDX1352"></A>
<A NAME="IDX1353"></A>

</P>
<P>
The <CODE>mknod</CODE> function is the primitive for making special files,
such as files that correspond to devices.  The GNU library includes
this function for compatibility with BSD.

</P>
<P>
The prototype for <CODE>mknod</CODE> is declared in <TT>`sys/stat.h'</TT>.
<A NAME="IDX1354"></A>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>mknod</B> <I>(const char *<VAR>filename</VAR>, int <VAR>mode</VAR>, int <VAR>dev</VAR>)</I>
<DD><A NAME="IDX1355"></A>
The <CODE>mknod</CODE> function makes a special file with name <VAR>filename</VAR>.
The <VAR>mode</VAR> specifies the mode of the file, and may include the various
special file bits, such as <CODE>S_IFCHR</CODE> (for a character special file)
or <CODE>S_IFBLK</CODE> (for a block special file).  See section <A HREF="libc_263.html#SEC270">Testing the Type of a File</A>.

</P>
<P>
The <VAR>dev</VAR> argument specifies which device the special file refers to.
Its exact interpretation depends on the kind of special file being created.

</P>
<P>
The return value is <CODE>0</CODE> on success and <CODE>-1</CODE> on error.  In addition
to the usual file name errors (see section <A HREF="libc_153.html#SEC160">File Name Errors</A>), the
following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EPERM</CODE>
<DD>
The calling process is not privileged.  Only the superuser can create
special files.

<DT><CODE>ENOSPC</CODE>
<DD>
The directory or file system that would contain the new file is full
and cannot be extended.

<DT><CODE>EROFS</CODE>
<DD>
The directory containing the new file can't be modified because it's on
a read-only file system.

<DT><CODE>EEXIST</CODE>
<DD>
There is already a file named <VAR>filename</VAR>.  If you want to replace
this file, you must remove the old file explicitly first.
</DL>
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_270.html">previous</A>, <A HREF="libc_272.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
