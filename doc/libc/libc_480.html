<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Argp</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_479.html">previous</A>, <A HREF="libc_481.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC487" HREF="libc_toc.html#TOC487">Parsing Program Options with Argp</A></H2>
<P>
<A NAME="IDX2641"></A>
<A NAME="IDX2642"></A>
<A NAME="IDX2643"></A>

</P>
<P>
<STRONG>Argp</STRONG> is an interface for parsing unix-style argument vectors
(see section <A HREF="libc_472.html#SEC479">Program Arguments</A>).

</P>
<P>
Unlike the more common <CODE>getopt</CODE> interface, it provides many related
convenience features in addition to parsing options, such as
automatically producing output in response to <SAMP>`--help'</SAMP> and
<SAMP>`--version'</SAMP> options (as defined by the GNU coding standards).
Doing these things in argp results in a more consistent look for
programs that use it, and makes less likely that implementors will
neglect to implement them or keep them up-to-date.

</P>
<P>
Argp also provides the ability to merge several independently defined
option parsers into one, mediating conflicts between them, and making
the result appear seamless.  A library can export an argp option parser,
which programs can easily use in conjunction with their own option
parser.  This results in less work for user programs (indeed, some may
use only argument parsers exported by libraries, and have no options of
their own), and more consistent option-parsing for the abstractions
implemented by the library.

</P>
<P>
<A NAME="IDX2644"></A>
The header file <TT>`&#60;argp.h&#62;'</TT> should be included to use argp.

</P>


<H3><A NAME="SEC488" HREF="libc_toc.html#TOC488">The <CODE>argp_parse</CODE> Function</A></H3>

<P>
The main interface to argp is the <CODE>argp_parse</CODE> function; often, a
call to <CODE>argp_parse</CODE> is the only argument-parsing code needed in
<CODE>main</CODE> (see section <A HREF="libc_472.html#SEC479">Program Arguments</A>).

</P>
<P>
<DL>
<DT><U>Function:</U> error_t <B>argp_parse</B> <I>(const struct argp *<VAR>argp</VAR>, int <VAR>argc</VAR>, char **<VAR>argv</VAR>, unsigned <VAR>flags</VAR>, int *<VAR>arg_index</VAR>, void *<VAR>input</VAR>)</I>
<DD><A NAME="IDX2645"></A>
The <CODE>argp_parse</CODE> function parses the arguments in <VAR>argv</VAR>, of
length <VAR>argc</VAR>, using the argp parser <VAR>argp</VAR> (see section <A HREF="libc_482.html#SEC490">Specifying Argp Parsers</A>); a value of zero is the same as a <CODE>struct argp</CODE>
containing all zeros.  <VAR>flags</VAR> is a set of flag bits that modify the
parsing behavior (see section <A HREF="libc_490.html#SEC498">Flags for <CODE>argp_parse</CODE></A>).  <VAR>input</VAR> is passed through to
the argp parser <VAR>argp</VAR>, and has meaning defined by it; a typical
usage is to pass a pointer to a structure which can be used for
specifying parameters to the parser and passing back results from it.

</P>
<P>
Unless the <CODE>ARGP_NO_EXIT</CODE> or <CODE>ARGP_NO_HELP</CODE> flags are included
in <VAR>flags</VAR>, calling <CODE>argp_parse</CODE> may result in the program
exiting--for instance when an unknown option is encountered.
See section <A HREF="libc_506.html#SEC514">Program Termination</A>.

</P>
<P>
The return value is zero for successful parsing, or a unix error code
(see section <A HREF="libc_17.html#SEC17">Error Codes</A>) if an error was detected.  Different argp parsers
may return arbitrary error codes, but standard ones are <CODE>ENOMEM</CODE> if
a memory allocation error occurred, or <CODE>EINVAL</CODE> if an unknown option
or option argument was encountered.
</DL>

</P>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_479.html">previous</A>, <A HREF="libc_481.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
