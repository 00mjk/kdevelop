<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Dynamic String Input</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_190.html">previous</A>, <A HREF="libc_192.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC198" HREF="libc_toc.html#TOC198">Dynamically Allocating String Conversions</A></H3>

<P>
A GNU extension to formatted input lets you safely read a string with no
maximum size.  Using this feature, you don't supply a buffer; instead,
<CODE>scanf</CODE> allocates a buffer big enough to hold the data and gives
you its address.  To use this feature, write <SAMP>`a'</SAMP> as a flag
character, as in <SAMP>`%as'</SAMP> or <SAMP>`%a[0-9a-z]'</SAMP>.

</P>
<P>
The pointer argument you supply for where to store the input should have
type <CODE>char **</CODE>.  The <CODE>scanf</CODE> function allocates a buffer and
stores its address in the word that the argument points to.  You should
free the buffer with <CODE>free</CODE> when you no longer need it.

</P>
<P>
Here is an example of using the <SAMP>`a'</SAMP> flag with the <SAMP>`%[...]'</SAMP>
conversion specification to read a "variable assignment" of the form
<SAMP>`<VAR>variable</VAR> = <VAR>value</VAR>'</SAMP>.

</P>

<PRE>
{
  char *variable, *value;

  if (2 &#62; scanf ("%a[a-zA-Z0-9] = %a[^\n]\n",
                 &#38;variable, &#38;value))
    {
      invalid_input_error ();
      return 0;
    }

  ...
}
</PRE>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_190.html">previous</A>, <A HREF="libc_192.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
