<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Receiving Data</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_313.html">previous</A>, <A HREF="libc_315.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC321" HREF="libc_toc.html#TOC321">Receiving Data</A></H4>

<P>
<A NAME="IDX1562"></A>
The <CODE>recv</CODE> function is declared in the header file
<TT>`sys/socket.h'</TT>.  If your <VAR>flags</VAR> argument is zero, you can
just as well use <CODE>read</CODE> instead of <CODE>recv</CODE>; see section <A HREF="libc_216.html#SEC223">Input and Output Primitives</A>.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>recv</B> <I>(int <VAR>socket</VAR>, void *<VAR>buffer</VAR>, size_t <VAR>size</VAR>, int <VAR>flags</VAR>)</I>
<DD><A NAME="IDX1563"></A>
The <CODE>recv</CODE> function is like <CODE>read</CODE>, but with the additional
flags <VAR>flags</VAR>.  The possible values of <VAR>flags</VAR> are described
in section <A HREF="libc_315.html#SEC322">Socket Data Options</A>.

</P>
<P>
If nonblocking mode is set for <VAR>socket</VAR>, and no data is available to
be read, <CODE>recv</CODE> fails immediately rather than waiting.  See section <A HREF="libc_236.html#SEC243">File Status Flags</A>, for information about nonblocking mode.

</P>
<P>
This function returns the number of bytes received, or <CODE>-1</CODE> on failure.
The following <CODE>errno</CODE> error conditions are defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EBADF</CODE>
<DD>
The <VAR>socket</VAR> argument is not a valid file descriptor.

<DT><CODE>ENOTSOCK</CODE>
<DD>
The descriptor <VAR>socket</VAR> is not a socket.

<DT><CODE>EWOULDBLOCK</CODE>
<DD>
Nonblocking mode has been set on the socket, and the read operation
would block.  (Normally, <CODE>recv</CODE> blocks until there is input
available to be read.)

<DT><CODE>EINTR</CODE>
<DD>
The operation was interrupted by a signal before any data was read.
See section <A HREF="libc_449.html#SEC456">Primitives Interrupted by Signals</A>.

<DT><CODE>ENOTCONN</CODE>
<DD>
You never connected this socket.
</DL>

<P>
This function is defined as a cancelation point in multi-threaded
programs.  So one has to be prepared for this and make sure that
possibly allocated resources (like memory, files descriptors,
semaphores or whatever) are freed even if the thread is canceled.
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_313.html">previous</A>, <A HREF="libc_315.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
