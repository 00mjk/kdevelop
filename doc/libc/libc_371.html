<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - FP Exceptions</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_370.html">previous</A>, <A HREF="libc_372.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC378" HREF="libc_toc.html#TOC378">FP Exceptions</A></H3>
<P>
<A NAME="IDX2055"></A>
<A NAME="IDX2056"></A>
<A NAME="IDX2057"></A>
<A NAME="IDX2058"></A>
<A NAME="IDX2059"></A>
<A NAME="IDX2060"></A>
<A NAME="IDX2061"></A>
<A NAME="IDX2062"></A>

</P>
<P>
The IEEE 754 standard defines five <STRONG>exceptions</STRONG> that can occur
during a calculation.  Each corresponds to a particular sort of error,
such as overflow.

</P>
<P>
When exceptions occur (when exceptions are <STRONG>raised</STRONG>, in the language
of the standard), one of two things can happen.  By default the
exception is simply noted in the floating-point <STRONG>status word</STRONG>, and
the program continues as if nothing had happened.  The operation
produces a default value, which depends on the exception (see the table
below).  Your program can check the status word to find out which
exceptions happened.

</P>
<P>
Alternatively, you can enable <STRONG>traps</STRONG> for exceptions.  In that case,
when an exception is raised, your program will receive the <CODE>SIGFPE</CODE>
signal.  The default action for this signal is to terminate the
program.  See section <A HREF="libc_417.html#SEC424">Signal Handling</A>, for how you can change the effect of
the signal.

</P>
<P>
<A NAME="IDX2063"></A>
In the System V math library, the user-defined function <CODE>matherr</CODE>
is called when certain exceptions occur inside math library functions.
However, the Unix98 standard deprecates this interface.  We support it
for historical compatibility, but recommend that you do not use it in
new programs.

</P>
<P>
The exceptions defined in IEEE 754 are:

</P>
<DL COMPACT>

<DT><SAMP>`Invalid Operation'</SAMP>
<DD>
This exception is raised if the given operands are invalid for the
operation to be performed.  Examples are
(see IEEE 754, section 7):

<OL>
<LI>

Addition or subtraction: @math{@infinity{} - @infinity{}}.  (But
@math{@infinity{} + @infinity{} = @infinity{}}).
<LI>

Multiplication: @math{0 @mul{} @infinity{}}.
<LI>

Division: @math{0/0} or @math{@infinity{}/@infinity{}}.
<LI>

Remainder: @math{x} REM @math{y}, where @math{y} is zero or @math{x} is
infinite.
<LI>

Square root if the operand is less then zero.  More generally, any
mathematical function evaluated outside its domain produces this
exception.
<LI>

Conversion of a floating-point number to an integer or decimal
string, when the number cannot be represented in the target format (due
to overflow, infinity, or NaN).
<LI>

Conversion of an unrecognizable input string.
<LI>

Comparison via predicates involving @math{&#60;} or @math{&#62;}, when one or
other of the operands is NaN.  You can prevent this exception by using
the unordered comparison functions instead; see section <A HREF="libc_383.html#SEC390">Floating-Point Comparison Functions</A>.
</OL>

If the exception does not trap, the result of the operation is NaN.

<DT><SAMP>`Division by Zero'</SAMP>
<DD>
This exception is raised when a finite nonzero number is divided
by zero.  If no trap occurs the result is either @math{+@infinity{}} or
@math{-@infinity{}}, depending on the signs of the operands.

<DT><SAMP>`Overflow'</SAMP>
<DD>
This exception is raised whenever the result cannot be represented
as a finite value in the precision format of the destination.  If no trap
occurs the result depends on the sign of the intermediate result and the
current rounding mode (IEEE 754, section 7.3):

<OL>
<LI>

Round to nearest carries all overflows to @math{@infinity{}}
with the sign of the intermediate result.
<LI>

Round toward @math{0} carries all overflows to the largest representable
finite number with the sign of the intermediate result.
<LI>

Round toward @math{-@infinity{}} carries positive overflows to the
largest representable finite number and negative overflows to
@math{-@infinity{}}.

<LI>

Round toward @math{@infinity{}} carries negative overflows to the
most negative representable finite number and positive overflows
to @math{@infinity{}}.
</OL>

Whenever the overflow exception is raised, the inexact exception is also
raised.

<DT><SAMP>`Underflow'</SAMP>
<DD>
The underflow exception is raised when an intermediate result is too
small to be calculated accurately, or if the operation's result rounded
to the destination precision is too small to be normalized.

When no trap is installed for the underflow exception, underflow is
signaled (via the underflow flag) only when both tininess and loss of
accuracy have been detected.  If no trap handler is installed the
operation continues with an imprecise small value, or zero if the
destination precision cannot hold the small exact result.

<DT><SAMP>`Inexact'</SAMP>
<DD>
This exception is signalled if a rounded result is not exact (such as
when calculating the square root of two) or a result overflows without
an overflow trap.
</DL>

<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_370.html">previous</A>, <A HREF="libc_372.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
