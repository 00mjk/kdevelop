<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Old Varargs</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_623.html">previous</A>, <A HREF="libc_625.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H4><A NAME="SEC632" HREF="libc_toc.html#TOC632">Old-Style Variadic Functions</A></H4>

<P>
<A NAME="IDX3226"></A>
Before ISO C, programmers used a slightly different facility for
writing variadic functions.  The GNU C compiler still supports it;
currently, it is more portable than the ISO C facility, since support
for ISO C is still not universal.  The header file which defines the
old-fashioned variadic facility is called <TT>`varargs.h'</TT>.

</P>
<P>
Using <TT>`varargs.h'</TT> is almost the same as using <TT>`stdarg.h'</TT>.
There is no difference in how you call a variadic function;
see section <A HREF="libc_621.html#SEC629">Calling Variadic Functions</A>.  The only difference is in how you define
them.  First of all, you must use old-style non-prototype syntax, like
this:

</P>

<PRE>
tree
build (va_alist)
     va_dcl
{
</PRE>

<P>
Secondly, you must give <CODE>va_start</CODE> just one argument, like this:

</P>

<PRE>
  va_list p;
  va_start (p);
</PRE>

<P>
These are the special macros used for defining old-style variadic
functions:

</P>
<P>
<DL>
<DT><U>Macro:</U> <B>va_alist</B>
<DD><A NAME="IDX3227"></A>
This macro stands for the argument name list required in a variadic
function.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> <B>va_dcl</B>
<DD><A NAME="IDX3228"></A>
This macro declares the implicit argument or arguments for a variadic
function.
</DL>

</P>
<P>
<DL>
<DT><U>Macro:</U> void <B>va_start</B> <I>(va_list <VAR>ap</VAR>)</I>
<DD><A NAME="IDX3229"></A>
This macro, as defined in <TT>`varargs.h'</TT>, initializes the argument
pointer variable <VAR>ap</VAR> to point to the first argument of the current
function.
</DL>

</P>
<P>
The other argument macros, <CODE>va_arg</CODE> and <CODE>va_end</CODE>, are the same
in <TT>`varargs.h'</TT> as in <TT>`stdarg.h'</TT>; see section <A HREF="libc_622.html#SEC630">Argument Access Macros</A>, for
details.

</P>
<P>
It does not work to include both <TT>`varargs.h'</TT> and <TT>`stdarg.h'</TT> in
the same compilation; they define <CODE>va_start</CODE> in conflicting ways.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_623.html">previous</A>, <A HREF="libc_625.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
