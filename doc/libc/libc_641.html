<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Linux</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_640.html">previous</A>, <A HREF="libc_642.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC649" HREF="libc_toc.html#TOC649">Specific advice for Linux systems</A></H2>
<P>
<A NAME="IDX3313"></A>
<A NAME="IDX3314"></A>

</P>
<P>
If you are installing GNU libc on a Linux system, you need to have
the header files from a 2.2 kernel around for reference.  You do not
need to use the 2.2 kernel, just have its headers where glibc can access
at them.  The easiest way to do this is to unpack it in a directory
such as <TT>`/usr/src/linux-2.2.1'</TT>.  In that directory, run
<SAMP>`make config'</SAMP> and accept all the defaults.  Then run <SAMP>`make
include/linux/version.h'</SAMP>.  Finally, configure glibc with the option
<SAMP>`--with-headers=/usr/src/linux-2.2.1/include'</SAMP>.  Use the most recent
kernel you can get your hands on.

</P>
<P>
An alternate tactic is to unpack the 2.2 kernel and run <SAMP>`make
config'</SAMP> as above.  Then rename or delete <TT>`/usr/include'</TT>, create
a new <TT>`/usr/include'</TT>, and make the usual symbolic links of
<TT>`/usr/include/linux'</TT> and <TT>`/usr/include/asm'</TT> into the 2.2
kernel sources.  You can then configure glibc with no special options.
This tactic is recommended if you are upgrading from libc5, since you
need to get rid of the old header files anyway.

</P>
<P>
Note that <TT>`/usr/include/net'</TT> and <TT>`/usr/include/scsi'</TT> should
<STRONG>not</STRONG> be symlinks into the kernel sources.  GNU libc provides its
own versions of these files.

</P>
<P>
Linux expects some components of the libc installation to be in
<TT>`/lib'</TT> and some in <TT>`/usr/lib'</TT>.  This is handled automatically
if you configure glibc with <SAMP>`--prefix=/usr'</SAMP>.  If you set some other
prefix or allow it to default to <TT>`/usr/local'</TT>, then all the
components are installed there.

</P>
<P>
If you are upgrading from libc5, you need to recompile every shared
library on your system against the new library for the sake of new code,
but keep the old libraries around for old binaries to use.  This is
complicated and difficult.  Consult the Glibc2 HOWTO at
@url{http://www.imaxx.net/~thrytis/glibc} for details.

</P>
<P>
You cannot use <CODE>nscd</CODE> with 2.0 kernels, due to bugs in the
kernel-side thread support.  <CODE>nscd</CODE> happens to hit these bugs
particularly hard, but you might have problems with any threaded
program.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_640.html">previous</A>, <A HREF="libc_642.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
