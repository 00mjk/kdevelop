<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Deleting Files</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_256.html">previous</A>, <A HREF="libc_258.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H2><A NAME="SEC264" HREF="libc_toc.html#TOC264">Deleting Files</A></H2>
<P>
<A NAME="IDX1235"></A>
<A NAME="IDX1236"></A>
<A NAME="IDX1237"></A>

</P>
<P>
You can delete a file with the functions <CODE>unlink</CODE> or <CODE>remove</CODE>.

</P>
<P>
Deletion actually deletes a file name.  If this is the file's only name,
then the file is deleted as well.  If the file has other names as well
(see section <A HREF="libc_255.html#SEC262">Hard Links</A>), it remains accessible under its other names.

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>unlink</B> <I>(const char *<VAR>filename</VAR>)</I>
<DD><A NAME="IDX1238"></A>
The <CODE>unlink</CODE> function deletes the file name <VAR>filename</VAR>.  If
this is a file's sole name, the file itself is also deleted.  (Actually,
if any process has the file open when this happens, deletion is
postponed until all processes have closed the file.)

</P>
<P>
<A NAME="IDX1239"></A>
The function <CODE>unlink</CODE> is declared in the header file <TT>`unistd.h'</TT>.

</P>
<P>
This function returns <CODE>0</CODE> on successful completion, and <CODE>-1</CODE>
on error.  In addition to the usual file name errors
(see section <A HREF="libc_153.html#SEC160">File Name Errors</A>), the following <CODE>errno</CODE> error conditions are
defined for this function:

</P>
<DL COMPACT>

<DT><CODE>EACCES</CODE>
<DD>
Write permission is denied for the directory from which the file is to be
removed, or the directory has the sticky bit set and you do not own the file.

<DT><CODE>EBUSY</CODE>
<DD>
This error indicates that the file is being used by the system in such a
way that it can't be unlinked.  For example, you might see this error if
the file name specifies the root directory or a mount point for a file
system.

<DT><CODE>ENOENT</CODE>
<DD>
The file name to be deleted doesn't exist.

<DT><CODE>EPERM</CODE>
<DD>
On some systems, <CODE>unlink</CODE> cannot be used to delete the name of a
directory, or can only be used this way by a privileged user.
To avoid such problems, use <CODE>rmdir</CODE> to delete directories.
(In the GNU system <CODE>unlink</CODE> can never delete the name of a directory.)

<DT><CODE>EROFS</CODE>
<DD>
The directory in which the file name is to be deleted is on a read-only
file system, and can't be modified.
</DL>
</DL>

<P>
<DL>
<DT><U>Function:</U> int <B>rmdir</B> <I>(const char *<VAR>filename</VAR>)</I>
<DD><A NAME="IDX1240"></A>
<A NAME="IDX1241"></A>
<A NAME="IDX1242"></A>
The <CODE>rmdir</CODE> function deletes a directory.  The directory must be
empty before it can be removed; in other words, it can only contain
entries for <TT>`.'</TT> and <TT>`..'</TT>.

</P>
<P>
In most other respects, <CODE>rmdir</CODE> behaves like <CODE>unlink</CODE>.  There
are two additional <CODE>errno</CODE> error conditions defined for
<CODE>rmdir</CODE>:

</P>
<DL COMPACT>

<DT><CODE>ENOTEMPTY</CODE>
<DD>
<DT><CODE>EEXIST</CODE>
<DD>
The directory to be deleted is not empty.
</DL>

<P>
These two error codes are synonymous; some systems use one, and some use
the other.  The GNU system always uses <CODE>ENOTEMPTY</CODE>.

</P>
<P>
The prototype for this function is declared in the header file
<TT>`unistd.h'</TT>.
<A NAME="IDX1243"></A>
</DL>

</P>
<P>
<DL>
<DT><U>Function:</U> int <B>remove</B> <I>(const char *<VAR>filename</VAR>)</I>
<DD><A NAME="IDX1244"></A>
This is the ISO C function to remove a file.  It works like
<CODE>unlink</CODE> for files and like <CODE>rmdir</CODE> for directories.
<CODE>remove</CODE> is declared in <TT>`stdio.h'</TT>.
<A NAME="IDX1245"></A>
</DL>

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_256.html">previous</A>, <A HREF="libc_258.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
