<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from libc.texinfo on 28 March 2001 -->

<TITLE>The GNU C Library - Permission Bits</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_264.html">previous</A>, <A HREF="libc_266.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<P><HR><P>


<H3><A NAME="SEC272" HREF="libc_toc.html#TOC272">The Mode Bits for Access Permission</A></H3>

<P>
The <STRONG>file mode</STRONG>, stored in the <CODE>st_mode</CODE> field of the file
attributes, contains two kinds of information: the file type code, and
the access permission bits.  This section discusses only the access
permission bits, which control who can read or write the file.
See section <A HREF="libc_263.html#SEC270">Testing the Type of a File</A>, for information about the file type code.

</P>
<P>
All of the symbols listed in this section are defined in the header file
<TT>`sys/stat.h'</TT>.
<A NAME="IDX1298"></A>

</P>
<P>
<A NAME="IDX1299"></A>
These symbolic constants are defined for the file mode bits that control
access permission for the file:

</P>
<DL COMPACT>

<DT><CODE>S_IRUSR</CODE>
<DD>
<A NAME="IDX1300"></A>
<DT><CODE>S_IREAD</CODE>
<DD>
<A NAME="IDX1301"></A>
Read permission bit for the owner of the file.  On many systems, this
bit is 0400.  <CODE>S_IREAD</CODE> is an obsolete synonym provided for BSD
compatibility.

<DT><CODE>S_IWUSR</CODE>
<DD>
<A NAME="IDX1302"></A>
<DT><CODE>S_IWRITE</CODE>
<DD>
<A NAME="IDX1303"></A>
Write permission bit for the owner of the file.  Usually 0200.
<CODE>S_IWRITE</CODE> is an obsolete synonym provided for BSD compatibility.

<DT><CODE>S_IXUSR</CODE>
<DD>
<A NAME="IDX1304"></A>
<DT><CODE>S_IEXEC</CODE>
<DD>
<A NAME="IDX1305"></A>
Execute (for ordinary files) or search (for directories) permission bit
for the owner of the file.  Usually 0100.  <CODE>S_IEXEC</CODE> is an obsolete
synonym provided for BSD compatibility.

<DT><CODE>S_IRWXU</CODE>
<DD>
<A NAME="IDX1306"></A>
This is equivalent to <SAMP>`(S_IRUSR | S_IWUSR | S_IXUSR)'</SAMP>.

<DT><CODE>S_IRGRP</CODE>
<DD>
<A NAME="IDX1307"></A>
Read permission bit for the group owner of the file.  Usually 040.

<DT><CODE>S_IWGRP</CODE>
<DD>
<A NAME="IDX1308"></A>
Write permission bit for the group owner of the file.  Usually 020.

<DT><CODE>S_IXGRP</CODE>
<DD>
<A NAME="IDX1309"></A>
Execute or search permission bit for the group owner of the file.
Usually 010.

<DT><CODE>S_IRWXG</CODE>
<DD>
<A NAME="IDX1310"></A>
This is equivalent to <SAMP>`(S_IRGRP | S_IWGRP | S_IXGRP)'</SAMP>.

<DT><CODE>S_IROTH</CODE>
<DD>
<A NAME="IDX1311"></A>
Read permission bit for other users.  Usually 04.

<DT><CODE>S_IWOTH</CODE>
<DD>
<A NAME="IDX1312"></A>
Write permission bit for other users.  Usually 02.

<DT><CODE>S_IXOTH</CODE>
<DD>
<A NAME="IDX1313"></A>
Execute or search permission bit for other users.  Usually 01.

<DT><CODE>S_IRWXO</CODE>
<DD>
<A NAME="IDX1314"></A>
This is equivalent to <SAMP>`(S_IROTH | S_IWOTH | S_IXOTH)'</SAMP>.

<DT><CODE>S_ISUID</CODE>
<DD>
<A NAME="IDX1315"></A>
This is the set-user-ID on execute bit, usually 04000.
See section <A HREF="libc_556.html#SEC564">How an Application Can Change Persona</A>.

<DT><CODE>S_ISGID</CODE>
<DD>
<A NAME="IDX1316"></A>
This is the set-group-ID on execute bit, usually 02000.
See section <A HREF="libc_556.html#SEC564">How an Application Can Change Persona</A>.

<A NAME="IDX1317"></A>
<DT><CODE>S_ISVTX</CODE>
<DD>
<A NAME="IDX1318"></A>
This is the <STRONG>sticky</STRONG> bit, usually 01000.

On a directory, it gives permission to delete a file in the directory
only if you own that file.  Ordinarily, a user either can delete all the
files in the directory or cannot delete any of them (based on whether
the user has write permission for the directory).  The same restriction
applies--you must both have write permission for the directory and own
the file you want to delete.  The one exception is that the owner of the
directory can delete any file in the directory, no matter who owns it
(provided the owner has given himself write permission for the
directory).  This is commonly used for the <TT>`/tmp'</TT> directory, where
anyone may create files, but not delete files created by other users.

Originally the sticky bit on an executable file modified the swapping
policies of the system.  Normally, when a program terminated, its pages
in core were immediately freed and reused.  If the sticky bit was set on
the executable file, the system kept the pages in core for a while as if
the program were still running.  This was advantageous for a program
likely to be run many times in succession.  This usage is obsolete in
modern systems.  When a program terminates, its pages always remain in
core as long as there is no shortage of memory in the system.  When the
program is next run, its pages will still be in core if no shortage
arose since the last run.

On some modern systems where the sticky bit has no useful meaning for an
executable file, you cannot set the bit at all for a non-directory.
If you try, <CODE>chmod</CODE> fails with <CODE>EFTYPE</CODE>;
see section <A HREF="libc_267.html#SEC274">Assigning File Permissions</A>.

Some systems (particularly SunOS) have yet another use for the sticky
bit.  If the sticky bit is set on a file that is <EM>not</EM> executable,
it means the opposite: never cache the pages of this file at all.  The
main use of this is for the files on an NFS server machine which are
used as the swap area of diskless client machines.  The idea is that the
pages of the file will be cached in the client's memory, so it is a
waste of the server's memory to cache them a second time.  In this use
the sticky bit also says that the filesystem may fail to record the
file's modification time onto disk reliably (the idea being that no-one
cares for a swap file).

This bit is only available on BSD systems (and those derived from
them).  Therefore one has to use the <CODE>_BSD_SOURCE</CODE> feature select
macro to get the definition (see section <A HREF="libc_13.html#SEC13">Feature Test Macros</A>).
</DL>

<P>
The actual bit values of the symbols are listed in the table above
so you can decode file mode values when debugging your programs.
These bit values are correct for most systems, but they are not
guaranteed.

</P>
<P>
<STRONG>Warning:</STRONG> Writing explicit numbers for file permissions is bad
practice.  It is not only non-portable, it also requires everyone who
reads your program to remember what the bits mean.  To make your
program clean, use the symbolic names.

</P>
<P><HR><P>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_264.html">previous</A>, <A HREF="libc_266.html">next</A>, <A HREF="libc_654.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
